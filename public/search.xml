[{"title":"Python打包exe","url":"https://wang-weijun.github.io/2023/05/09/Python打包exe/","content":"<h2 id=\"使用pyinstaller打包\"><a href=\"#使用pyinstaller打包\" class=\"headerlink\" title=\"使用pyinstaller打包\"></a>使用pyinstaller打包</h2><p>在pycharm中点击<strong>新建环境</strong></p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509165923855.png\" alt=\"image-20230509165923855\"></p>\n<p>进入文件后，会有一个文件夹<code>venv</code>，用来存放管理的库文件</p>\n<h3 id=\"创建requirements-txt\"><a href=\"#创建requirements-txt\" class=\"headerlink\" title=\"创建requirements.txt\"></a>创建requirements.txt</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install requests</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509170609691.png\" alt=\"image-20230509170609691\"></p>\n<p>可以看到虚拟环境下安装的包</p>\n<h2 id=\"安装pyinstaller\"><a href=\"#安装pyinstaller\" class=\"headerlink\" title=\"安装pyinstaller\"></a>安装pyinstaller</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pyinstaller</span><br></pre></td></tr></table></figure>\n<p>安装完成后将终端关闭，<strong>重新打开</strong></p>\n<p>我们输入<code>pyinstaller</code>，当出现一下结果，说明安装成功</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171248558.png\" alt=\"image-20230509171248558\"></p>\n<h3 id=\"单文件打包\"><a href=\"#单文件打包\" class=\"headerlink\" title=\"单文件打包\"></a>单文件打包</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pyinstaller -D app.py</span><br></pre></td></tr></table></figure>\n<p>开始打包</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171708499.png\" alt=\"image-20230509171708499\"></p>\n<p>之后在当前文件夹会出现三个文件</p>\n<ul>\n<li><strong>build</strong>：中间编译时，产出的文件</li>\n<li><strong>dist</strong>：打包生成后的文件目录</li>\n<li><strong>xxx.spec</strong>：打包的配置文件</li>\n</ul>\n<p>在<code>dist</code>中可以看到有我们上面起的名字<code>app</code>，只需将<strong>app文件夹</strong>发给他人，打开里面的<strong>app.exe</strong>文件，即可使用</p>\n","categories":["Python"],"tags":["高级语言"]},{"title":"深度学习","url":"https://wang-weijun.github.io/2023/05/08/深度学习/","content":"<h1 id=\"深度学习\"><a href=\"#深度学习\" class=\"headerlink\" title=\"深度学习\"></a>深度学习</h1><h2 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h2><ul>\n<li><p><strong>数据处理</strong></p>\n<ol>\n<li>读入数据</li>\n<li>划分数据集</li>\n<li>生成批次数据</li>\n<li>训练样本集乱序</li>\n<li>校验数据有效性</li>\n</ol>\n</li>\n<li><p><strong>模型设计</strong></p>\n<ol>\n<li>网络结构</li>\n<li>损失函数</li>\n</ol>\n</li>\n<li><strong>训练配置</strong><ol>\n<li>优化算法<ul>\n<li>随机梯度下降（SGD）：随机梯度下降算法，每次训练少量数据，抽样偏差导致参数收敛过程中震荡。</li>\n<li>动量（Momentum）：引入物理“动量”的概念，累积速度，减少震荡，使参数更新的方向更稳定。</li>\n<li>AdaGrad： 根据不同参数距离最优解的远近，动态调整学习率。学习率逐渐下降，依据各参数变化大小调整学习率。</li>\n<li>Adam： 由于动量和自适应学习率两个优化思路是正交的，因此可以将两个思路结合起来，这就是当前广泛应用的算法。</li>\n</ul>\n</li>\n<li>设置学习率</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"pycharm\"><a href=\"#pycharm\" class=\"headerlink\" title=\"pycharm\"></a>pycharm</h2><h3 id=\"conda环境\"><a href=\"#conda环境\" class=\"headerlink\" title=\"conda环境\"></a>conda环境</h3><blockquote>\n<p>新建环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n yourEnv python=3.10</span><br></pre></td></tr></table></figure>\n<ul>\n<li>–name：也可以缩写为 【-n】，【yourEnv】是新创建的虚拟环境的名字，创建完，可以装anaconda的目录下找到envs/yourEnv 目录</li>\n<li>python=2.7：是python的版本号。也可以指定为【python=3.6】，若未指定，默认为是装anaconda时python的版本.</li>\n</ul>\n<blockquote>\n<p>激活环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">activate yourEnv</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>windows用户环境变量中添加（改成自己的路径）：</p>\n<blockquote>\n<p>D:\\Anaconda3<br>D:\\Anaconda3\\Scripts<br>D:\\Anaconda3\\Library\\bin</p>\n</blockquote>\n</li>\n</ul>\n<blockquote>\n<p>查看活跃的环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda info --envs</span><br></pre></td></tr></table></figure>\n<p>输出中带有【*】号的的就是当前所处的环境</p>\n<p>当==创建环境==时，出现<strong><code>NoWritablePkgsDirError: No writeable pkgs directories configured.</code></strong>报错</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda config --add pkgs_dirs D:\\Environment\\Anaconda3\\pkgs </span><br><span class=\"line\">conda config --add envs_dirs D:\\Environment\\Anaconda3\\envs</span><br></pre></td></tr></table></figure>\n<h3 id=\"conda其他命令\"><a href=\"#conda其他命令\" class=\"headerlink\" title=\"conda其他命令\"></a>conda其他命令</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda list: 看这个环境下安装的包和版本</span><br><span class=\"line\">conda install numpy scikit-learn: 安装numpy sklearn包</span><br><span class=\"line\">conda <span class=\"built_in\">env</span> remove -n yourEnv: 删除你的环境</span><br><span class=\"line\">conda <span class=\"built_in\">env</span> list: 查看所有的环境</span><br></pre></td></tr></table></figure>\n<h3 id=\"常见报错\"><a href=\"#常见报错\" class=\"headerlink\" title=\"常见报错\"></a>常见报错</h3><p>img.imshow（xxx）不显示图片</p>\n<p>在pycharm中设置图片不在pycharm中显示（关闭 Show plots in tool window）</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030632717.png\" alt=\"image-20230509030632717\"></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pylab</span><br><span class=\"line\"></span><br><span class=\"line\">pylab.show()</span><br></pre></td></tr></table></figure>\n<p>当控制台报</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OMP: Error <span class=\"comment\">#15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.</span></span><br><span class=\"line\">OMP: Hint This means that multiple copies of the OpenMP runtime have been linked into the program. That is dangerous, since it can degrade performance or cause incorrect results. The best thing to <span class=\"keyword\">do</span> is to ensure that only a single OpenMP runtime is linked into the process, e.g. by avoiding static linking of the OpenMP runtime <span class=\"keyword\">in</span> any library. As an unsafe, unsupported, undocumented workaround you can <span class=\"built_in\">set</span> the environment variable KMP_DUPLICATE_LIB_OK=TRUE to allow the program to <span class=\"built_in\">continue</span> to execute, but that may cause crashes or silently produce incorrect results. For more information, please see http://www.intel.com/software/products/support/.</span><br></pre></td></tr></table></figure>\n<p>使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import os</span><br><span class=\"line\">os.environ[&#x27;KMP_DUPLICATE_LIB_OK&#x27;] = &#x27;True&#x27;</span><br></pre></td></tr></table></figure>\n<h2 id=\"线性回归与逻辑回归\"><a href=\"#线性回归与逻辑回归\" class=\"headerlink\" title=\"线性回归与逻辑回归\"></a>线性回归与逻辑回归</h2><ul>\n<li>线性回归是一种用于预测和拟合函数的方法。它用于回归任务，例如用来拟合一条直线。</li>\n</ul>\n<blockquote>\n<p>应用：线性回归常用于连续变量的预测，例如房价预测、股票价格预测等。它可以用来拟合一条直线，描述自变量和因变量之间的关系。</p>\n</blockquote>\n<ul>\n<li>逻辑回归是一种用于分类和预测函数的方法。它用于分类任务，可以进行二分类或多分类。它是在给定自变量和超参数后，得到因变量的期望，基于这个期望来处理预测分类问题。</li>\n</ul>\n<blockquote>\n<p>应用：逻辑回归常用于分类问题，例如垃圾邮件分类、疾病诊断等。它可以用来预测一个事件发生的概率，并根据这个概率进行分类。</p>\n</blockquote>\n<h2 id=\"支持向量机SVM\"><a href=\"#支持向量机SVM\" class=\"headerlink\" title=\"支持向量机SVM\"></a>支持向量机SVM</h2><p><strong>线性可分支持向量机</strong></p>\n<p>$w=(w_1,w_2\\cdots w_n)$</p>\n<p>$x=(x_1,x_2\\cdots x_n)$</p>\n<p>b = -10</p>\n<p>$w ×x+b=0$</p>\n<p><strong>线性支持向量机</strong></p>\n<p><strong>非线性支持向量机</strong></p>\n<h2 id=\"Softmax-回归\"><a href=\"#Softmax-回归\" class=\"headerlink\" title=\"Softmax 回归\"></a>Softmax 回归</h2><blockquote>\n<p>区别</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030620079.png\" alt=\"image-20230509030620079\"></p>\n<h3 id=\"均方损失\"><a href=\"#均方损失\" class=\"headerlink\" title=\"均方损失\"></a>均方损失</h3><p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030615471.png\" alt=\"image-20230509030615471\"></p>\n<h3 id=\"Softmax和交叉熵损失\"><a href=\"#Softmax和交叉熵损失\" class=\"headerlink\" title=\"Softmax和交叉熵损失\"></a>Softmax和交叉熵损失</h3><ul>\n<li>交叉熵常用来衡量两个概率的区别</li>\n</ul>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030607826.png\" alt=\"image-20230509030607826\"></p>\n<p>总结：</p>\n<ul>\n<li>Softmax回归是一个多分类模型</li>\n<li>使用Softmax操作子得到每个类的预测置信度</li>\n<li>使用交叉熵来衡量预测和标号的区别作为损失函数</li>\n</ul>\n<h3 id=\"从零开始实现\"><a href=\"#从零开始实现\" class=\"headerlink\" title=\"从零开始实现\"></a>从零开始实现</h3><p>$softmax(X)<em>{ij}=\\frac{exp(X</em>{ij})}{∑<em>kexp(X</em>{ik})}$</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">softmax</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    X_exp = torch.exp(X)</span><br><span class=\"line\">    partition = X_exp.<span class=\"built_in\">sum</span>(<span class=\"number\">1</span>, keepdim=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X_exp / partition <span class=\"comment\"># 应用广播机制</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>实现结果</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030549122.png\" alt=\"image-20230509030549122\"></p>\n<h2 id=\"损失函数\"><a href=\"#损失函数\" class=\"headerlink\" title=\"损失函数\"></a>损失函数</h2><p>L2 Loss（均方损失）</p>\n<blockquote>\n<p> $l(y,y’)=\\frac{1}{2}(y-y’)^2$</p>\n</blockquote>\n<p>L1 Loss</p>\n<blockquote>\n<p>$l(y,y’)=|y-y’|$</p>\n</blockquote>\n<h2 id=\"图像分类数据集\"><a href=\"#图像分类数据集\" class=\"headerlink\" title=\"图像分类数据集\"></a>图像分类数据集</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">from</span> torch.utils <span class=\"keyword\">import</span> data</span><br><span class=\"line\"><span class=\"keyword\">from</span> d2l <span class=\"keyword\">import</span> torch <span class=\"keyword\">as</span> d2l</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_dataloader_workers</span>():</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;使用4个进程来读取数据。&quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">4</span></span><br><span class=\"line\"></span><br><span class=\"line\">train_iter = data.DataLoader(mnist_train, batch_size, shuffle=<span class=\"literal\">True</span>, num_workers=get_dataloader_workers())</span><br><span class=\"line\"></span><br><span class=\"line\">timer = d2l.Timer()</span><br><span class=\"line\"><span class=\"keyword\">for</span> X, y <span class=\"keyword\">in</span> train_iter:</span><br><span class=\"line\">    <span class=\"keyword\">continue</span></span><br><span class=\"line\"><span class=\"comment\"># 打印读取数据时间</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;timer.stop():<span class=\"number\">.2</span>f&#125;</span> sec&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"感知机\"><a href=\"#感知机\" class=\"headerlink\" title=\"感知机\"></a>感知机</h2><p><strong>二分类问题</strong></p>\n<ul>\n<li><p>给定输入x，权重w，和偏移b，感知机输出：</p>\n<p>$\\omicron=\\sigma(<w,x>+b)$     $\\sigma(x)=\\begin{cases} 1，if \\quad x&gt;0 \\ -1， otherwise  \\end{cases}$</p>\n</li>\n<li><p>二分类：-1或1</p>\n<ul>\n<li>Vs.回归输出实数</li>\n<li>Vs.Softmax回归输出概率</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030539479.png\" alt=\"image-20230509030539479\"></p>\n<p><strong>收敛定理</strong></p>\n<ul>\n<li>数据在半径<strong>r</strong>内</li>\n<li>余量$\\rho$分类两类<ul>\n<li>y($x^T$w+b) $\\geqslant$ $\\rho$</li>\n</ul>\n</li>\n</ul>\n<p>​    对于$||W||^2+b^2\\leqslant1$</p>\n<ul>\n<li>感知机保证在$\\frac {r^2+1}{\\rho^2}$步后收敛</li>\n</ul>\n<p><strong>XOR问题</strong></p>\n<p>感知机不能拟合XOR函数，它只能产生线性分割面</p>\n<h3 id=\"多层感知机\"><a href=\"#多层感知机\" class=\"headerlink\" title=\"多层感知机\"></a>多层感知机</h3><p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030532939.png\" alt=\"image-20230509030532939\"></p>\n<ul>\n<li><p>X，Y先进入蓝色进行判断：（1，3）为+，（2，4）为－</p>\n</li>\n<li><p>X，Y再进入黄色进行判断：（1，2）为+，（3，4）为-</p>\n</li>\n<li><p>product对前面的结果做乘积，相同为+ ，相异为-</p>\n</li>\n</ul>\n<p><strong>总结</strong></p>\n<ul>\n<li>多层感知器使用隐藏层和激活函数来得到非线性模型</li>\n<li>常用激活函数是sigmoid，Tanh，ReLU</li>\n<li>使用softmax来处理多类分类</li>\n<li>超参数为隐藏层数，和各个隐藏层大小</li>\n</ul>\n<blockquote>\n<p>代码</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"><span class=\"keyword\">from</span> d2l <span class=\"keyword\">import</span> torch <span class=\"keyword\">as</span> d2l</span><br><span class=\"line\"><span class=\"keyword\">import</span> pylab</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\">os.environ[<span class=\"string\">&#x27;KMP_DUPLICATE_LIB_OK&#x27;</span>] = <span class=\"string\">&#x27;True&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 批量大小</span></span><br><span class=\"line\">batch_size = <span class=\"number\">64</span></span><br><span class=\"line\">train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)</span><br><span class=\"line\"><span class=\"comment\"># 超参数</span></span><br><span class=\"line\">num_inputs, num_outputs, num_hiddens = <span class=\"number\">784</span>, <span class=\"number\">10</span>, <span class=\"number\">256</span></span><br><span class=\"line\">W1 = nn.Parameter(torch.randn(num_inputs, num_hiddens, requires_grad=<span class=\"literal\">True</span>) * <span class=\"number\">0.01</span>)</span><br><span class=\"line\">b1 = nn.Parameter(torch.zeros(num_hiddens, requires_grad=<span class=\"literal\">True</span>))</span><br><span class=\"line\">W2 = nn.Parameter(torch.randn(num_hiddens, num_outputs, requires_grad=<span class=\"literal\">True</span>) * <span class=\"number\">0.01</span>)</span><br><span class=\"line\">b2 = nn.Parameter(torch.zeros(num_outputs, requires_grad=<span class=\"literal\">True</span>))</span><br><span class=\"line\">params = [W1, b1, W2, b2]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">relu</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    a = torch.zeros_like(X)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> torch.<span class=\"built_in\">max</span>(X, a)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">net</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    X = X.reshape((-<span class=\"number\">1</span>, num_inputs))</span><br><span class=\"line\">    H = relu(X @ W1 + b1)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (H @ W2 + b2)</span><br><span class=\"line\"></span><br><span class=\"line\">loss = nn.CrossEntropyLoss()</span><br><span class=\"line\">num_epochs, lr = <span class=\"number\">10</span>, <span class=\"number\">0.1</span></span><br><span class=\"line\">updater = torch.optim.SGD(params, lr=lr)</span><br><span class=\"line\">d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, updater)</span><br><span class=\"line\">d2l.predict_ch3(net, test_iter)</span><br><span class=\"line\">pylab.show()</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>结果</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030519094.png\" alt=\"image-20230509030519094\"></p>\n<h2 id=\"模型选择\"><a href=\"#模型选择\" class=\"headerlink\" title=\"模型选择\"></a>模型选择</h2><ul>\n<li><p>训练误差：模型在训练数据上的误差</p>\n</li>\n<li><p>泛化误差：模型在新数据上的误差</p>\n</li>\n<li><p>验证数据集：评估模型好坏的数据集（不要和测试数据集混在一起）</p>\n</li>\n<li>测试数据集：只使用一次（例如竞赛排行榜的数据集，只使用一次）</li>\n</ul>\n<h3 id=\"K-折交叉验证\"><a href=\"#K-折交叉验证\" class=\"headerlink\" title=\"K-折交叉验证\"></a><strong>K-折交叉验证</strong></h3><p>将含有<strong>N</strong> 个样本的数据集，分成<strong>K</strong> 份，每份含有 <strong>$\\frac{N}{K}$</strong>个样本。选择其中一份作为验证集，另外<strong>K − 1</strong>份作为训练集，验证集集就有<strong>K</strong>种情况。</p>\n<ul>\n<li>在没有足够多数据时使用</li>\n<li>使用<strong>i</strong>块作为验证数据集，其余作为训练集</li>\n</ul>\n<blockquote>\n<p>最后K个验证集误差求平均</p>\n</blockquote>\n<ul>\n<li>常用：K = 5 或 10（程序跑5次或10次）</li>\n</ul>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><ul>\n<li>训练数据集：训练模型参数</li>\n<li>验证数据集：选择模型超参数</li>\n<li>非大数据集上通常使用K-折交叉验证</li>\n</ul>\n<h3 id=\"过拟合和欠拟合\"><a href=\"#过拟合和欠拟合\" class=\"headerlink\" title=\"过拟合和欠拟合\"></a>过拟合和欠拟合</h3><p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030508724.png\" alt=\"image-20230509030508724\"></p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">$\\frac{数据}{模型容量}$</th>\n<th style=\"text-align:center\">简单</th>\n<th style=\"text-align:center\">复杂</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">低</td>\n<td style=\"text-align:center\">正常</td>\n<td style=\"text-align:center\"><strong>欠拟合</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">高</td>\n<td style=\"text-align:center\"><strong>过拟合</strong></td>\n<td style=\"text-align:center\">正常</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>模型容量的影响</strong></p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030457301.png\" alt=\"image-20230509030457301\"></p>\n<p><strong>数据复杂度</strong></p>\n<ul>\n<li>样本个数</li>\n<li>每个样本的元素个数</li>\n<li>时间、空间结构</li>\n<li>多样性</li>\n</ul>\n<p><strong>总结</strong></p>\n<ul>\n<li>模型容量需要匹配数据复杂度，否则可能导致欠拟合和过拟合</li>\n<li>统计机器学习提供数学工具来衡量模型复杂度</li>\n<li>实际中一般靠观察训练误差和验证误差</li>\n</ul>\n<blockquote>\n<p>结果</p>\n</blockquote>\n<p>正常</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030346933.png\" alt=\"image-20230509030346933\"></p>\n<p>欠拟合</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030430564.png\" alt=\"image-20230509030430564\"></p>\n<p>过拟合</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030441465.png\" alt=\"image-20230509030441465\"></p>\n<h2 id=\"卷积神经网络\"><a href=\"#卷积神经网络\" class=\"headerlink\" title=\"卷积神经网络\"></a>卷积神经网络</h2><h3 id=\"语言识别\"><a href=\"#语言识别\" class=\"headerlink\" title=\"语言识别\"></a>语言识别</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install SpeechRecognition</span><br></pre></td></tr></table></figure>","categories":["深度学习"],"tags":["Torch"]},{"title":"博客网站配置(置顶)","url":"https://wang-weijun.github.io/2023/05/08/博客网站配置/","content":"<h2 id=\"博客网站配置\"><a href=\"#博客网站配置\" class=\"headerlink\" title=\"博客网站配置\"></a>博客网站配置</h2><blockquote>\n<p>git</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 清除缓存，生成静态文件，部署到github </span></span><br><span class=\"line\">hexo cl &amp;&amp; hexo g &amp;&amp; hexo d <span class=\"comment\"># git bash</span></span><br><span class=\"line\">hexo cl; hexo g; hexo d <span class=\"comment\"># vscode</span></span><br></pre></td></tr></table></figure>\n<p>Markdown语法与外挂标签写法汇总<br><a href=\"https://www.fomal.cc/posts/5389e93f.html\">https://www.fomal.cc/posts/5389e93f.html</a></p>\n<div class=\"note simple\"><p>默认 提示块标签</p>\n</div>\n<div class=\"note default simple\"><p>default 提示块标签</p>\n</div>\n<div class=\"note primary simple\"><p>primary 提示块标签</p>\n</div>\n<div class=\"note success simple\"><p>success 提示块标签</p>\n</div>\n<div class=\"note info simple\"><p>info 提示块标签</p>\n</div>\n<div class=\"note warning simple\"><p>warning 提示块标签</p>\n</div>\n<div class=\"note danger simple\"><p>danger 提示块标签</p>\n</div>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">需要复制的</td>\n<td style=\"text-align:center\">需要删除的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">_config.yml：站点配置文件</td>\n<td style=\"text-align:center\">.git：无论是在站点根目录下，还是主题目录下的.git文件，都可以删掉</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">_config.butterfly.yml：主题配置文件，为了方便主题升级剥离出来的配置文件</td>\n<td style=\"text-align:center\">node_modules：<code>npm install</code>会根据package.json生成</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">package.json：说明使用哪些依赖包</td>\n<td style=\"text-align:center\">public：<code>hexo g</code>会重新编译生成</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">scaffolds：文章的模板</td>\n<td style=\"text-align:center\">.deploy_git：在使用<code>hexo d</code>时也会重新生成</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">source：自己写的博客源码</td>\n<td style=\"text-align:center\">db.json文件：<code>hexo s</code>快速启动所需的数据库</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">themes：主题文件夹（魔改都在里面啦）</td>\n<td style=\"text-align:center\">package-lock.json：记录依赖之间的内部依赖关系，可以根据<code>package.json</code>重新生成</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">.gitignore：说明在提交时哪些文件可以忽略</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>嵌入B站视频</strong></p>\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>","categories":["Hexo"],"tags":["bolg"]},{"title":"分类","url":"https://wang-weijun.github.io/categories/index.html","content":"","categories":[],"tags":[]},{"title":"留言板","url":"https://wang-weijun.github.io/comments/index.html","content":"","categories":[],"tags":[]},{"title":"关于","url":"https://wang-weijun.github.io/about/index.html","content":"<!-- GitCalendar容器 -->\n<div id=\"gitZone\"></div>","categories":[],"tags":[]},{"title":"","url":"https://wang-weijun.github.io/css/runtime.css","content":"/*电子钟字体*/\n@font-face {\n  font-family: 'UnidreamLED';\n  src: url(\"https://cdn.jsdelivr.net/npm/akilar-candyassets/fonts/UnidreamLED.ttf\");\n  font-display: swap;\n}\n\ndiv#runtime {\n  width: 180px;\n  margin: auto;\n  color: #fff;\n  padding-inline: 5px;\n  border-radius: 10px;\n  background-color: rgba(0, 0, 0, 0.7);\n  font-family: 'UnidreamLED';\n}\n\n[data-theme=\"dark\"] div#runtime {\n  color: #28b4c8;\n  box-shadow: 0 0 5px rgba(28, 69, 218, 0.71);\n  animation: flashlight 1s linear infinite alternate;\n}\n\n/*悬停显示徽标提示语*/\na.github-badge:hover:before {\n  position: fixed;\n  width: fit-content;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 10%;\n  border-radius: 10px;\n  text-align: center;\n  z-index: 100;\n  content: attr(data-title);\n  font-size: 20px;\n  color: #fff;\n  padding: 10px;\n  background-color: var(--text-bg-hover);\n}\n\n[data-theme=dark] a.github-badge:hover:before {\n  background-color: rgba(18, 18, 18, 0.8);\n}\n\n@-moz-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-webkit-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-o-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}","categories":[],"tags":[]},{"title":"","url":"https://wang-weijun.github.io/css/custom.css","content":"/* 页脚与头图透明 */\n#footer {\n  background: transparent !important;\n}\n\n#page-header {\n  background: transparent !important;\n}\n\n/* 白天模式遮罩透明 */\n#footer::before {\n  background: transparent !important;\n}\n\n#page-header::before {\n  background: transparent !important;\n}\n\n/* 夜间模式遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 翻页按钮居中 */\n#pagination {\n  width: 100%;\n  margin: auto;\n}\n\n/* 一级菜单居中 */\n#nav .menus_items {\n  position: absolute !important;\n  width: fit-content !important;\n  left: 50% !important;\n  transform: translateX(-50%) !important;\n}\n\n/* 子菜单横向展示 */\n#nav .menus_items .menus_item:hover .menus_item_child {\n  display: flex !important;\n}\n\n/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */\n.menus_items .menus_item:nth-child(2) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(3) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(4) .menus_item_child {\n  left: 0px;\n}\n\n/* 日间模式不生效 */\n[data-theme=\"light\"] #site-name,\n[data-theme=\"light\"] #site-title,\n[data-theme=\"light\"] #site-subtitle,\n[data-theme=\"light\"] #post-info {\n  animation: none;\n}\n\n/* 夜间模式生效 */\n[data-theme=\"dark\"] #site-name,\n[data-theme=\"dark\"] #site-title {\n  animation: light_15px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #site-subtitle {\n  animation: light_10px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #post-info {\n  animation: light_5px 10s linear infinite;\n}\n\n/* 关键帧描述 */\n@keyframes light_15px {\n  0% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 15px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 15px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 15px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 15px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 15px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 15px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n}\n\n@keyframes light_10px {\n  0% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 10px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 10px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 10px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 10px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 10px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 10px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n}\n\n@keyframes light_5px {\n  0% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 5px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 5px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 5px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 5px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 5px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 5px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 5px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n}\n\n/* 背景宇宙星光  */\n#universe {\n  display: block;\n  position: fixed;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */\n  z-index: -1;\n}\n\n/* 侧边栏个人信息卡片动态渐变色 */\n#aside-content>.card-widget.card-info {\n  background: linear-gradient(-45deg,\n      #e8d8b9,\n      #eccec5,\n      #a3e9eb,\n      #bdbdf0,\n      #eec1ea);\n  box-shadow: 0 0 5px rgb(66, 68, 68);\n  position: relative;\n  background-size: 400% 400%;\n  -webkit-animation: Gradient 10s ease infinite;\n  -moz-animation: Gradient 10s ease infinite;\n  animation: Gradient 10s ease infinite !important;\n}\n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n/* 黑夜模式适配 */\n[data-theme=\"dark\"] #aside-content>.card-widget.card-info {\n  background: #191919ee;\n}\n\n/* 个人信息Follow me按钮 */\n#aside-content>.card-widget.card-info>#card-info-btn {\n  background-color: #3eb8be;\n  border-radius: 8px;\n}\n\n:root {\n  --trans-light: rgba(255, 255, 255, 0.75);\n  --trans-dark: rgba(25, 25, 25, 0.88);\n  --border-style: 1px solid rgb(169, 169, 169);\n  --backdrop-filter: none;\n}\n\n/* 首页文章卡片 */\n#recent-posts>.recent-post-item {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 25px;\n  border: var(--border-style);\n}\n\n/* 首页侧栏卡片 */\n#aside-content .card-widget {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 18px;\n  border: var(--border-style);\n}\n\n/* 文章页、归档页、普通页面 */\ndiv#post,\ndiv#page,\ndiv#archive {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border: var(--border-style);\n  border-radius: 20px;\n}\n\n/* 导航栏 */\n#page-header.nav-fixed #nav {\n  background: rgba(255, 255, 255, 0.75);\n  backdrop-filter: var(--backdrop-filter);\n}\n\n[data-theme=\"dark\"] #page-header.nav-fixed #nav {\n  background: rgba(0, 0, 0, 0.7) !important;\n}\n\n/* 夜间模式遮罩 */\n[data-theme=\"dark\"] #recent-posts>.recent-post-item,\n[data-theme=\"dark\"] #aside-content .card-widget,\n[data-theme=\"dark\"] div#post,\n[data-theme=\"dark\"] div#archive,\n[data-theme=\"dark\"] div#page {\n  background: var(--trans-dark);\n}\n\n\n/* 夜间模式页脚页头遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 阅读模式 */\n.read-mode #aside-content .card-widget {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n.read-mode div#post {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n/* 夜间模式下的阅读模式 */\n[data-theme=\"dark\"] .read-mode #aside-content .card-widget {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .read-mode div#post {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n/*哔哩哔哩视频适配*/\n.aspect-ratio {\n  position: relative;\n  width: 90%;\n  height: auto;\n  padding-bottom: 75%;\n  margin: 3% auto;\n  text-align: center;\n}\n\n.aspect-ratio iframe {\n  position: absolute;\n  width: 100%;\n  height: 86%;\n  left: 0;\n  top: 0;\n}","categories":[],"tags":[]},{"title":"个人小屋","url":"https://wang-weijun.github.io/diary/index.html","content":"<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"抱歉, 这个密码看着不太对, 请再试试.\" data-whm=\"抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"c5e29319e13b5e4dde35d4ccc6af03e35ff5fc731c62ddc88748ac02d167689a\">487464473ce350cd38c3589a7421005bd8e75c71d80740f678b9a4c6d2b57d984a0acc56b19024359b9cd6005374cbd15546dc4a6ac37c2ba785410bb095a4c9f3f7d667afddaa4a1f3ab39c86eab8550492a8724bd6bdd6ef6721837fee7bb35ad419d8dfe67ccf60402ecc23da65e6958e5b518c28f0d32477ad50621797cf9a0cffc5298df1d93bc147796ad61880</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-xray\">\n      <input class=\"hbe hbe-input-field hbe-input-field-xray\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-xray\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-xray\">您好, 这里需要密码.</span>\n      </label>\n      <svg class=\"hbe hbe-graphic hbe-graphic-xray\" width=\"300%\" height=\"100%\" viewBox=\"0 0 1200 60\" preserveAspectRatio=\"none\">\n        <path d=\"M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0\"></path>\n        <path d=\"M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0\"></path>\n      </svg>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">","categories":[],"tags":[]},{"title":"","url":"https://wang-weijun.github.io/js/runtime.js","content":"var now = new Date; function createtime() { now.setTime(now.getTime() + 1e3); var e = new Date(\"05/08/2023 00:00:00\"), t = Math.trunc(234e8 + (now - e) / 1e3 * 17), a = (t / 1496e5).toFixed(6), o = new Date(\"05/08/2023 00:00:00\"), n = (now - o) / 1e3 / 60 / 60 / 24, r = Math.floor(n), i = (now - o) / 1e3 / 60 / 60 - 24 * r, s = Math.floor(i); 1 == String(s).length && (s = \"0\" + s); var d = (now - o) / 1e3 / 60 - 1440 * r - 60 * s, l = Math.floor(d); 1 == String(l).length && (l = \"0\" + l); var g = (now - o) / 1e3 - 86400 * r - 3600 * s - 60 * l, b = Math.round(g); 1 == String(b).length && (b = \"0\" + b); let c = \"\"; c = s < 18 && s >= 9 ? `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>` : `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>`, document.getElementById(\"workboard\") && (document.getElementById(\"workboard\").innerHTML = c) } setInterval((() => { createtime() }), 1e3);","categories":[],"tags":[]},{"title":"友链","url":"https://wang-weijun.github.io/link/index.html","content":"","categories":[],"tags":[]},{"title":"电影","url":"https://wang-weijun.github.io/movies/index.html","content":"<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>","categories":[],"tags":[]},{"title":"音乐","url":"https://wang-weijun.github.io/music/index.html","content":"<h1 id=\"♪-∇-欢迎来到aplayer音乐平台，请尽情欣赏\"><a href=\"#♪-∇-欢迎来到aplayer音乐平台，请尽情欣赏\" class=\"headerlink\" title=\"♪(^∇^*) 欢迎来到aplayer音乐平台，请尽情欣赏~~\"></a>♪(^∇^*) 欢迎来到aplayer音乐平台，请尽情欣赏~~</h1><hr>\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>\n\n","categories":[],"tags":[]},{"title":"","url":"https://wang-weijun.github.io/js/universe.js","content":"function dark() { window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame; var n, e, i, h, t = .05, s = document.getElementById(\"universe\"), o = !0, a = \"180,184,240\", r = \"226,225,142\", d = \"226,225,224\", c = []; function f() { n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute(\"width\", n), s.setAttribute(\"height\", e) } function u() { h.clearRect(0, 0, n, e); for (var t = c.length, i = 0; i < t; i++) { var s = c[i]; s.move(), s.fadeIn(), s.fadeOut(), s.draw() } } function y() { this.reset = function () { this.giant = m(3), this.comet = !this.giant && !o && m(10), this.x = l(0, n - 10), this.y = l(0, e), this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t, this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120), this.fadingOut = null, this.fadingIn = !0, this.opacity = 0, this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)), this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1) }, this.fadeIn = function () { this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh), this.opacity += this.do) }, this.fadeOut = function () { this.fadingOut && (this.fadingOut = !(this.opacity < 0), this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset())) }, this.draw = function () { if (h.beginPath(), this.giant) h.fillStyle = \"rgba(\" + a + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1); else if (this.comet) { h.fillStyle = \"rgba(\" + d + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1); for (var t = 0; t < 30; t++)h.fillStyle = \"rgba(\" + d + \",\" + (this.opacity - this.opacity / 20 * t) + \")\", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill() } else h.fillStyle = \"rgba(\" + r + \",\" + this.opacity + \")\", h.rect(this.x, this.y, this.r, this.r); h.closePath(), h.fill() }, this.move = function () { this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0) }, setTimeout(function () { o = !1 }, 50) } function m(t) { return Math.floor(1e3 * Math.random()) + 1 < 10 * t } function l(t, i) { return Math.random() * (i - t) + t } f(), window.addEventListener(\"resize\", f, !1), function () { h = s.getContext(\"2d\"); for (var t = 0; t < i; t++)c[t] = new y, c[t].reset(); u() }(), function t() { document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t) }() };\ndark()","categories":[],"tags":[]},{"title":"标签","url":"https://wang-weijun.github.io/tags/index.html","content":"","categories":[],"tags":[]}]