{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/sun_moon.js","path":"js/sun_moon.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1},{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"source/font/ali.woff2","path":"font/ali.woff2","modified":1,"renderable":0},{"_id":"source/img/archive.jpg","path":"img/archive.jpg","modified":1,"renderable":0},{"_id":"source/img/bg.jpg","path":"img/bg.jpg","modified":1,"renderable":0},{"_id":"source/img/category.jpg","path":"img/category.jpg","modified":1,"renderable":0},{"_id":"source/img/favicon.ico","path":"img/favicon.ico","modified":1,"renderable":0},{"_id":"source/img/tag.jpg","path":"img/tag.jpg","modified":1,"renderable":0},{"_id":"source/img/head.jpg","path":"img/head.jpg","modified":1,"renderable":0},{"_id":"source/img/wechat.jpg","path":"img/wechat.jpg","modified":1,"renderable":0}],"Cache":[{"_id":"source/CNAME","hash":"8f5087797fa35cc4ac3f71d7edbc79fb3ca9ce84","modified":1683785797221},{"_id":"source/_data/link.yml","hash":"6a2a34d5efb88ca0f91c871d2fa802d48510a2ae","modified":1683780026248},{"_id":"source/_posts/Docker.md","hash":"e2f30b38363e08d5a7768c6a42b81fe5d63a71ff","modified":1683824812018},{"_id":"source/_posts/Redis.md","hash":"ce76f06c3ad44247a6e082856dec7d602f3a7c63","modified":1683824926255},{"_id":"source/_posts/Git.md","hash":"05e223bbd2f13fd96ca66cd7765ea8a810757e5e","modified":1683824850588},{"_id":"source/_posts/Python打包exe.md","hash":"5fb877df283fe57ef8a991ddf6f0106b42fc39f4","modified":1683825094586},{"_id":"source/_posts/python常用工具.md","hash":"f9c8136db2e8dc004dba3ba9f72736329bcbea35","modified":1683825101121},{"_id":"source/_posts/博客网站.md","hash":"bb8166a52bee3e34066c80ff2638fe25ad6de5d1","modified":1683824745007},{"_id":"source/_posts/对象存储搭建.md","hash":"176cde0824a156de4fc6f006e3d2b36db30c7bd4","modified":1683825118626},{"_id":"source/_posts/深度学习.md","hash":"39d5e08270dd4c08b62c3d9f0e6dbc7c5b490342","modified":1683601354782},{"_id":"source/about/index.md","hash":"38e99eb476cbc9df01a89f543f4124fc9a20da2f","modified":1683549733242},{"_id":"source/categories/index.md","hash":"5d2dac98c3638ad0f1eb52d974d7d82de8478c30","modified":1683544458868},{"_id":"source/comments/index.md","hash":"fbdaf943fc4b3921f9f264d6fb3bdf664f64977c","modified":1683536450618},{"_id":"source/css/custom.css","hash":"cc72d5b0b79e54bf229b68a3f597c3ea757562f2","modified":1683807385079},{"_id":"source/css/runtime.css","hash":"a0ea99d232e9d51b2b31027be959ca8440609fa5","modified":1683543166376},{"_id":"source/diary/index.md","hash":"2d043e22bcb7c5945e23cbcadd5181834ce5bc90","modified":1683658589000},{"_id":"source/gallery/index.md","hash":"e4ee8d722146fb24b728f09d3276cc004de83d0a","modified":1683777910316},{"_id":"source/img/head.jpg","hash":"b02686a735360f07e7a1c704874b470017d75146","modified":1683820770899},{"_id":"source/js/universe.js","hash":"f8ac76d235d587b97429d97a6e9afdb77828283c","modified":1683553023561},{"_id":"source/js/runtime.js","hash":"54b0356633f56898277b573af14b82b890dcdfa6","modified":1683656246573},{"_id":"source/link/index.md","hash":"c19494388eba3806fb699a34cb97bc7bfa0585da","modified":1683709686902},{"_id":"source/music/index.md","hash":"4f1f579736ea6202c7d7b1139e768059a01d7e8d","modified":1683781195583},{"_id":"source/movies/index.md","hash":"14456868d22f64835744e12614066c83f7d55c2e","modified":1683803609146},{"_id":"source/tags/index.md","hash":"891aa258191382cf18a678d17bdc008eab7ad89d","modified":1683528035519},{"_id":"source/gallery/ACG/index.md","hash":"7bfb5444dc1b9dbe345a261a1cc5c5b6e3375965","modified":1683779782102},{"_id":"source/img/wechat.jpg","hash":"ecb03ae8d2f0d295853f997454d413484e01095e","modified":1683806428594},{"_id":"source/img/favicon.ico","hash":"0a87b1b7cc91b36a351f584d3ef9d400aa4f34b8","modified":1683568689217},{"_id":"source/img/tag.jpg","hash":"21f022e8995ad37caeff8cafe669320b5b0d6b70","modified":1683649781000},{"_id":"source/img/archive.jpg","hash":"570b7b2bac70dbed74621813affd19777fc990ed","modified":1683649779000},{"_id":"source/img/bg.jpg","hash":"372544086f498d2d4142e7ffaca8a5e2cec7e4a9","modified":1683559792597},{"_id":"source/img/category.jpg","hash":"a0b97bf4e00bc5995cb6c2016a2f4d4890c692aa","modified":1683649780000},{"_id":"node_modules/hexo-theme-butterfly/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":1683711934004},{"_id":"node_modules/hexo-theme-butterfly/README.md","hash":"52967a864c244af4db8c63902586cb617ee5b8aa","modified":1683711934108},{"_id":"node_modules/hexo-theme-butterfly/README_CN.md","hash":"e19021371184361261ddef1d98eb308d78922714","modified":1683711934107},{"_id":"node_modules/hexo-theme-butterfly/_config.yml","hash":"adc8f25ce9d499c18731b55735e5bc37262383ca","modified":1683711934255},{"_id":"node_modules/hexo-theme-butterfly/languages/default.yml","hash":"4025c0ba440eb24705dd0293ca9ca84efb3105cc","modified":1683711934259},{"_id":"node_modules/hexo-theme-butterfly/package.json","hash":"c55fce25d8c52283f1f1ce207819f1b3148d373a","modified":1683711934106},{"_id":"node_modules/hexo-theme-butterfly/plugins.yml","hash":"acc74f24c7e94fe9ded264307a4201c9b410cd9b","modified":1683711934262},{"_id":"node_modules/hexo-theme-butterfly/languages/en.yml","hash":"4e9cdb7a3570929bcf082de7a4eac49140dddc73","modified":1683711934260},{"_id":"node_modules/hexo-theme-butterfly/languages/zh-TW.yml","hash":"ee01e068f12dc33adfae5733824ea1255deb5ca6","modified":1683711934267},{"_id":"node_modules/hexo-theme-butterfly/languages/zh-CN.yml","hash":"7dd849c3ba34986c57c764d9e36150b4bfffd2e9","modified":1683711934266},{"_id":"node_modules/hexo-theme-butterfly/layout/archive.pug","hash":"a0c034c2d319320a54046805e80b58dc48b7e233","modified":1683711934117},{"_id":"node_modules/hexo-theme-butterfly/layout/category.pug","hash":"710708cfdb436bc875602abf096c919ccdf544db","modified":1683711934135},{"_id":"node_modules/hexo-theme-butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/page.pug","hash":"baf469784aef227e4cc840550888554588e87a13","modified":1683711934178},{"_id":"node_modules/hexo-theme-butterfly/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":1683711934196},{"_id":"node_modules/hexo-theme-butterfly/layout/post.pug","hash":"fc9f45252d78fcd15e4a82bfd144401cba5b169a","modified":1683711934185},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"fc468a93a64c7a3e408fbac921c9f5a5a8f32027","modified":1683711934257},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/config.yml","hash":"7dfe7189ffeaebb6db13842237f8e124649bea3d","modified":1683711934258},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"996640605ed1e8e35182f0fd9a60a88783b24b03","modified":1683711934261},{"_id":"node_modules/hexo-theme-butterfly/.github/workflows/publish.yml","hash":"05857c2f265246d8de00e31037f2720709540c09","modified":1683711934264},{"_id":"node_modules/hexo-theme-butterfly/.github/workflows/stale.yml","hash":"ac62b989b5550c756e1986fcc68f243170705383","modified":1683711934265},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/404.pug","hash":"cb49f737aca272ccfeb62880bd651eccee72a129","modified":1683711934109},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/additional-js.pug","hash":"aca0ec7ef69b21d1f242c62fed389468a0f0e1a2","modified":1683711934112},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head.pug","hash":"13d81b760f4a54336b640c4bfc7f91e7c9d1c040","modified":1683714095536},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/layout.pug","hash":"7fa9ae4b70b87fc97e992dde5944681f92b59bea","modified":1683711934169},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/pagination.pug","hash":"4c85de4dea4dca4e5088097a79bd6d7009cbf8ef","modified":1683711934179},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/rightside.pug","hash":"b240d1ffae414679cd6cbd12ad769875fb4e3ec7","modified":1683714247199},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/sidebar.pug","hash":"8d39473ed112d113674a0f689f63fae06c72abd2","modified":1683711934192},{"_id":"node_modules/hexo-theme-butterfly/scripts/filters/post_lazyload.js","hash":"932df912976261929f809b7dbd4eb473e7787345","modified":1683711934097},{"_id":"node_modules/hexo-theme-butterfly/scripts/filters/random_cover.js","hash":"8d25f47434deae870bbffd07efe528a40363ab4d","modified":1683711934097},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":1683711934068},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/cdn.js","hash":"21fb5aabe043486d095c4c8cce361ed85ba88a26","modified":1683711934081},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/comment.js","hash":"5351e0bc09e6b5b3f6d30f333a2520626a28ca3a","modified":1683711934082},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/init.js","hash":"3ace1139182d3d367149db138990891427f3356e","modified":1683711934086},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/stylus.js","hash":"9819f0996234fbd80d6c50a9e526c56ebf22588d","modified":1683711934100},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/welcome.js","hash":"8ad9911b755cba13dde2cc055c3f857a6b0dd20e","modified":1683711934105},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":1683711934075},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/aside_categories.js","hash":"e00efdb5d02bc5c6eb4159e498af69fa61a7dbb9","modified":1683711934078},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/findArchiveLength.js","hash":"9ea86bd7a3c3fca3324f70b1cd4d9e42f9efb08d","modified":1683711934083},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/page.js","hash":"ce5d5a3d07b0d76ac5e96e5f9e5783f4b601b6be","modified":1683711934095},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/inject_head_js.js","hash":"4238e06ff448ff2ee717cd4c874f37f04d35da06","modified":1683711934087},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/related_post.js","hash":"4677be4175da6800c0b3b8c1614e593f73df8831","modified":1683711934098},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/button.js","hash":"91d954f6e9fe6e571eb8ec9f8996294b2dc3688e","modified":1683711934079},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/flink.js","hash":"ab62919fa567b95fbe14889517abda649991b1ee","modified":1683711934084},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/gallery.js","hash":"950b3dbac0b21717458a8d1769cbfc454d0eff54","modified":1683711934085},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/hide.js","hash":"396c3ab1bcf1c7693ad7e506eadd13016c6769b6","modified":1683711934086},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/label.js","hash":"03b2afef41d02bd1045c89578a02402c28356006","modified":1683711934088},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/inlineImg.js","hash":"a43ee2c7871bdd93cb6beb804429e404570f7929","modified":1683711934088},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/mermaid.js","hash":"531808a290b8bdd66bac2faab211ada8e9646a37","modified":1683711934092},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/score.js","hash":"ea679dfe12d0e2290113b4a9d00663ce7a5ee5ad","modified":1683711934099},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/note.js","hash":"d51812b43924f1bbf413c67499510dd125022005","modified":1683711934093},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/tabs.js","hash":"6c6e415623d0fd39da016d9e353bb4f5cca444f5","modified":1683711934101},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/timeline.js","hash":"300eb779588bf35a1b687d9f829d866074b707e3","modified":1683711934102},{"_id":"node_modules/hexo-theme-butterfly/source/css/index.styl","hash":"861998e4ac67a59529a8245a9130d68f826c9c12","modified":1683711934236},{"_id":"node_modules/hexo-theme-butterfly/source/css/var.styl","hash":"30abbb8eed880d51f61f336064d93abd709e0115","modified":1683711934254},{"_id":"node_modules/hexo-theme-butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1683711934064},{"_id":"node_modules/hexo-theme-butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1683711934108},{"_id":"node_modules/hexo-theme-butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1683711934052},{"_id":"node_modules/hexo-theme-butterfly/source/js/main.js","hash":"dca55899b7c92ebee6191bef127ea5e2283ecc63","modified":1683711934092},{"_id":"node_modules/hexo-theme-butterfly/source/js/sun_moon.js","hash":"42cf2c1c8df87b147a76e380cda37dc5b2f37441","modified":1683714014534},{"_id":"node_modules/hexo-theme-butterfly/source/js/tw_cn.js","hash":"42b106354d72a0ea1fe62587b313a5b7de3cc393","modified":1683711934103},{"_id":"node_modules/hexo-theme-butterfly/source/js/utils.js","hash":"7bec147ae2b313fbd0331d87018f99715368fc4b","modified":1683711934104},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/custom/sun_moon.pug","hash":"8924013bd2e1ae1bdfb33c4730a69a49107ebc39","modified":1683713921202},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/Open_Graph.pug","hash":"8aa8d799aedbfd811195b84a451bc4b6e2647c12","modified":1683711934177},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/config.pug","hash":"75e7a524af64fbaaaf7b05a1b1922bf6940d7afe","modified":1683711934140},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/analytics.pug","hash":"67e1c3b48e4ca7ee0b2c76d3ca7476b9883cf105","modified":1683711934115},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/config_site.pug","hash":"7df90c8e432e33716517ab918b0a125bc284041b","modified":1683711934139},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/noscript.pug","hash":"d16ad2ee0ff5751fd7f8a5ce1b83935518674977","modified":1683711934176},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/preconnect.pug","hash":"a03b3ddc06e7aa9fd07eea0d5f97c8d5addd2315","modified":1683711934186},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":1683711934187},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/index.pug","hash":"0c1551ef80bbece550fe520d91e21f083cbc14fe","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1683711934193},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/menu_item.pug","hash":"31346a210f4f9912c5b29f51d8f659913492f388","modified":1683711934173},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/nav.pug","hash":"f61659aa457d1a2d1baa3a13157996cfac4d6609","modified":1683711934176},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/social.pug","hash":"5de9a82032cdad1db3b868b797460921cd775fc2","modified":1683711934193},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/post-info.pug","hash":"9698f22751778dde063cbfbd01c59ca4462ccd85","modified":1683711934183},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/fullpage-loading.pug","hash":"68cda524337dfe2e1467318a4a6c124b4c3845a7","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/index.pug","hash":"131f344d68b4c241d6e03849b243ee792fcd3cea","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/mixins/article-sort.pug","hash":"90554c2ca5ba946f4c02e1bc5fe2859cef1b1594","modified":1683711934123},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/mixins/post-ui.pug","hash":"294df7a74cf36af3a7030274d8b745979c1c8c70","modified":1683711934184},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1683711934134},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":1683711934142},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/pace.pug","hash":"6ab4e301c92586505d6cddce1b3ad23b7c79010d","modified":1683711934177},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/flink.pug","hash":"a59bcfbb609a099c1bf5be40b7a94e7e2b06fc4a","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/tags.pug","hash":"9621991359e22b14049346f1cf87bdedc94edf5a","modified":1683711934197},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/post/post-copyright.pug","hash":"ebecba46a5f4efe1c98a386df06c56e26fbd07b9","modified":1683711934181},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/post/reward.pug","hash":"864869c43fe5b5bb6f4ac6b13dd4bfb16ea47550","modified":1683711934190},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/aplayer.pug","hash":"c7cfade2b160380432c47eef4cd62273b6508c58","modified":1683711934116},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/effect.pug","hash":"6528e86656906117a1af6b90e0349c2c4651d5e1","modified":1683711934147},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/pangu.pug","hash":"0f024e36b8116118233e10118714bde304e01e12","modified":1683711934179},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/prismjs.pug","hash":"ffb9ea15a2b54423cd4cd441e2d061b8233e9b58","modified":1683711934186},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/pjax.pug","hash":"fc0b09068009edd4026d90a669608cbe211aeecf","modified":1683711934180},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/subtitle.pug","hash":"13015a98d0d5e1ef2cec294231529010395b19de","modified":1683711934194},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug","hash":"ae392459ad401a083ca51ee0b27526b3c1e1faed","modified":1683711934125},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1683711934124},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_author.pug","hash":"e37468e63db2a0ac09b65d21b7de3e62425bb455","modified":1683711934127},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":1683711934125},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1683711934127},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1683711934127},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_newest_comment.pug","hash":"6d93564a8bd13cb9b52ee5e178db3bcbf18b1bc6","modified":1683711934129},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_post_toc.pug","hash":"3057a2f6f051355e35d3b205121af8735100eacf","modified":1683711934129},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_recent_post.pug","hash":"e5aac7b28ed4123d75797263c64e74ac547945bc","modified":1683711934130},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_tags.pug","hash":"eceb4420a64c720f0d2741e89d6229bbb3d87353","modified":1683711934131},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1683711934132},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_webinfo.pug","hash":"35ce167c5a275211bfc1fa3d49adfde5b404d98f","modified":1683711934133},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/index.pug","hash":"010e3d548ababca2280c4fc4168d9a4a1ee4f536","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/source/css/_global/index.styl","hash":"de10b113f9cb9a68d257a39d6409905acfd559ef","modified":1683711934233},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight.styl","hash":"57a19eb0c418d92a88b143f56ccb8cd60e6d7ad0","modified":1683711934231},{"_id":"node_modules/hexo-theme-butterfly/source/css/_global/function.styl","hash":"7fdfbe8f97b41588bbd5c6f27e7e85a881b28954","modified":1683711934225},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/theme.styl","hash":"bcd384c8b2aa0390c9eb69ac1abbfd1240ce1da4","modified":1683711934249},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/aside.styl","hash":"57adf29a3e36e4ea84384e36c034eb294dffb208","modified":1683711934213},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/chat.styl","hash":"f9a5d3f1fc5ed0ed2ee4c1eaa58ed650d11ddebd","modified":1683711934215},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/comments.styl","hash":"c61dccca690d486c3d9c29cf028d87b777385141","modified":1683711934216},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/footer.styl","hash":"83553445fbc92cad4ad220fbd87b4c3db958c32a","modified":1683711934224},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/head.styl","hash":"45d71dbb2a61e30989851ba29bb8be7094574d14","modified":1683711934227},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/loading.styl","hash":"ac2aeee9926f75b2a0098efe1c114126987430f2","modified":1683711934238},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/pagination.styl","hash":"fb9f78bfbb79579f1d752cb73fb6d25c8418e0fd","modified":1683711934240},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/post.styl","hash":"e24046fad288a13897195038cb7a63d1014cd7b8","modified":1683711934241},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/relatedposts.styl","hash":"d53de408cb27a2e704aba7f7402b7caebe0410d8","modified":1683711934243},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/reward.styl","hash":"c5cfed620708807a48076b5ee59b0ba84e29aa80","modified":1683711934244},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/rightside.styl","hash":"bbc884d6b2158a833b77a1bbc07248e17874b22e","modified":1683711934245},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/sidebar.styl","hash":"631ca35a38bc4ac052e9caf47508ff1f99842fc7","modified":1683711934246},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/sun_moon.styl","hash":"6d7b2f48e04dca561eaec6d8f5b02140106d0377","modified":1683713959008},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/third-party.styl","hash":"ca39e634668ed4fbb43267ec4782c2b55c44e698","modified":1683711934251},{"_id":"node_modules/hexo-theme-butterfly/source/css/_mode/darkmode.styl","hash":"7ff0c456fae2717ddbbb9f8fae2734d449a5448b","modified":1683711934219},{"_id":"node_modules/hexo-theme-butterfly/source/css/_mode/readmode.styl","hash":"ffea9e7c1543edcf080381e7b99828954c2f2cef","modified":1683711934242},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":1683711934209},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/archives.styl","hash":"c9e98027f2dd730ce389c2047f62ebb748955fcf","modified":1683711934212},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":1683711934215},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/flink.styl","hash":"98d755b686ee833e9da10afaa40c4ec2bd66c19a","modified":1683711934222},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/common.styl","hash":"e4b9d6164e97b30c84e1218c7543c60f6b29edcc","modified":1683711934217},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":1683711934248},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/homepage.styl","hash":"bb470da1d2ba292cae0a30a252f82f37c4130d2d","modified":1683711934231},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/algolia.styl","hash":"649a054e73278b6724bd4dd9b94724791ec5c928","modified":1683711934210},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/index.styl","hash":"678e56ad2e46b630364540fc6a881d6801192dcd","modified":1683711934235},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/local-search.styl","hash":"a86e4e9198b225b4b73a7a45f04b86cbbed0d231","modified":1683711934239},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/button.styl","hash":"45f0c32bdea117540f6b14ebac6450d7142bd710","modified":1683711934214},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/gallery.styl","hash":"81ad85acf0e0fe7f9ee23c16a700e7154574d5dd","modified":1683711934226},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":1683711934228},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/hide.styl","hash":"ce489ca2e249e2a3cf71584e20d84bdb022e3475","modified":1683711934229},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1683711934236},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":1683711934237},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/note.styl","hash":"85ae91c83691ea4511f4277da1194a185251cc78","modified":1683711934240},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/tabs.styl","hash":"bf9568444dd54e39dc59b461323dcd38942f27d9","modified":1683711934247},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/timeline.styl","hash":"f071156d439556e7463ed4bc61ceee87170d5d08","modified":1683711934252},{"_id":"node_modules/hexo-theme-butterfly/source/css/_third-party/normalize.min.css","hash":"2c18a1c9604af475b4749def8f1959df88d8b276","modified":1683711934008},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/algolia.js","hash":"fd86281d4f0f99ce173e49c1a0df3507fe268d37","modified":1683711934073},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/local-search.js","hash":"8509cbd954ee9e099dcfbbfdafba70893a56e9ae","modified":1683711934089},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/abcjs/abcjs.pug","hash":"ed6906b7c6aa7046bbad95dfdda9211997be7099","modified":1683711934110},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/abcjs/index.pug","hash":"f58f1648d2d71311bafca4833f20b605bb5f18c8","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/artalk.pug","hash":"4ff8e67cd1c9058c0c894737b9b247a812079ae2","modified":1683711934120},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"0344477a2cf38698318ead2681c63ac12f01586e","modified":1683711934148},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/remark42.pug","hash":"001e8be47854b891efe04013c240c38fed4185eb","modified":1683711934188},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"56c028ba0ea8fac19f0125114d765dfc56ce2b48","modified":1683711934200},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"39427e107230a10790972349c9dd4c4f31d55eb7","modified":1683711934203},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"55acc455ca8e13211e3906cf78e487cc92accee5","modified":1683711934205},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/chatra.pug","hash":"481cd5053bafb1a19f623554a27d3aa077ea59c3","modified":1683711934136},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"cfe63e7d26a6665df6aa32ca90868ad48e05ec04","modified":1683711934142},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"b2d274db84ef22fbd6d5ea8f4404821898934209","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/crisp.pug","hash":"76634112c64023177260d1317ae39cef2a68e35f","modified":1683711934141},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/index.pug","hash":"618e1b7f9204049b07beb9e1363c844a78a9ace3","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"d85c3737b5c9548553a78b757a7698df126a52cf","modified":1683711934144},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/tidio.pug","hash":"24a926756c2300b9c561aaab6bd3a71fdd16e16d","modified":1683711934198},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/artalk.pug","hash":"90779382c8675e5a0b2d1ef2250294de926707f4","modified":1683711934121},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/messenger.pug","hash":"3ce0461534b786cb71d9141dff35fa5cb70e22b9","modified":1683711934175},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/disqus.pug","hash":"9ef303da16d180619da18b146ddb9bc35f66bdbf","modified":1683711934144},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"6e17b2cea503eabeb328835038812cfa95f15871","modified":1683711934145},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"0704efed9079c867ab5f7bee7381a6c869154c73","modified":1683711934148},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/giscus.pug","hash":"5127bc550a2edb1ab9f45416e1964c76e8201544","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"2fc5627eb63118c83df9422b47c801822e28df98","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/index.pug","hash":"351fe25fbf02635b1f9e86e5e244c7d61f69baa7","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/js.pug","hash":"00ed91c52939b9675b316137f854d13684c895a6","modified":1683711934165},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/livere.pug","hash":"52ea8aa26b84d3ad38ae28cdf0f163e9ca8dced7","modified":1683711934170},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/remark42.pug","hash":"598790433e3c9be28b0063bff08d257acd0abf75","modified":1683711934188},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"4d78f6266d0870c06c10eaf47c951bd4d9a7732e","modified":1683711934201},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/utterances.pug","hash":"2a8d02ed9303092e8816f6489a443e7388102470","modified":1683711934202},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/valine.pug","hash":"e55b9c0f8ced231f47eb88bd7f4ec99f29c5c29d","modified":1683711934204},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/waline.pug","hash":"26ba1fc99117993087b1c6e02daa2626627d8eb1","modified":1683711934206},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/katex.pug","hash":"dfcbd9881be569ea420eff1a6b00e4f4dbe2138e","modified":1683711934166},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/mathjax.pug","hash":"0ea633b11b357afa50c200290d19c32467d58a1d","modified":1683711934172},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/mermaid.pug","hash":"d92bbf51626fcc5608b53273cf40db0b5b69c0d4","modified":1683711934174},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/artalk.pug","hash":"3942d6643683a3c42bbb5f4cf4a7df21debb8498","modified":1683711934122},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"4fe8faf77b8420fc031ae1b54f78b2ece9fcc07e","modified":1683711934143},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"0330e3063ccf0ce40e4828b8d4fbef62362e8195","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"4ec0642f2d5444acfab570a6f8c7868e7ff43fde","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/remark42.pug","hash":"aa6061183a32472cd1882fce445a5049108a984b","modified":1683711934189},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"44991d67abb81784c5cdb4337b2b9798fc4361e1","modified":1683711934199},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"b7b2aa5be4112065d5066c0f066f5f58721153bf","modified":1683711934205},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"531d7b6992a737742f7b3ae343e1f03aab947f4c","modified":1683711934207},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/algolia.pug","hash":"9c3c109a12d2b6916e8b4965cca12f521510ead9","modified":1683711934114},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/docsearch.pug","hash":"1c3e101445c5571ba998ce293d3984319df1b3b0","modified":1683711934146},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/index.pug","hash":"a99a41334387ee9a46c6f8e8212331a29a10d159","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/local-search.pug","hash":"5ebd5e8d39c9f77f5b2d983f6cd6802ccaf98746","modified":1683711934171},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1683711934112},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/addtoany.pug","hash":"85c92f8a7e44d7cd1c86f089a05be438535e5362","modified":1683711934113},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/index.pug","hash":"4c4a9c15215ae8ac5eadb0e086b278f76db9ee92","modified":1683711934149},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/share-js.pug","hash":"c7dd2b2ae9b23aa0a60fffd7df9e9f76ef52033e","modified":1683711934191},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":1683711934220},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1683711934222},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight/index.styl","hash":"18804c58239d95798fa86d0597f32d7f7dd30051","modified":1683711934233},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/index.styl","hash":"5dc2e0bcae9a54bfb9bdcc82d02ae5a3cf1ca97d","modified":1683711934234},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"8970cc1916c982b64a1478792b2822d1d31e276d","modified":1683711934238},{"_id":"source/font/ali.woff2","hash":"fb5280d5843e29763b4adbbfcde3d38053955281","modified":1561191716038},{"_id":"public/css/runtime.css","hash":"399a0f76676f1891cd1f652f5484b5e18d7a083d","modified":1683825307631},{"_id":"public/css/custom.css","hash":"a9161e26cb9efaee4eec8163fe1bbf33145dc780","modified":1683825307631},{"_id":"public/js/universe.js","hash":"768994786dcb2453af3c0688f5c22090924feda2","modified":1683825307631},{"_id":"public/search.xml","hash":"256ec0efa4147419c38cd44d938857c11df3ccab","modified":1683825307631},{"_id":"public/js/runtime.js","hash":"54b0356633f56898277b573af14b82b890dcdfa6","modified":1683825307631},{"_id":"public/404.html","hash":"2e622c8c47bfc80006028bd4cffb6079eb93cfb7","modified":1683825307631},{"_id":"public/comments/index.html","hash":"cd9ef645773311e812cdcd82700fb06085e8719f","modified":1683825307631},{"_id":"public/categories/index.html","hash":"f475c0243ccc0a04f02735997e7c848dba501190","modified":1683825307631},{"_id":"public/about/index.html","hash":"6851aac50307904e7af43b08f80042b805d06f2c","modified":1683825307631},{"_id":"public/diary/index.html","hash":"34356245a8c0413ff6d7bebecdf16fe01fe5f9f1","modified":1683825307631},{"_id":"public/gallery/index.html","hash":"30adc8dceb8afe9c7dd613c1136923fceb6ad5de","modified":1683825307631},{"_id":"public/link/index.html","hash":"88e13ebbb5beb5607a54422b4c0b2c48b8ccbf82","modified":1683825307631},{"_id":"public/music/index.html","hash":"48078f63e8a344239b75c916d43a56d03eb8f248","modified":1683825307631},{"_id":"public/movies/index.html","hash":"4733cf2671f35574b37fc380e7e95c474fdb6902","modified":1683825307631},{"_id":"public/gallery/ACG/index.html","hash":"bf94f7e0c41780b94bc983c20cf7d44caa34e21d","modified":1683825307631},{"_id":"public/tags/index.html","hash":"b17cc8079c3f0497410f9abe773de09f55881291","modified":1683825307631},{"_id":"public/2023/05/12/Redis/index.html","hash":"9e1377ec2a042252c8c8e850e4615d969ea7c29c","modified":1683825307631},{"_id":"public/2023/05/12/Docker/index.html","hash":"88257bfe943a23bbdbe17fee759633a03d66ff92","modified":1683825307631},{"_id":"public/2023/05/12/Git/index.html","hash":"5d5e6cefdc5669beed40938bde3f38ca9cdbf9f0","modified":1683825307631},{"_id":"public/2023/05/12/python常用工具/index.html","hash":"91126a0fad31d1348db2917d04cda711f5f5af3e","modified":1683825307631},{"_id":"public/2023/05/12/博客网站/index.html","hash":"63bf58900a5191b9aef765d1a41431671db67d27","modified":1683825307631},{"_id":"public/2023/05/12/对象存储搭建/index.html","hash":"35e76024803be896430ab253d6e02d37b23461aa","modified":1683825307631},{"_id":"public/2023/05/08/深度学习/index.html","hash":"f3e5a2c62134ddb3f1d2bd30492e825fa6e7c0c2","modified":1683825307631},{"_id":"public/2023/05/09/Python打包exe/index.html","hash":"c3092157c99a73e68baad27e3ccfdcc57a3a500c","modified":1683825307631},{"_id":"public/archives/index.html","hash":"fc07e60ecdea78b02a38b60405a7d485c5185899","modified":1683825307631},{"_id":"public/archives/2023/index.html","hash":"e09a6b2edab3df7605e5813802c031d4c1906411","modified":1683825307631},{"_id":"public/archives/2023/05/index.html","hash":"e1b55a0339e6f3c7a1dfd2f88179522e314cd863","modified":1683825307631},{"_id":"public/categories/技术栈/index.html","hash":"4898f9e98e026380035fee44638a15dbd8821b35","modified":1683825307631},{"_id":"public/categories/开发/index.html","hash":"274ba8cdbca748a701127045df049abb9afb7969","modified":1683825307631},{"_id":"public/index.html","hash":"97c5845edc587a47515e3fc9855153931eb26e3e","modified":1683825307631},{"_id":"public/categories/网站/index.html","hash":"32215f2601dcb9692fc5df80f70d40b085a7b9f6","modified":1683825307631},{"_id":"public/categories/深度学习/index.html","hash":"fcdfe2af175c384c0d2ea285494a1a9056d363c4","modified":1683825307631},{"_id":"public/tags/Redis/index.html","hash":"1adffb284db0fb995246023c111e9e7bac9f971f","modified":1683825307631},{"_id":"public/page/2/index.html","hash":"3e2a0a07e3db37d3a431db395a4a6cea7d6c66f2","modified":1683825307631},{"_id":"public/tags/Git/index.html","hash":"a1ffd96a50d54cf79d1738a6c14a8cfd31e2c6a0","modified":1683825307631},{"_id":"public/tags/Docker/index.html","hash":"c8b08fff3869342282c09e914eb2a54b02e15e48","modified":1683825307631},{"_id":"public/tags/Python/index.html","hash":"89796230d2823232bbc587dca21486ad524b2782","modified":1683825307631},{"_id":"public/tags/Blog/index.html","hash":"edd7b13f4d3a90077616f2adbfed95c1d1e7c5b7","modified":1683825307631},{"_id":"public/tags/对象存储/index.html","hash":"a1a696f56476c0076e9b4f959f6eb66219852ab6","modified":1683825307631},{"_id":"public/tags/Torch/index.html","hash":"28072b34bdc7fa8b9eb1e49579da4053fefc4986","modified":1683825307631},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1683825307631},{"_id":"public/CNAME","hash":"8f5087797fa35cc4ac3f71d7edbc79fb3ca9ce84","modified":1683825307631},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1683825307631},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1683825307631},{"_id":"public/img/head.jpg","hash":"b02686a735360f07e7a1c704874b470017d75146","modified":1683825307631},{"_id":"public/img/wechat.jpg","hash":"ecb03ae8d2f0d295853f997454d413484e01095e","modified":1683825307631},{"_id":"public/css/hbe.style.css","hash":"b0a0077cb588c0941823905fcc383aa7509ade73","modified":1683825307631},{"_id":"public/lib/hbe.js","hash":"136dba00826bdd086153bf0acb5473aea7183ad1","modified":1683825307631},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1683825307631},{"_id":"public/js/sun_moon.js","hash":"7b0da7403d3bdc914b7d340925ee9e2c038e596b","modified":1683825307631},{"_id":"public/js/utils.js","hash":"7bec147ae2b313fbd0331d87018f99715368fc4b","modified":1683825307631},{"_id":"public/js/search/algolia.js","hash":"fd86281d4f0f99ce173e49c1a0df3507fe268d37","modified":1683825307631},{"_id":"public/js/search/local-search.js","hash":"8509cbd954ee9e099dcfbbfdafba70893a56e9ae","modified":1683825307631},{"_id":"public/css/index.css","hash":"8afc231a1fd8e62c461bc0a0f043a30f22c922b8","modified":1683825307631},{"_id":"public/js/main.js","hash":"dca55899b7c92ebee6191bef127ea5e2283ecc63","modified":1683825307631},{"_id":"public/js/tw_cn.js","hash":"42b106354d72a0ea1fe62587b313a5b7de3cc393","modified":1683825307631},{"_id":"public/img/tag.jpg","hash":"21f022e8995ad37caeff8cafe669320b5b0d6b70","modified":1683825307631},{"_id":"public/img/favicon.ico","hash":"0a87b1b7cc91b36a351f584d3ef9d400aa4f34b8","modified":1683825307631},{"_id":"public/img/bg.jpg","hash":"372544086f498d2d4142e7ffaca8a5e2cec7e4a9","modified":1683825307631},{"_id":"public/img/archive.jpg","hash":"570b7b2bac70dbed74621813affd19777fc990ed","modified":1683825307631},{"_id":"public/img/category.jpg","hash":"a0b97bf4e00bc5995cb6c2016a2f4d4890c692aa","modified":1683825307631},{"_id":"public/font/ali.woff2","hash":"fb5280d5843e29763b4adbbfcde3d38053955281","modified":1683825307631}],"Category":[{"name":"技术栈","_id":"clhje45ze0004qc9hbhkz2v8t"},{"name":"开发","_id":"clhje45zp000nqc9hbqllf6zz"},{"name":"网站","_id":"clhje45zv0015qc9hclipfwa7"},{"name":"深度学习","_id":"clhje45zw0019qc9h84v5g88f"}],"Data":[{"_id":"link","data":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}],"Page":[{"title":"关于","date":"2023-05-08T06:39:00.000Z","_content":"\n<!-- GitCalendar容器 -->\n<div id=\"gitZone\"></div>","source":"about/index.md","raw":"---\ntitle: 关于\ndate: 2023-05-8 14:39:00\n---\n\n<!-- GitCalendar容器 -->\n<div id=\"gitZone\"></div>","updated":"2023-05-08T12:42:13.242Z","path":"about/index.html","comments":1,"layout":"page","_id":"clhje45z80000qc9h495f5bvr","content":"<!-- GitCalendar容器 -->\n<div id=\"gitZone\"></div>","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/27/03/28/ocean-7953612_960_720.jpg","cover_type":"img","excerpt":"","more":"<!-- GitCalendar容器 -->\n<div id=\"gitZone\"></div>"},{"title":"分类","date":"2023-05-08T06:25:33.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2023-05-08 14:25:33\ntype: categories\n---\n","updated":"2023-05-08T11:14:18.868Z","path":"categories/index.html","comments":1,"layout":"page","_id":"clhje45zd0002qc9h3riu2tnr","content":"","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/05/03/19/57/passau-7968535_960_720.jpg","cover_type":"img","excerpt":"","more":""},{"title":"留言板","date":"2023-05-08T06:39:00.000Z","_content":"","source":"comments/index.md","raw":"---\ntitle: 留言板\ndate: 2023-05-8 14:39:00\n---","updated":"2023-05-08T09:00:50.618Z","path":"comments/index.html","comments":1,"layout":"page","_id":"clhje45zg0006qc9h0zfdgufz","content":"","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/03/30/11/58/norway-7887613_960_720.jpg","cover_type":"img","excerpt":"","more":""},{"_content":"/* 页脚与头图透明 */\n#footer {\n  background: transparent !important;\n}\n\n#page-header {\n  background: transparent !important;\n}\n\n/* 白天模式遮罩透明 */\n#footer::before {\n  background: transparent !important;\n}\n\n#page-header::before {\n  background: transparent !important;\n}\n\n/* 夜间模式遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 翻页按钮居中 */\n#pagination {\n  width: 100%;\n  margin: auto;\n}\n\n/* 一级菜单居中 */\n#nav .menus_items {\n  position: absolute !important;\n  width: fit-content !important;\n  left: 50% !important;\n  transform: translateX(-50%) !important;\n}\n\n/* 子菜单横向展示 */\n#nav .menus_items .menus_item:hover .menus_item_child {\n  display: flex !important;\n}\n\n/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */\n.menus_items .menus_item:nth-child(2) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(3) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(4) .menus_item_child {\n  left: -38px;\n}\n\n/* 白天模式不生效 */\n[data-theme=\"light\"] #site-name,\n[data-theme=\"light\"] #site-title,\n[data-theme=\"light\"] #site-subtitle,\n[data-theme=\"light\"] #post-info {\n  animation: none;\n}\n\n/* 夜间模式生效 */\n[data-theme=\"dark\"] #site-name,\n[data-theme=\"dark\"] #site-title {\n  animation: light_15px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #site-subtitle {\n  animation: light_10px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #post-info {\n  animation: light_5px 10s linear infinite;\n}\n\n/* 关键帧描述 */\n@keyframes light_15px {\n  0% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 15px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 15px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 15px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 15px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 15px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 15px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n}\n\n@keyframes light_10px {\n  0% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 10px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 10px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 10px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 10px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 10px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 10px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n}\n\n@keyframes light_5px {\n  0% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 5px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 5px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 5px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 5px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 5px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 5px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 5px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n}\n\n/* 背景宇宙星光  */\n#universe {\n  display: block;\n  position: fixed;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */\n  z-index: -1;\n}\n\n/* 侧边栏个人信息卡片动态渐变色 */\n#aside-content>.card-widget.card-info {\n  background: linear-gradient(-45deg,\n      #e8d8b9,\n      #eccec5,\n      #a3e9eb,\n      #bdbdf0,\n      #eec1ea);\n  box-shadow: 0 0 5px rgb(66, 68, 68);\n  position: relative;\n  background-size: 400% 400%;\n  -webkit-animation: Gradient 10s ease infinite;\n  -moz-animation: Gradient 10s ease infinite;\n  animation: Gradient 10s ease infinite !important;\n}\n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n/* 黑夜模式适配 */\n[data-theme=\"dark\"] #aside-content>.card-widget.card-info {\n  background: #191919ee;\n}\n\n/* 个人信息Follow me按钮 */\n#aside-content>.card-widget.card-info>#card-info-btn {\n  background-color: #3eb8be;\n  border-radius: 8px;\n}\n\n:root {\n  --trans-light: rgba(255, 255, 255, 0.88);\n  --trans-dark: rgba(25, 25, 25, 0.88);\n  --border-style: 1px solid rgb(169, 169, 169);\n  --backdrop-filter: none;\n}\n\n/* 首页文章卡片 */\n#recent-posts>.recent-post-item {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 25px;\n  border: var(--border-style);\n}\n\n/* 首页侧栏卡片 */\n#aside-content .card-widget {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 18px;\n  border: var(--border-style);\n}\n\n/* 文章页、归档页、普通页面 */\ndiv#post,\ndiv#page,\ndiv#archive {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border: var(--border-style);\n  border-radius: 20px;\n}\n\n/* 导航栏 */\n#page-header.nav-fixed #nav {\n  background: rgba(255, 255, 255, 0.75);\n  backdrop-filter: var(--backdrop-filter);\n}\n\n[data-theme=\"dark\"] #page-header.nav-fixed #nav {\n  background: rgba(0, 0, 0, 0.7) !important;\n}\n\n/* 夜间模式遮罩 */\n[data-theme=\"dark\"] #recent-posts>.recent-post-item,\n[data-theme=\"dark\"] #aside-content .card-widget,\n[data-theme=\"dark\"] div#post,\n[data-theme=\"dark\"] div#archive,\n[data-theme=\"dark\"] div#page {\n  background: var(--trans-dark);\n}\n\n\n/* 夜间模式页脚页头遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 阅读模式 */\n.read-mode #aside-content .card-widget {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n.read-mode div#post {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n/* 夜间模式下的阅读模式 */\n[data-theme=\"dark\"] .read-mode #aside-content .card-widget {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .read-mode div#post {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n/*哔哩哔哩视频适配*/\n.aspect-ratio {\n  position: relative;\n  width: 90%;\n  height: auto;\n  padding-bottom: 75%;\n  margin: 3% auto;\n  text-align: center;\n}\n\n.aspect-ratio iframe {\n  position: absolute;\n  width: 100%;\n  height: 86%;\n  left: 0;\n  top: 0;\n}\n@font-face {\n  /* 为载入的字体取名字(随意) */\n  font-family: 'font';\n  /* 字体文件地址(相对或者绝对路径都可以) */\n  src: url(/font/ali.woff2);\n  /* 定义加粗样式(加粗多少) */\n  font-weight: normal;\n  /* 定义字体样式(斜体/非斜体) */\n  font-style: normal;\n  /* 定义显示样式 */\n  font-display: block;\n}","source":"css/custom.css","raw":"/* 页脚与头图透明 */\n#footer {\n  background: transparent !important;\n}\n\n#page-header {\n  background: transparent !important;\n}\n\n/* 白天模式遮罩透明 */\n#footer::before {\n  background: transparent !important;\n}\n\n#page-header::before {\n  background: transparent !important;\n}\n\n/* 夜间模式遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 翻页按钮居中 */\n#pagination {\n  width: 100%;\n  margin: auto;\n}\n\n/* 一级菜单居中 */\n#nav .menus_items {\n  position: absolute !important;\n  width: fit-content !important;\n  left: 50% !important;\n  transform: translateX(-50%) !important;\n}\n\n/* 子菜单横向展示 */\n#nav .menus_items .menus_item:hover .menus_item_child {\n  display: flex !important;\n}\n\n/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */\n.menus_items .menus_item:nth-child(2) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(3) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(4) .menus_item_child {\n  left: -38px;\n}\n\n/* 白天模式不生效 */\n[data-theme=\"light\"] #site-name,\n[data-theme=\"light\"] #site-title,\n[data-theme=\"light\"] #site-subtitle,\n[data-theme=\"light\"] #post-info {\n  animation: none;\n}\n\n/* 夜间模式生效 */\n[data-theme=\"dark\"] #site-name,\n[data-theme=\"dark\"] #site-title {\n  animation: light_15px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #site-subtitle {\n  animation: light_10px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #post-info {\n  animation: light_5px 10s linear infinite;\n}\n\n/* 关键帧描述 */\n@keyframes light_15px {\n  0% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 15px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 15px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 15px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 15px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 15px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 15px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n}\n\n@keyframes light_10px {\n  0% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 10px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 10px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 10px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 10px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 10px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 10px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n}\n\n@keyframes light_5px {\n  0% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 5px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 5px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 5px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 5px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 5px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 5px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 5px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n}\n\n/* 背景宇宙星光  */\n#universe {\n  display: block;\n  position: fixed;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */\n  z-index: -1;\n}\n\n/* 侧边栏个人信息卡片动态渐变色 */\n#aside-content>.card-widget.card-info {\n  background: linear-gradient(-45deg,\n      #e8d8b9,\n      #eccec5,\n      #a3e9eb,\n      #bdbdf0,\n      #eec1ea);\n  box-shadow: 0 0 5px rgb(66, 68, 68);\n  position: relative;\n  background-size: 400% 400%;\n  -webkit-animation: Gradient 10s ease infinite;\n  -moz-animation: Gradient 10s ease infinite;\n  animation: Gradient 10s ease infinite !important;\n}\n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n/* 黑夜模式适配 */\n[data-theme=\"dark\"] #aside-content>.card-widget.card-info {\n  background: #191919ee;\n}\n\n/* 个人信息Follow me按钮 */\n#aside-content>.card-widget.card-info>#card-info-btn {\n  background-color: #3eb8be;\n  border-radius: 8px;\n}\n\n:root {\n  --trans-light: rgba(255, 255, 255, 0.88);\n  --trans-dark: rgba(25, 25, 25, 0.88);\n  --border-style: 1px solid rgb(169, 169, 169);\n  --backdrop-filter: none;\n}\n\n/* 首页文章卡片 */\n#recent-posts>.recent-post-item {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 25px;\n  border: var(--border-style);\n}\n\n/* 首页侧栏卡片 */\n#aside-content .card-widget {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 18px;\n  border: var(--border-style);\n}\n\n/* 文章页、归档页、普通页面 */\ndiv#post,\ndiv#page,\ndiv#archive {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border: var(--border-style);\n  border-radius: 20px;\n}\n\n/* 导航栏 */\n#page-header.nav-fixed #nav {\n  background: rgba(255, 255, 255, 0.75);\n  backdrop-filter: var(--backdrop-filter);\n}\n\n[data-theme=\"dark\"] #page-header.nav-fixed #nav {\n  background: rgba(0, 0, 0, 0.7) !important;\n}\n\n/* 夜间模式遮罩 */\n[data-theme=\"dark\"] #recent-posts>.recent-post-item,\n[data-theme=\"dark\"] #aside-content .card-widget,\n[data-theme=\"dark\"] div#post,\n[data-theme=\"dark\"] div#archive,\n[data-theme=\"dark\"] div#page {\n  background: var(--trans-dark);\n}\n\n\n/* 夜间模式页脚页头遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 阅读模式 */\n.read-mode #aside-content .card-widget {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n.read-mode div#post {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n/* 夜间模式下的阅读模式 */\n[data-theme=\"dark\"] .read-mode #aside-content .card-widget {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .read-mode div#post {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n/*哔哩哔哩视频适配*/\n.aspect-ratio {\n  position: relative;\n  width: 90%;\n  height: auto;\n  padding-bottom: 75%;\n  margin: 3% auto;\n  text-align: center;\n}\n\n.aspect-ratio iframe {\n  position: absolute;\n  width: 100%;\n  height: 86%;\n  left: 0;\n  top: 0;\n}\n@font-face {\n  /* 为载入的字体取名字(随意) */\n  font-family: 'font';\n  /* 字体文件地址(相对或者绝对路径都可以) */\n  src: url(/font/ali.woff2);\n  /* 定义加粗样式(加粗多少) */\n  font-weight: normal;\n  /* 定义字体样式(斜体/非斜体) */\n  font-style: normal;\n  /* 定义显示样式 */\n  font-display: block;\n}","date":"2023-05-11T12:16:25.079Z","updated":"2023-05-11T12:16:25.079Z","path":"css/custom.css","layout":"false","title":"","comments":1,"_id":"clhje45zh0008qc9h7cwoewim","content":"/* 页脚与头图透明 */\n#footer {\n  background: transparent !important;\n}\n\n#page-header {\n  background: transparent !important;\n}\n\n/* 白天模式遮罩透明 */\n#footer::before {\n  background: transparent !important;\n}\n\n#page-header::before {\n  background: transparent !important;\n}\n\n/* 夜间模式遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 翻页按钮居中 */\n#pagination {\n  width: 100%;\n  margin: auto;\n}\n\n/* 一级菜单居中 */\n#nav .menus_items {\n  position: absolute !important;\n  width: fit-content !important;\n  left: 50% !important;\n  transform: translateX(-50%) !important;\n}\n\n/* 子菜单横向展示 */\n#nav .menus_items .menus_item:hover .menus_item_child {\n  display: flex !important;\n}\n\n/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */\n.menus_items .menus_item:nth-child(2) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(3) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(4) .menus_item_child {\n  left: -38px;\n}\n\n/* 白天模式不生效 */\n[data-theme=\"light\"] #site-name,\n[data-theme=\"light\"] #site-title,\n[data-theme=\"light\"] #site-subtitle,\n[data-theme=\"light\"] #post-info {\n  animation: none;\n}\n\n/* 夜间模式生效 */\n[data-theme=\"dark\"] #site-name,\n[data-theme=\"dark\"] #site-title {\n  animation: light_15px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #site-subtitle {\n  animation: light_10px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #post-info {\n  animation: light_5px 10s linear infinite;\n}\n\n/* 关键帧描述 */\n@keyframes light_15px {\n  0% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 15px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 15px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 15px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 15px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 15px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 15px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n}\n\n@keyframes light_10px {\n  0% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 10px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 10px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 10px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 10px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 10px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 10px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n}\n\n@keyframes light_5px {\n  0% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 5px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 5px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 5px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 5px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 5px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 5px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 5px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n}\n\n/* 背景宇宙星光  */\n#universe {\n  display: block;\n  position: fixed;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */\n  z-index: -1;\n}\n\n/* 侧边栏个人信息卡片动态渐变色 */\n#aside-content>.card-widget.card-info {\n  background: linear-gradient(-45deg,\n      #e8d8b9,\n      #eccec5,\n      #a3e9eb,\n      #bdbdf0,\n      #eec1ea);\n  box-shadow: 0 0 5px rgb(66, 68, 68);\n  position: relative;\n  background-size: 400% 400%;\n  -webkit-animation: Gradient 10s ease infinite;\n  -moz-animation: Gradient 10s ease infinite;\n  animation: Gradient 10s ease infinite !important;\n}\n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n/* 黑夜模式适配 */\n[data-theme=\"dark\"] #aside-content>.card-widget.card-info {\n  background: #191919ee;\n}\n\n/* 个人信息Follow me按钮 */\n#aside-content>.card-widget.card-info>#card-info-btn {\n  background-color: #3eb8be;\n  border-radius: 8px;\n}\n\n:root {\n  --trans-light: rgba(255, 255, 255, 0.88);\n  --trans-dark: rgba(25, 25, 25, 0.88);\n  --border-style: 1px solid rgb(169, 169, 169);\n  --backdrop-filter: none;\n}\n\n/* 首页文章卡片 */\n#recent-posts>.recent-post-item {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 25px;\n  border: var(--border-style);\n}\n\n/* 首页侧栏卡片 */\n#aside-content .card-widget {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 18px;\n  border: var(--border-style);\n}\n\n/* 文章页、归档页、普通页面 */\ndiv#post,\ndiv#page,\ndiv#archive {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border: var(--border-style);\n  border-radius: 20px;\n}\n\n/* 导航栏 */\n#page-header.nav-fixed #nav {\n  background: rgba(255, 255, 255, 0.75);\n  backdrop-filter: var(--backdrop-filter);\n}\n\n[data-theme=\"dark\"] #page-header.nav-fixed #nav {\n  background: rgba(0, 0, 0, 0.7) !important;\n}\n\n/* 夜间模式遮罩 */\n[data-theme=\"dark\"] #recent-posts>.recent-post-item,\n[data-theme=\"dark\"] #aside-content .card-widget,\n[data-theme=\"dark\"] div#post,\n[data-theme=\"dark\"] div#archive,\n[data-theme=\"dark\"] div#page {\n  background: var(--trans-dark);\n}\n\n\n/* 夜间模式页脚页头遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 阅读模式 */\n.read-mode #aside-content .card-widget {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n.read-mode div#post {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n/* 夜间模式下的阅读模式 */\n[data-theme=\"dark\"] .read-mode #aside-content .card-widget {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .read-mode div#post {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n/*哔哩哔哩视频适配*/\n.aspect-ratio {\n  position: relative;\n  width: 90%;\n  height: auto;\n  padding-bottom: 75%;\n  margin: 3% auto;\n  text-align: center;\n}\n\n.aspect-ratio iframe {\n  position: absolute;\n  width: 100%;\n  height: 86%;\n  left: 0;\n  top: 0;\n}\n@font-face {\n  /* 为载入的字体取名字(随意) */\n  font-family: 'font';\n  /* 字体文件地址(相对或者绝对路径都可以) */\n  src: url(/font/ali.woff2);\n  /* 定义加粗样式(加粗多少) */\n  font-weight: normal;\n  /* 定义字体样式(斜体/非斜体) */\n  font-style: normal;\n  /* 定义显示样式 */\n  font-display: block;\n}","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/27/03/28/ocean-7953612_960_720.jpg","cover_type":"img","excerpt":"","more":"/* 页脚与头图透明 */\n#footer {\n  background: transparent !important;\n}\n\n#page-header {\n  background: transparent !important;\n}\n\n/* 白天模式遮罩透明 */\n#footer::before {\n  background: transparent !important;\n}\n\n#page-header::before {\n  background: transparent !important;\n}\n\n/* 夜间模式遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 翻页按钮居中 */\n#pagination {\n  width: 100%;\n  margin: auto;\n}\n\n/* 一级菜单居中 */\n#nav .menus_items {\n  position: absolute !important;\n  width: fit-content !important;\n  left: 50% !important;\n  transform: translateX(-50%) !important;\n}\n\n/* 子菜单横向展示 */\n#nav .menus_items .menus_item:hover .menus_item_child {\n  display: flex !important;\n}\n\n/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */\n.menus_items .menus_item:nth-child(2) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(3) .menus_item_child {\n  left: 0px;\n}\n.menus_items .menus_item:nth-child(4) .menus_item_child {\n  left: -38px;\n}\n\n/* 白天模式不生效 */\n[data-theme=\"light\"] #site-name,\n[data-theme=\"light\"] #site-title,\n[data-theme=\"light\"] #site-subtitle,\n[data-theme=\"light\"] #post-info {\n  animation: none;\n}\n\n/* 夜间模式生效 */\n[data-theme=\"dark\"] #site-name,\n[data-theme=\"dark\"] #site-title {\n  animation: light_15px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #site-subtitle {\n  animation: light_10px 10s linear infinite;\n}\n\n[data-theme=\"dark\"] #post-info {\n  animation: light_5px 10s linear infinite;\n}\n\n/* 关键帧描述 */\n@keyframes light_15px {\n  0% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 15px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 15px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 15px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 15px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 15px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 15px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 15px;\n  }\n}\n\n@keyframes light_10px {\n  0% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 10px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 10px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 10px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 10px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 10px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 10px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 10px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 10px;\n  }\n}\n\n@keyframes light_5px {\n  0% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n\n  12.5% {\n    text-shadow: #11ee5e 0 0 5px;\n  }\n\n  25% {\n    text-shadow: #f14747 0 0 5px;\n  }\n\n  37.5% {\n    text-shadow: #f1a247 0 0 15px;\n  }\n\n  50% {\n    text-shadow: #f1ee47 0 0 5px;\n  }\n\n  50% {\n    text-shadow: #b347f1 0 0 5px;\n  }\n\n  62.5% {\n    text-shadow: #002afa 0 0 5px;\n  }\n\n  75% {\n    text-shadow: #ed709b 0 0 5px;\n  }\n\n  87.5% {\n    text-shadow: #39c5bb 0 0 5px;\n  }\n\n  100% {\n    text-shadow: #5636ed 0 0 5px;\n  }\n}\n\n/* 背景宇宙星光  */\n#universe {\n  display: block;\n  position: fixed;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */\n  z-index: -1;\n}\n\n/* 侧边栏个人信息卡片动态渐变色 */\n#aside-content>.card-widget.card-info {\n  background: linear-gradient(-45deg,\n      #e8d8b9,\n      #eccec5,\n      #a3e9eb,\n      #bdbdf0,\n      #eec1ea);\n  box-shadow: 0 0 5px rgb(66, 68, 68);\n  position: relative;\n  background-size: 400% 400%;\n  -webkit-animation: Gradient 10s ease infinite;\n  -moz-animation: Gradient 10s ease infinite;\n  animation: Gradient 10s ease infinite !important;\n}\n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%;\n  }\n\n  50% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n/* 黑夜模式适配 */\n[data-theme=\"dark\"] #aside-content>.card-widget.card-info {\n  background: #191919ee;\n}\n\n/* 个人信息Follow me按钮 */\n#aside-content>.card-widget.card-info>#card-info-btn {\n  background-color: #3eb8be;\n  border-radius: 8px;\n}\n\n:root {\n  --trans-light: rgba(255, 255, 255, 0.88);\n  --trans-dark: rgba(25, 25, 25, 0.88);\n  --border-style: 1px solid rgb(169, 169, 169);\n  --backdrop-filter: none;\n}\n\n/* 首页文章卡片 */\n#recent-posts>.recent-post-item {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 25px;\n  border: var(--border-style);\n}\n\n/* 首页侧栏卡片 */\n#aside-content .card-widget {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border-radius: 18px;\n  border: var(--border-style);\n}\n\n/* 文章页、归档页、普通页面 */\ndiv#post,\ndiv#page,\ndiv#archive {\n  background: var(--trans-light);\n  backdrop-filter: var(--backdrop-filter);\n  border: var(--border-style);\n  border-radius: 20px;\n}\n\n/* 导航栏 */\n#page-header.nav-fixed #nav {\n  background: rgba(255, 255, 255, 0.75);\n  backdrop-filter: var(--backdrop-filter);\n}\n\n[data-theme=\"dark\"] #page-header.nav-fixed #nav {\n  background: rgba(0, 0, 0, 0.7) !important;\n}\n\n/* 夜间模式遮罩 */\n[data-theme=\"dark\"] #recent-posts>.recent-post-item,\n[data-theme=\"dark\"] #aside-content .card-widget,\n[data-theme=\"dark\"] div#post,\n[data-theme=\"dark\"] div#archive,\n[data-theme=\"dark\"] div#page {\n  background: var(--trans-dark);\n}\n\n\n/* 夜间模式页脚页头遮罩透明 */\n[data-theme=\"dark\"] #footer::before {\n  background: transparent !important;\n}\n\n[data-theme=\"dark\"] #page-header::before {\n  background: transparent !important;\n}\n\n/* 阅读模式 */\n.read-mode #aside-content .card-widget {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n.read-mode div#post {\n  background: rgba(158, 204, 171, 0.5) !important;\n}\n\n/* 夜间模式下的阅读模式 */\n[data-theme=\"dark\"] .read-mode #aside-content .card-widget {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .read-mode div#post {\n  background: rgba(25, 25, 25, 0.9) !important;\n  color: #ffffff;\n}\n\n/*哔哩哔哩视频适配*/\n.aspect-ratio {\n  position: relative;\n  width: 90%;\n  height: auto;\n  padding-bottom: 75%;\n  margin: 3% auto;\n  text-align: center;\n}\n\n.aspect-ratio iframe {\n  position: absolute;\n  width: 100%;\n  height: 86%;\n  left: 0;\n  top: 0;\n}\n@font-face {\n  /* 为载入的字体取名字(随意) */\n  font-family: 'font';\n  /* 字体文件地址(相对或者绝对路径都可以) */\n  src: url(/font/ali.woff2);\n  /* 定义加粗样式(加粗多少) */\n  font-weight: normal;\n  /* 定义字体样式(斜体/非斜体) */\n  font-style: normal;\n  /* 定义显示样式 */\n  font-display: block;\n}"},{"_content":"/*电子钟字体*/\n@font-face {\n  font-family: 'UnidreamLED';\n  src: url(\"https://cdn.jsdelivr.net/npm/akilar-candyassets/fonts/UnidreamLED.ttf\");\n  font-display: swap;\n}\n\ndiv#runtime {\n  width: 180px;\n  margin: auto;\n  color: #fff;\n  padding-inline: 5px;\n  border-radius: 10px;\n  background-color: rgba(0, 0, 0, 0.7);\n  font-family: 'UnidreamLED';\n}\n\n[data-theme=\"dark\"] div#runtime {\n  color: #28b4c8;\n  box-shadow: 0 0 5px rgba(28, 69, 218, 0.71);\n  animation: flashlight 1s linear infinite alternate;\n}\n\n/*悬停显示徽标提示语*/\na.github-badge:hover:before {\n  position: fixed;\n  width: fit-content;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 10%;\n  border-radius: 10px;\n  text-align: center;\n  z-index: 100;\n  content: attr(data-title);\n  font-size: 20px;\n  color: #fff;\n  padding: 10px;\n  background-color: var(--text-bg-hover);\n}\n\n[data-theme=dark] a.github-badge:hover:before {\n  background-color: rgba(18, 18, 18, 0.8);\n}\n\n@-moz-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-webkit-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-o-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}","source":"css/runtime.css","raw":"/*电子钟字体*/\n@font-face {\n  font-family: 'UnidreamLED';\n  src: url(\"https://cdn.jsdelivr.net/npm/akilar-candyassets/fonts/UnidreamLED.ttf\");\n  font-display: swap;\n}\n\ndiv#runtime {\n  width: 180px;\n  margin: auto;\n  color: #fff;\n  padding-inline: 5px;\n  border-radius: 10px;\n  background-color: rgba(0, 0, 0, 0.7);\n  font-family: 'UnidreamLED';\n}\n\n[data-theme=\"dark\"] div#runtime {\n  color: #28b4c8;\n  box-shadow: 0 0 5px rgba(28, 69, 218, 0.71);\n  animation: flashlight 1s linear infinite alternate;\n}\n\n/*悬停显示徽标提示语*/\na.github-badge:hover:before {\n  position: fixed;\n  width: fit-content;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 10%;\n  border-radius: 10px;\n  text-align: center;\n  z-index: 100;\n  content: attr(data-title);\n  font-size: 20px;\n  color: #fff;\n  padding: 10px;\n  background-color: var(--text-bg-hover);\n}\n\n[data-theme=dark] a.github-badge:hover:before {\n  background-color: rgba(18, 18, 18, 0.8);\n}\n\n@-moz-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-webkit-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-o-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}","date":"2023-05-08T10:52:46.376Z","updated":"2023-05-08T10:52:46.376Z","path":"css/runtime.css","layout":"false","title":"","comments":1,"_id":"clhje45zi000aqc9h3sdle2m1","content":"/*电子钟字体*/\n@font-face {\n  font-family: 'UnidreamLED';\n  src: url(\"https://cdn.jsdelivr.net/npm/akilar-candyassets/fonts/UnidreamLED.ttf\");\n  font-display: swap;\n}\n\ndiv#runtime {\n  width: 180px;\n  margin: auto;\n  color: #fff;\n  padding-inline: 5px;\n  border-radius: 10px;\n  background-color: rgba(0, 0, 0, 0.7);\n  font-family: 'UnidreamLED';\n}\n\n[data-theme=\"dark\"] div#runtime {\n  color: #28b4c8;\n  box-shadow: 0 0 5px rgba(28, 69, 218, 0.71);\n  animation: flashlight 1s linear infinite alternate;\n}\n\n/*悬停显示徽标提示语*/\na.github-badge:hover:before {\n  position: fixed;\n  width: fit-content;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 10%;\n  border-radius: 10px;\n  text-align: center;\n  z-index: 100;\n  content: attr(data-title);\n  font-size: 20px;\n  color: #fff;\n  padding: 10px;\n  background-color: var(--text-bg-hover);\n}\n\n[data-theme=dark] a.github-badge:hover:before {\n  background-color: rgba(18, 18, 18, 0.8);\n}\n\n@-moz-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-webkit-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-o-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/05/02/18/13/london-7965770__340.jpg","cover_type":"img","excerpt":"","more":"/*电子钟字体*/\n@font-face {\n  font-family: 'UnidreamLED';\n  src: url(\"https://cdn.jsdelivr.net/npm/akilar-candyassets/fonts/UnidreamLED.ttf\");\n  font-display: swap;\n}\n\ndiv#runtime {\n  width: 180px;\n  margin: auto;\n  color: #fff;\n  padding-inline: 5px;\n  border-radius: 10px;\n  background-color: rgba(0, 0, 0, 0.7);\n  font-family: 'UnidreamLED';\n}\n\n[data-theme=\"dark\"] div#runtime {\n  color: #28b4c8;\n  box-shadow: 0 0 5px rgba(28, 69, 218, 0.71);\n  animation: flashlight 1s linear infinite alternate;\n}\n\n/*悬停显示徽标提示语*/\na.github-badge:hover:before {\n  position: fixed;\n  width: fit-content;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 10%;\n  border-radius: 10px;\n  text-align: center;\n  z-index: 100;\n  content: attr(data-title);\n  font-size: 20px;\n  color: #fff;\n  padding: 10px;\n  background-color: var(--text-bg-hover);\n}\n\n[data-theme=dark] a.github-badge:hover:before {\n  background-color: rgba(18, 18, 18, 0.8);\n}\n\n@-moz-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-webkit-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@-o-keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}\n\n@keyframes flashlight {\n  from {\n    box-shadow: 0 0 5px #1478d2;\n  }\n\n  to {\n    box-shadow: 0 0 2px #1478d2;\n  }\n}"},{"title":"个人小屋","tags":["personal"],"date":"2023-05-09T18:33:00.000Z","password":"wang","abstract":"有东西被加密了, 请输入密码查看.","message":"您好, 这里需要密码.","theme":"xray","wrong_pass_message":"抱歉, 这个密码看着不太对, 请再试试.","wrong_hash_message":"抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.","_content":"\n## 个人小屋\n\n\n\n\n","source":"diary/index.md","raw":"---\ntitle: 个人小屋\ntags:\n  - personal\ndate: 2023-05-10 2:33:00\npassword: wang\nabstract: 有东西被加密了, 请输入密码查看.\nmessage: 您好, 这里需要密码.\ntheme: xray\nwrong_pass_message: 抱歉, 这个密码看着不太对, 请再试试.\nwrong_hash_message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.\n---\n\n## 个人小屋\n\n\n\n\n","updated":"2023-05-09T18:56:29.000Z","path":"diary/index.html","comments":1,"layout":"page","_id":"clhje45zl000fqc9h5nxvgsyj","content":"<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"抱歉, 这个密码看着不太对, 请再试试.\" data-whm=\"抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"48c33cc85c91df199b03f285b3e85a0b83ecb23d439efa7f9e0e7787ba899241\">487464473ce350cd38c3589a7421005bd8e75c71d80740f678b9a4c6d2b57d984a0acc56b19024359b9cd6005374cbd1ba12f51fc3b3d9a7e0a1e730210437ccca1dc6c10060a1c9671992137047ba592bf9ed222f8e525f048b3643f34af80abb7269ed83445cb637f90e90113edbf3a06a031a07d7410c4b47cdf4c03314c3</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-xray\">\n      <input class=\"hbe hbe-input-field hbe-input-field-xray\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-xray\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-xray\">您好, 这里需要密码.</span>\n      </label>\n      <svg class=\"hbe hbe-graphic hbe-graphic-xray\" width=\"300%\" height=\"100%\" viewBox=\"0 0 1200 60\" preserveAspectRatio=\"none\">\n        <path d=\"M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0\"></path>\n        <path d=\"M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0\"></path>\n      </svg>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/03/30/11/58/norway-7887613_960_720.jpg","cover_type":"img","excerpt":"有东西被加密了, 请输入密码查看.","more":"有东西被加密了, 请输入密码查看.","origin":"<h2 id=\"个人小屋\"><a class=\"markdownIt-Anchor\" href=\"#个人小屋\"></a> 个人小屋</h2>\n","encrypt":true},{"title":"Gallery","date":"2023-05-11T03:41:54.000Z","_content":"\n<div class=\"gallery-group-main\">\n{% galleryGroup 'ACG' '那些二次元的故事' '/gallery/ACG' https://bu.dusays.com/2022/11/26/638228a86935a.webp %}\n</div>","source":"gallery/index.md","raw":"---\ntitle: Gallery\ndate: 2023-05-11 11:41:54\n---\n\n<div class=\"gallery-group-main\">\n{% galleryGroup 'ACG' '那些二次元的故事' '/gallery/ACG' https://bu.dusays.com/2022/11/26/638228a86935a.webp %}\n</div>","updated":"2023-05-11T04:05:10.316Z","path":"gallery/index.html","comments":1,"layout":"page","_id":"clhje45zl000gqc9h69qsg71q","content":"<div class=\"gallery-group-main\">\n\n  <figure class=\"gallery-group\">\n  <img class=\"gallery-group-img no-lightbox\" src='https://bu.dusays.com/2022/11/26/638228a86935a.webp' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">ACG</div>\n  <p>那些二次元的故事</p>\n  <a href='/gallery/ACG'></a>\n  </figcaption>\n  </figure>\n  \n</div>","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/30/12/15/rock-formations-7960445_960_720.jpg","cover_type":"img","excerpt":"","more":"<div class=\"gallery-group-main\">\n\n  <figure class=\"gallery-group\">\n  <img class=\"gallery-group-img no-lightbox\" src='https://bu.dusays.com/2022/11/26/638228a86935a.webp' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">ACG</div>\n  <p>那些二次元的故事</p>\n  <a href='/gallery/ACG'></a>\n  </figcaption>\n  </figure>\n  \n</div>"},{"_content":"function dark() { window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame; var n, e, i, h, t = .05, s = document.getElementById(\"universe\"), o = !0, a = \"180,184,240\", r = \"226,225,142\", d = \"226,225,224\", c = []; function f() { n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute(\"width\", n), s.setAttribute(\"height\", e) } function u() { h.clearRect(0, 0, n, e); for (var t = c.length, i = 0; i < t; i++) { var s = c[i]; s.move(), s.fadeIn(), s.fadeOut(), s.draw() } } function y() { this.reset = function () { this.giant = m(3), this.comet = !this.giant && !o && m(10), this.x = l(0, n - 10), this.y = l(0, e), this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t, this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120), this.fadingOut = null, this.fadingIn = !0, this.opacity = 0, this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)), this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1) }, this.fadeIn = function () { this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh), this.opacity += this.do) }, this.fadeOut = function () { this.fadingOut && (this.fadingOut = !(this.opacity < 0), this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset())) }, this.draw = function () { if (h.beginPath(), this.giant) h.fillStyle = \"rgba(\" + a + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1); else if (this.comet) { h.fillStyle = \"rgba(\" + d + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1); for (var t = 0; t < 30; t++)h.fillStyle = \"rgba(\" + d + \",\" + (this.opacity - this.opacity / 20 * t) + \")\", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill() } else h.fillStyle = \"rgba(\" + r + \",\" + this.opacity + \")\", h.rect(this.x, this.y, this.r, this.r); h.closePath(), h.fill() }, this.move = function () { this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0) }, setTimeout(function () { o = !1 }, 50) } function m(t) { return Math.floor(1e3 * Math.random()) + 1 < 10 * t } function l(t, i) { return Math.random() * (i - t) + t } f(), window.addEventListener(\"resize\", f, !1), function () { h = s.getContext(\"2d\"); for (var t = 0; t < i; t++)c[t] = new y, c[t].reset(); u() }(), function t() { document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t) }() };\ndark()","source":"js/universe.js","raw":"function dark() { window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame; var n, e, i, h, t = .05, s = document.getElementById(\"universe\"), o = !0, a = \"180,184,240\", r = \"226,225,142\", d = \"226,225,224\", c = []; function f() { n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute(\"width\", n), s.setAttribute(\"height\", e) } function u() { h.clearRect(0, 0, n, e); for (var t = c.length, i = 0; i < t; i++) { var s = c[i]; s.move(), s.fadeIn(), s.fadeOut(), s.draw() } } function y() { this.reset = function () { this.giant = m(3), this.comet = !this.giant && !o && m(10), this.x = l(0, n - 10), this.y = l(0, e), this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t, this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120), this.fadingOut = null, this.fadingIn = !0, this.opacity = 0, this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)), this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1) }, this.fadeIn = function () { this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh), this.opacity += this.do) }, this.fadeOut = function () { this.fadingOut && (this.fadingOut = !(this.opacity < 0), this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset())) }, this.draw = function () { if (h.beginPath(), this.giant) h.fillStyle = \"rgba(\" + a + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1); else if (this.comet) { h.fillStyle = \"rgba(\" + d + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1); for (var t = 0; t < 30; t++)h.fillStyle = \"rgba(\" + d + \",\" + (this.opacity - this.opacity / 20 * t) + \")\", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill() } else h.fillStyle = \"rgba(\" + r + \",\" + this.opacity + \")\", h.rect(this.x, this.y, this.r, this.r); h.closePath(), h.fill() }, this.move = function () { this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0) }, setTimeout(function () { o = !1 }, 50) } function m(t) { return Math.floor(1e3 * Math.random()) + 1 < 10 * t } function l(t, i) { return Math.random() * (i - t) + t } f(), window.addEventListener(\"resize\", f, !1), function () { h = s.getContext(\"2d\"); for (var t = 0; t < i; t++)c[t] = new y, c[t].reset(); u() }(), function t() { document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t) }() };\ndark()","date":"2023-05-08T13:37:03.561Z","updated":"2023-05-08T13:37:03.561Z","path":"js/universe.js","layout":"false","title":"","comments":1,"_id":"clhje45zn000kqc9hc9rhab0m","content":"function dark() { window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame; var n, e, i, h, t = .05, s = document.getElementById(\"universe\"), o = !0, a = \"180,184,240\", r = \"226,225,142\", d = \"226,225,224\", c = []; function f() { n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute(\"width\", n), s.setAttribute(\"height\", e) } function u() { h.clearRect(0, 0, n, e); for (var t = c.length, i = 0; i < t; i++) { var s = c[i]; s.move(), s.fadeIn(), s.fadeOut(), s.draw() } } function y() { this.reset = function () { this.giant = m(3), this.comet = !this.giant && !o && m(10), this.x = l(0, n - 10), this.y = l(0, e), this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t, this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120), this.fadingOut = null, this.fadingIn = !0, this.opacity = 0, this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)), this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1) }, this.fadeIn = function () { this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh), this.opacity += this.do) }, this.fadeOut = function () { this.fadingOut && (this.fadingOut = !(this.opacity < 0), this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset())) }, this.draw = function () { if (h.beginPath(), this.giant) h.fillStyle = \"rgba(\" + a + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1); else if (this.comet) { h.fillStyle = \"rgba(\" + d + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1); for (var t = 0; t < 30; t++)h.fillStyle = \"rgba(\" + d + \",\" + (this.opacity - this.opacity / 20 * t) + \")\", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill() } else h.fillStyle = \"rgba(\" + r + \",\" + this.opacity + \")\", h.rect(this.x, this.y, this.r, this.r); h.closePath(), h.fill() }, this.move = function () { this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0) }, setTimeout(function () { o = !1 }, 50) } function m(t) { return Math.floor(1e3 * Math.random()) + 1 < 10 * t } function l(t, i) { return Math.random() * (i - t) + t } f(), window.addEventListener(\"resize\", f, !1), function () { h = s.getContext(\"2d\"); for (var t = 0; t < i; t++)c[t] = new y, c[t].reset(); u() }(), function t() { document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t) }() };\ndark()","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/05/03/19/57/passau-7968535_960_720.jpg","cover_type":"img","excerpt":"","more":"function dark() { window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame; var n, e, i, h, t = .05, s = document.getElementById(\"universe\"), o = !0, a = \"180,184,240\", r = \"226,225,142\", d = \"226,225,224\", c = []; function f() { n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute(\"width\", n), s.setAttribute(\"height\", e) } function u() { h.clearRect(0, 0, n, e); for (var t = c.length, i = 0; i < t; i++) { var s = c[i]; s.move(), s.fadeIn(), s.fadeOut(), s.draw() } } function y() { this.reset = function () { this.giant = m(3), this.comet = !this.giant && !o && m(10), this.x = l(0, n - 10), this.y = l(0, e), this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t, this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120), this.fadingOut = null, this.fadingIn = !0, this.opacity = 0, this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)), this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1) }, this.fadeIn = function () { this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh), this.opacity += this.do) }, this.fadeOut = function () { this.fadingOut && (this.fadingOut = !(this.opacity < 0), this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset())) }, this.draw = function () { if (h.beginPath(), this.giant) h.fillStyle = \"rgba(\" + a + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1); else if (this.comet) { h.fillStyle = \"rgba(\" + d + \",\" + this.opacity + \")\", h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1); for (var t = 0; t < 30; t++)h.fillStyle = \"rgba(\" + d + \",\" + (this.opacity - this.opacity / 20 * t) + \")\", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill() } else h.fillStyle = \"rgba(\" + r + \",\" + this.opacity + \")\", h.rect(this.x, this.y, this.r, this.r); h.closePath(), h.fill() }, this.move = function () { this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0) }, setTimeout(function () { o = !1 }, 50) } function m(t) { return Math.floor(1e3 * Math.random()) + 1 < 10 * t } function l(t, i) { return Math.random() * (i - t) + t } f(), window.addEventListener(\"resize\", f, !1), function () { h = s.getContext(\"2d\"); for (var t = 0; t < i; t++)c[t] = new y, c[t].reset(); u() }(), function t() { document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t) }() };\ndark()"},{"_content":"var now = new Date; function createtime() { now.setTime(now.getTime() + 1e3); var e = new Date(\"05/08/2023 00:00:00\"), t = Math.trunc(234e8 + (now - e) / 1e3 * 17), a = (t / 1496e5).toFixed(6), o = new Date(\"05/08/2023 00:00:00\"), n = (now - o) / 1e3 / 60 / 60 / 24, r = Math.floor(n), i = (now - o) / 1e3 / 60 / 60 - 24 * r, s = Math.floor(i); 1 == String(s).length && (s = \"0\" + s); var d = (now - o) / 1e3 / 60 - 1440 * r - 60 * s, l = Math.floor(d); 1 == String(l).length && (l = \"0\" + l); var g = (now - o) / 1e3 - 86400 * r - 3600 * s - 60 * l, b = Math.round(g); 1 == String(b).length && (b = \"0\" + b); let c = \"\"; c = s < 18 && s >= 9 ? `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>` : `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>`, document.getElementById(\"workboard\") && (document.getElementById(\"workboard\").innerHTML = c) } setInterval((() => { createtime() }), 1e3);","source":"js/runtime.js","raw":"var now = new Date; function createtime() { now.setTime(now.getTime() + 1e3); var e = new Date(\"05/08/2023 00:00:00\"), t = Math.trunc(234e8 + (now - e) / 1e3 * 17), a = (t / 1496e5).toFixed(6), o = new Date(\"05/08/2023 00:00:00\"), n = (now - o) / 1e3 / 60 / 60 / 24, r = Math.floor(n), i = (now - o) / 1e3 / 60 / 60 - 24 * r, s = Math.floor(i); 1 == String(s).length && (s = \"0\" + s); var d = (now - o) / 1e3 / 60 - 1440 * r - 60 * s, l = Math.floor(d); 1 == String(l).length && (l = \"0\" + l); var g = (now - o) / 1e3 - 86400 * r - 3600 * s - 60 * l, b = Math.round(g); 1 == String(b).length && (b = \"0\" + b); let c = \"\"; c = s < 18 && s >= 9 ? `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>` : `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>`, document.getElementById(\"workboard\") && (document.getElementById(\"workboard\").innerHTML = c) } setInterval((() => { createtime() }), 1e3);","date":"2023-05-09T18:17:26.573Z","updated":"2023-05-09T18:17:26.573Z","path":"js/runtime.js","layout":"false","title":"","comments":1,"_id":"clhje45zo000mqc9hah7pb2te","content":"var now = new Date; function createtime() { now.setTime(now.getTime() + 1e3); var e = new Date(\"05/08/2023 00:00:00\"), t = Math.trunc(234e8 + (now - e) / 1e3 * 17), a = (t / 1496e5).toFixed(6), o = new Date(\"05/08/2023 00:00:00\"), n = (now - o) / 1e3 / 60 / 60 / 24, r = Math.floor(n), i = (now - o) / 1e3 / 60 / 60 - 24 * r, s = Math.floor(i); 1 == String(s).length && (s = \"0\" + s); var d = (now - o) / 1e3 / 60 - 1440 * r - 60 * s, l = Math.floor(d); 1 == String(l).length && (l = \"0\" + l); var g = (now - o) / 1e3 - 86400 * r - 3600 * s - 60 * l, b = Math.round(g); 1 == String(b).length && (b = \"0\" + b); let c = \"\"; c = s < 18 && s >= 9 ? `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>` : `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>`, document.getElementById(\"workboard\") && (document.getElementById(\"workboard\").innerHTML = c) } setInterval((() => { createtime() }), 1e3);","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/30/12/15/rock-formations-7960445_960_720.jpg","cover_type":"img","excerpt":"","more":"var now = new Date; function createtime() { now.setTime(now.getTime() + 1e3); var e = new Date(\"05/08/2023 00:00:00\"), t = Math.trunc(234e8 + (now - e) / 1e3 * 17), a = (t / 1496e5).toFixed(6), o = new Date(\"05/08/2023 00:00:00\"), n = (now - o) / 1e3 / 60 / 60 / 24, r = Math.floor(n), i = (now - o) / 1e3 / 60 / 60 - 24 * r, s = Math.floor(i); 1 == String(s).length && (s = \"0\" + s); var d = (now - o) / 1e3 / 60 - 1440 * r - 60 * s, l = Math.floor(d); 1 == String(l).length && (l = \"0\" + l); var g = (now - o) / 1e3 - 86400 * r - 3600 * s - 60 * l, b = Math.round(g); 1 == String(b).length && (b = \"0\" + b); let c = \"\"; c = s < 18 && s >= 9 ? `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>` : `<div style=\"font-size:13px;font-weight:bold\">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id=\"heartbeat\" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>`, document.getElementById(\"workboard\") && (document.getElementById(\"workboard\").innerHTML = c) } setInterval((() => { createtime() }), 1e3);"},{"title":"友链","date":"2023-05-08T06:25:33.000Z","type":"link","_content":"","source":"link/index.md","raw":"---\ntitle: 友链\ndate: 2023-05-08 14:25:33\ntype: \"link\"\n---\n","updated":"2023-05-10T09:08:06.902Z","path":"link/index.html","comments":1,"layout":"page","_id":"clhje45zp000qqc9h1w87ghg8","content":"","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/05/03/19/57/passau-7968535_960_720.jpg","cover_type":"img","excerpt":"","more":""},{"title":"音乐","date":"2023-05-08T06:39:00.000Z","_content":"\n# ♪(^∇^*) 欢迎来到aplayer音乐平台，请尽情欣赏~~\n---\n\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>\n\n","source":"music/index.md","raw":"---\ntitle: 音乐\ndate: 2023-05-8 14:39:00\n---\n\n# ♪(^∇^*) 欢迎来到aplayer音乐平台，请尽情欣赏~~\n---\n\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>\n\n","updated":"2023-05-11T04:59:55.583Z","path":"music/index.html","comments":1,"layout":"page","_id":"clhje45zq000sqc9h0wqm9org","content":"<h1 id=\"欢迎来到aplayer音乐平台请尽情欣赏~~\"><a class=\"markdownIt-Anchor\" href=\"#欢迎来到aplayer音乐平台请尽情欣赏~~\"></a> ♪(<sup>∇</sup>*) 欢迎来到aplayer音乐平台，请尽情欣赏~~</h1>\n<hr />\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>\n","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/30/12/15/rock-formations-7960445_960_720.jpg","cover_type":"img","excerpt":"","more":"<h1 id=\"欢迎来到aplayer音乐平台请尽情欣赏~~\"><a class=\"markdownIt-Anchor\" href=\"#欢迎来到aplayer音乐平台请尽情欣赏~~\"></a> ♪(<sup>∇</sup>*) 欢迎来到aplayer音乐平台，请尽情欣赏~~</h1>\n<hr />\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>\n"},{"title":"电影","date":"2023-05-08T06:39:00.000Z","_content":"\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>","source":"movies/index.md","raw":"---\ntitle: 电影\ndate: 2023-05-8 14:39:00\n---\n\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>","updated":"2023-05-11T11:13:29.146Z","path":"movies/index.html","comments":1,"layout":"page","_id":"clhje45zq000wqc9h9ntr5fpw","content":"<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/27/03/28/ocean-7953612_960_720.jpg","cover_type":"img","excerpt":"","more":"<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>"},{"title":"标签","date":"2023-05-08T06:22:55.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2023-05-08 14:22:55\ntype: \"tags\"\n---\n","updated":"2023-05-08T06:40:35.519Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clhje45zr000yqc9h0vfm231s","content":"","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/30/12/15/rock-formations-7960445_960_720.jpg","cover_type":"img","excerpt":"","more":""},{"title":"ACG","date":"2023-05-11T04:05:26.000Z","_content":"\n{% gallery %}\n![](https://bu.dusays.com/2022/11/26/638228996b21e.webp)\n![](https://bu.dusays.com/2022/11/26/6381f14d672f2.webp)\n![](https://bu.dusays.com/2022/11/26/6381f14f1be65.webp)\n![](https://bu.dusays.com/2022/11/26/6381f1545068f.webp)\n![](https://bu.dusays.com/2022/11/26/6381f3b5cdd9d.webp)\n![](https://bu.dusays.com/2022/11/23/637dc831b4070.webp)\n{% endgallery %}","source":"gallery/ACG/index.md","raw":"---\ntitle: ACG\ndate: 2023-05-11 12:05:26\n---\n\n{% gallery %}\n![](https://bu.dusays.com/2022/11/26/638228996b21e.webp)\n![](https://bu.dusays.com/2022/11/26/6381f14d672f2.webp)\n![](https://bu.dusays.com/2022/11/26/6381f14f1be65.webp)\n![](https://bu.dusays.com/2022/11/26/6381f1545068f.webp)\n![](https://bu.dusays.com/2022/11/26/6381f3b5cdd9d.webp)\n![](https://bu.dusays.com/2022/11/23/637dc831b4070.webp)\n{% endgallery %}","updated":"2023-05-11T04:36:22.102Z","path":"gallery/ACG/index.html","comments":1,"layout":"page","_id":"clhje45zs0010qc9hakm5di2h","content":"<div class=\"gallery\">\n    <div class=\"fj-gallery  data\" data-rowHeight=\"220\" data-limit=\"10\">\n    <span class=\"gallery-data\">[{\"url\":\"https://bu.dusays.com/2022/11/26/638228996b21e.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/26/6381f14d672f2.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/26/6381f14f1be65.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/26/6381f1545068f.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/26/6381f3b5cdd9d.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/23/637dc831b4070.webp\",\"alt\":\"\"}]</span>\n    </div>\n    <button class=\"gallery-load-more\"><span>加载更多</span><i class=\"fa-solid fa-arrow-down\"></i></button>\n    </div>","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/27/03/28/ocean-7953612_960_720.jpg","cover_type":"img","excerpt":"","more":"<div class=\"gallery\">\n    <div class=\"fj-gallery  data\" data-rowHeight=\"220\" data-limit=\"10\">\n    <span class=\"gallery-data\">[{\"url\":\"https://bu.dusays.com/2022/11/26/638228996b21e.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/26/6381f14d672f2.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/26/6381f14f1be65.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/26/6381f1545068f.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/26/6381f3b5cdd9d.webp\",\"alt\":\"\"},{\"url\":\"https://bu.dusays.com/2022/11/23/637dc831b4070.webp\",\"alt\":\"\"}]</span>\n    </div>\n    <button class=\"gallery-load-more\"><span>加载更多</span><i class=\"fa-solid fa-arrow-down\"></i></button>\n    </div>"}],"Post":[{"title":"Redis","description":null,"date":"2023-05-11T17:00:00.000Z","updated":"2023-05-11T17:00:00.000Z","swiper_index":1,"_content":"\n\n\n## windows安装\n\n[Releases · tporadowski/redis (github.com)](https://github.com/tporadowski/redis/releases)\n\n点击安装[Redis-x64-5.0.14.1.msi](https://github.com/tporadowski/redis/releases/download/v5.0.14.1/Redis-x64-5.0.14.1.msi)\n\n\n\nNosql\n\n> 非关系型数据库\n\n\n### 常用命令：\n\n> 设置键过期时间  expire\n\n~~~bash\nEXPIRE key seconds\t# 秒为单位\n127.0.0.1:6379> set key1 wangweijun\nOK\n127.0.0.1:6379> keys *\n1) \"key1\"\n127.0.0.1:6379> EXPIRE key1 10\t# 设置10s后过期\n(integer) 1\n127.0.0.1:6379> keys *\n(empty list or set)\t\t# key1在10s后被删除\n~~~\n\n\n\n> 清空所有数据库\n\n~~~bash\nflushdb\n~~~\n\n\n\n## 五大数据类型\n\n\n\n### Redis-key\n\n\n\n\n\n\n### String（字符串）\n\n\n\n\n### List（列表）\n\n在redis里面，我们可以把**list**当成，栈、队列、阻塞队列\n\n~~~bash\n#############################################################################\n127.0.0.1:6379> LPUSH list one\t# 将一个值或者多个值，插入到列表头部（左）\n(integer) 1\n127.0.0.1:6379> lpush list two\n(integer) 2\n127.0.0.1:6379> LPUSH list three\n(integer) 3\n127.0.0.1:6379> LRANGE list\n(error) ERR wrong number of arguments for 'lrange' command\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"three\"\n2) \"two\"\n3) \"one\"\n127.0.0.1:6379> LRANGE list 0 1\n1) \"three\"\n2) \"two\"\n127.0.0.1:6379> RPUSH list right\t# 将一个值或者多个值，插入到列表尾部（右）\n(integer) 4\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"three\"\n2) \"two\"\n3) \"one\"\n4) \"right\"\n#############################################################################\n127.0.0.1:6379> Lpop list\t# 移除list的第一个元素\n\"three\"\n127.0.0.1:6379> RPOP list\t# 移除list最后一个元素\n\"right\"\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"two\"\n2) \"one\"\n#############################################################################\nLindex\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"two\"\n2) \"one\"\n127.0.0.1:6379> lindex list 0\t# 通过下标获取 list 中的某一个值\n\"two\"\n127.0.0.1:6379> lindex list 1\n\"one\"\n\n#############################################################################\nLlen\n127.0.0.1:6379> Lpush list one\n(integer) 1\n127.0.0.1:6379> Lpush list two\n(integer) 2\n127.0.0.1:6379> LPUSH list three\n(integer) 3\n127.0.0.1:6379> Llen list\t# 返回列表的长度\n(integer) 3\n\n#############################################################################\n移除某一个值 Lrem\n127.0.0.1:6379> lpush list three\n(integer) 4\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"three\"\n2) \"three\"\n3) \"two\"\n4) \"one\"\n127.0.0.1:6379> lrem list 1 one\n(integer) 1\n127.0.0.1:6379>  LRANGE list 0 -1\n1) \"three\"\n2) \"three\"\n3) \"two\"\n127.0.0.1:6379>  LRANGE list 0 -1\n1) \"three\"\n2) \"three\"\n3) \"two\"\n\n127.0.0.1:6379> lrem list 2 three\t# 移除了2个three\n(integer) 2\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"two\"\n\n#############################################################################\ntrim 修剪\n127.0.0.1:6379> RPUSH mylist \"Hello\"\n(integer) 1\n127.0.0.1:6379> RPUSH mylist \"Hello01\"\n(integer) 2\n127.0.0.1:6379> RPUSH mylist \"Hello02\"\n(integer) 3\n127.0.0.1:6379> RPUSH mylist \"Hello03\"\n(integer) 4\n127.0.0.1:6379> ltrim mylist 1 2\t# 通过下标截取指定的长度，这个list已经改变了，截断了只剩下截取的元素1\nOK\n127.0.0.1:6379> Lrange mylist 0 -1\n1) \"Hello01\"\n2) \"Hello02\"\n#############################################################################\nrpop lpush\n127.0.0.1:6379> LRANGE mylist 0 -1\n1) \"Hello\"\n2) \"Hello01\"\n3) \"Hello02\"\n4) \"Hello03\"\n127.0.0.1:6379> rpoplpush mylist myotherlist\t# 移除列表的最后一个元素，将它移动到新的列表中！\n\"Hello03\"\n127.0.0.1:6379> LRANGE mylist 0 -1\t# 查看原来的列表\n1) \"Hello\"\n2) \"Hello01\"\n3) \"Hello02\"\n127.0.0.1:6379> LRANGE myotherlist 0 -1\t\t# 查看目标列表中，确实存在该值！\n1) \"Hello03\"\n\n#############################################################################\nlset\t将列表中指定下标的值替换为另外一个值，更新操作\n127.0.0.1:6379> exists list\t\t# 判断这个列表是否存在\n(integer) 0\n127.0.0.1:6379> lset list 0 item\t# 如果不存在列表我们去更新就会报错\n(error) ERR no such key\n127.0.0.1:6379> lpush list value1\n(integer) 1\n127.0.0.1:6379> lrange list 0 0\t\t# 如果存在，更新当前下标的值\n1) \"value1\"\n127.0.0.1:6379> lset list 0 item\nOK\n127.0.0.1:6379> Lrange list 0 0\n1) \"item\"\n127.0.0.1:6379> lset list 1 value\n(error) ERR index out of range\n~~~\n\n\n\n\n\n### Set（集合）\n\n\n\n\n\n\n\n### Hash（哈希）\n\nMap集合，key-map 这个值是一个map集合！\n\n> hset key field value\n\n~~~bash\n127.0.0.1:6379> hset myhash field1 wangweijun\n(integer) 1\n127.0.0.1:6379> hget myhash field1\n\"wangweijun\"\n127.0.0.1:6379> hmset myhash field1 hello field2 world\nOK\n127.0.0.1:6379> hmget myhash field1 field2\n1) \"hello\"\n2) \"world\"\n~~~\n\n\n\n\n\n## Jedis\n\n### Redis.conf详解\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n### Redis持久化\n\nRedis是内存数据库，如果不将内存中的数据库状态保存到磁盘，那么一旦服务器进程退出，服务器中的数据库状态也会消失，所以Redis提供了持久化功能！\n\n\n\n#### RDB（Redis DataBase）\n\n> 什么是RDB\n\n\n\n\n\n\n\n#### AOF（Append Only File）\n\n将我们的所有命令都记录下来，history，恢复的时候就把这个文件全部执行一遍！\n\n> AOF\n\n\n\n### Redis发布订阅\n\nRedis发布订阅（pub/sub）是一种==消息通信模式==：发送者（pub），订阅者（sub）接收消息。\n\nRedis客户端可以订阅任意数量的频道。\n\n\n\n### Redis主从复制\n\n\n\n\n\n\n\n\n\n### Redis缓存穿透和雪崩\n\n\n\n## Redis 数据备份与恢复\n\n**备份数据**\n\nredis Save 命令基本语法如下：\n\n~~~bash\n127.0.0.1:6379> SAVE\nOK\n~~~\n\n该命令将在 redis 安装目录中创建dump.rdb文件。\n\n\n\n**恢复数据**\n\n登录目标redis服务器，我们先**停止redis服务**：\n\n~~~bash\nservice redis stop  #停止redis服务\n~~~\n\n然后进入redis的文件存放目录redis,把刚刚备份的dump.rdb文件替换该目录下的dump.rdb文件（建议先备份当前目录下的dump.rdb文件），**重启redis服务**\n\n~~~bash\nservice redis start #启动redis服务\n~~~\n\n到此，redis数据迁移完成\n\n> 获取\n\n获取 redis 目录可以使用 **CONFIG** 命令，如下所示：\n\n~~~bash\nredis 127.0.0.1:6379> CONFIG GET dir\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/Redis.md","raw":"---\ntitle: Redis\ndescription:\ndate: 2023-05-12 1:0:00\nupdated: 2023-05-12 1:0:00\ntags:\n  - Redis\ncategories:\n  - 技术栈\nswiper_index: 1 # 置顶权重\n---\n\n\n\n## windows安装\n\n[Releases · tporadowski/redis (github.com)](https://github.com/tporadowski/redis/releases)\n\n点击安装[Redis-x64-5.0.14.1.msi](https://github.com/tporadowski/redis/releases/download/v5.0.14.1/Redis-x64-5.0.14.1.msi)\n\n\n\nNosql\n\n> 非关系型数据库\n\n\n### 常用命令：\n\n> 设置键过期时间  expire\n\n~~~bash\nEXPIRE key seconds\t# 秒为单位\n127.0.0.1:6379> set key1 wangweijun\nOK\n127.0.0.1:6379> keys *\n1) \"key1\"\n127.0.0.1:6379> EXPIRE key1 10\t# 设置10s后过期\n(integer) 1\n127.0.0.1:6379> keys *\n(empty list or set)\t\t# key1在10s后被删除\n~~~\n\n\n\n> 清空所有数据库\n\n~~~bash\nflushdb\n~~~\n\n\n\n## 五大数据类型\n\n\n\n### Redis-key\n\n\n\n\n\n\n### String（字符串）\n\n\n\n\n### List（列表）\n\n在redis里面，我们可以把**list**当成，栈、队列、阻塞队列\n\n~~~bash\n#############################################################################\n127.0.0.1:6379> LPUSH list one\t# 将一个值或者多个值，插入到列表头部（左）\n(integer) 1\n127.0.0.1:6379> lpush list two\n(integer) 2\n127.0.0.1:6379> LPUSH list three\n(integer) 3\n127.0.0.1:6379> LRANGE list\n(error) ERR wrong number of arguments for 'lrange' command\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"three\"\n2) \"two\"\n3) \"one\"\n127.0.0.1:6379> LRANGE list 0 1\n1) \"three\"\n2) \"two\"\n127.0.0.1:6379> RPUSH list right\t# 将一个值或者多个值，插入到列表尾部（右）\n(integer) 4\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"three\"\n2) \"two\"\n3) \"one\"\n4) \"right\"\n#############################################################################\n127.0.0.1:6379> Lpop list\t# 移除list的第一个元素\n\"three\"\n127.0.0.1:6379> RPOP list\t# 移除list最后一个元素\n\"right\"\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"two\"\n2) \"one\"\n#############################################################################\nLindex\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"two\"\n2) \"one\"\n127.0.0.1:6379> lindex list 0\t# 通过下标获取 list 中的某一个值\n\"two\"\n127.0.0.1:6379> lindex list 1\n\"one\"\n\n#############################################################################\nLlen\n127.0.0.1:6379> Lpush list one\n(integer) 1\n127.0.0.1:6379> Lpush list two\n(integer) 2\n127.0.0.1:6379> LPUSH list three\n(integer) 3\n127.0.0.1:6379> Llen list\t# 返回列表的长度\n(integer) 3\n\n#############################################################################\n移除某一个值 Lrem\n127.0.0.1:6379> lpush list three\n(integer) 4\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"three\"\n2) \"three\"\n3) \"two\"\n4) \"one\"\n127.0.0.1:6379> lrem list 1 one\n(integer) 1\n127.0.0.1:6379>  LRANGE list 0 -1\n1) \"three\"\n2) \"three\"\n3) \"two\"\n127.0.0.1:6379>  LRANGE list 0 -1\n1) \"three\"\n2) \"three\"\n3) \"two\"\n\n127.0.0.1:6379> lrem list 2 three\t# 移除了2个three\n(integer) 2\n127.0.0.1:6379> LRANGE list 0 -1\n1) \"two\"\n\n#############################################################################\ntrim 修剪\n127.0.0.1:6379> RPUSH mylist \"Hello\"\n(integer) 1\n127.0.0.1:6379> RPUSH mylist \"Hello01\"\n(integer) 2\n127.0.0.1:6379> RPUSH mylist \"Hello02\"\n(integer) 3\n127.0.0.1:6379> RPUSH mylist \"Hello03\"\n(integer) 4\n127.0.0.1:6379> ltrim mylist 1 2\t# 通过下标截取指定的长度，这个list已经改变了，截断了只剩下截取的元素1\nOK\n127.0.0.1:6379> Lrange mylist 0 -1\n1) \"Hello01\"\n2) \"Hello02\"\n#############################################################################\nrpop lpush\n127.0.0.1:6379> LRANGE mylist 0 -1\n1) \"Hello\"\n2) \"Hello01\"\n3) \"Hello02\"\n4) \"Hello03\"\n127.0.0.1:6379> rpoplpush mylist myotherlist\t# 移除列表的最后一个元素，将它移动到新的列表中！\n\"Hello03\"\n127.0.0.1:6379> LRANGE mylist 0 -1\t# 查看原来的列表\n1) \"Hello\"\n2) \"Hello01\"\n3) \"Hello02\"\n127.0.0.1:6379> LRANGE myotherlist 0 -1\t\t# 查看目标列表中，确实存在该值！\n1) \"Hello03\"\n\n#############################################################################\nlset\t将列表中指定下标的值替换为另外一个值，更新操作\n127.0.0.1:6379> exists list\t\t# 判断这个列表是否存在\n(integer) 0\n127.0.0.1:6379> lset list 0 item\t# 如果不存在列表我们去更新就会报错\n(error) ERR no such key\n127.0.0.1:6379> lpush list value1\n(integer) 1\n127.0.0.1:6379> lrange list 0 0\t\t# 如果存在，更新当前下标的值\n1) \"value1\"\n127.0.0.1:6379> lset list 0 item\nOK\n127.0.0.1:6379> Lrange list 0 0\n1) \"item\"\n127.0.0.1:6379> lset list 1 value\n(error) ERR index out of range\n~~~\n\n\n\n\n\n### Set（集合）\n\n\n\n\n\n\n\n### Hash（哈希）\n\nMap集合，key-map 这个值是一个map集合！\n\n> hset key field value\n\n~~~bash\n127.0.0.1:6379> hset myhash field1 wangweijun\n(integer) 1\n127.0.0.1:6379> hget myhash field1\n\"wangweijun\"\n127.0.0.1:6379> hmset myhash field1 hello field2 world\nOK\n127.0.0.1:6379> hmget myhash field1 field2\n1) \"hello\"\n2) \"world\"\n~~~\n\n\n\n\n\n## Jedis\n\n### Redis.conf详解\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n### Redis持久化\n\nRedis是内存数据库，如果不将内存中的数据库状态保存到磁盘，那么一旦服务器进程退出，服务器中的数据库状态也会消失，所以Redis提供了持久化功能！\n\n\n\n#### RDB（Redis DataBase）\n\n> 什么是RDB\n\n\n\n\n\n\n\n#### AOF（Append Only File）\n\n将我们的所有命令都记录下来，history，恢复的时候就把这个文件全部执行一遍！\n\n> AOF\n\n\n\n### Redis发布订阅\n\nRedis发布订阅（pub/sub）是一种==消息通信模式==：发送者（pub），订阅者（sub）接收消息。\n\nRedis客户端可以订阅任意数量的频道。\n\n\n\n### Redis主从复制\n\n\n\n\n\n\n\n\n\n### Redis缓存穿透和雪崩\n\n\n\n## Redis 数据备份与恢复\n\n**备份数据**\n\nredis Save 命令基本语法如下：\n\n~~~bash\n127.0.0.1:6379> SAVE\nOK\n~~~\n\n该命令将在 redis 安装目录中创建dump.rdb文件。\n\n\n\n**恢复数据**\n\n登录目标redis服务器，我们先**停止redis服务**：\n\n~~~bash\nservice redis stop  #停止redis服务\n~~~\n\n然后进入redis的文件存放目录redis,把刚刚备份的dump.rdb文件替换该目录下的dump.rdb文件（建议先备份当前目录下的dump.rdb文件），**重启redis服务**\n\n~~~bash\nservice redis start #启动redis服务\n~~~\n\n到此，redis数据迁移完成\n\n> 获取\n\n获取 redis 目录可以使用 **CONFIG** 命令，如下所示：\n\n~~~bash\nredis 127.0.0.1:6379> CONFIG GET dir\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Redis","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clhje45za0001qc9h3n1e339a","content":"<h2 id=\"windows安装\"><a class=\"markdownIt-Anchor\" href=\"#windows安装\"></a> windows安装</h2>\n<p><a href=\"https://github.com/tporadowski/redis/releases\">Releases · tporadowski/redis (github.com)</a></p>\n<p>点击安装<a href=\"https://github.com/tporadowski/redis/releases/download/v5.0.14.1/Redis-x64-5.0.14.1.msi\">Redis-x64-5.0.14.1.msi</a></p>\n<p>Nosql</p>\n<blockquote>\n<p>非关系型数据库</p>\n</blockquote>\n<h3 id=\"常用命令\"><a class=\"markdownIt-Anchor\" href=\"#常用命令\"></a> 常用命令：</h3>\n<blockquote>\n<p>设置键过期时间  expire</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPIRE key seconds\t<span class=\"comment\"># 秒为单位</span></span><br><span class=\"line\">127.0.0.1:6379&gt; <span class=\"built_in\">set</span> key1 wangweijun</span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; keys *</span><br><span class=\"line\">1) <span class=\"string\">&quot;key1&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; EXPIRE key1 10\t<span class=\"comment\"># 设置10s后过期</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; keys *</span><br><span class=\"line\">(empty list or <span class=\"built_in\">set</span>)\t\t<span class=\"comment\"># key1在10s后被删除</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>清空所有数据库</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flushdb</span><br></pre></td></tr></table></figure>\n<h2 id=\"五大数据类型\"><a class=\"markdownIt-Anchor\" href=\"#五大数据类型\"></a> 五大数据类型</h2>\n<h3 id=\"redis-key\"><a class=\"markdownIt-Anchor\" href=\"#redis-key\"></a> Redis-key</h3>\n<h3 id=\"string字符串\"><a class=\"markdownIt-Anchor\" href=\"#string字符串\"></a> String（字符串）</h3>\n<h3 id=\"list列表\"><a class=\"markdownIt-Anchor\" href=\"#list列表\"></a> List（列表）</h3>\n<p>在redis里面，我们可以把<strong>list</strong>当成，栈、队列、阻塞队列</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LPUSH list one\t<span class=\"comment\"># 将一个值或者多个值，插入到列表头部（左）</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; lpush list two</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">127.0.0.1:6379&gt; LPUSH list three</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list</span><br><span class=\"line\">(error) ERR wrong number of arguments <span class=\"keyword\">for</span> <span class=\"string\">&#x27;lrange&#x27;</span> <span class=\"built_in\">command</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH list right\t<span class=\"comment\"># 将一个值或者多个值，插入到列表尾部（右）</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\">4) <span class=\"string\">&quot;right&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">127.0.0.1:6379&gt; Lpop list\t<span class=\"comment\"># 移除list的第一个元素</span></span><br><span class=\"line\"><span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; RPOP list\t<span class=\"comment\"># 移除list最后一个元素</span></span><br><span class=\"line\"><span class=\"string\">&quot;right&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">Lindex</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lindex list 0\t<span class=\"comment\"># 通过下标获取 list 中的某一个值</span></span><br><span class=\"line\"><span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lindex list 1</span><br><span class=\"line\"><span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">Llen</span><br><span class=\"line\">127.0.0.1:6379&gt; Lpush list one</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; Lpush list two</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">127.0.0.1:6379&gt; LPUSH list three</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">127.0.0.1:6379&gt; Llen list\t<span class=\"comment\"># 返回列表的长度</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">移除某一个值 Lrem</span><br><span class=\"line\">127.0.0.1:6379&gt; lpush list three</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">4) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lrem list 1 one</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt;  LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt;  LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">127.0.0.1:6379&gt; lrem list 2 three\t<span class=\"comment\"># 移除了2个three</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">trim 修剪</span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH mylist <span class=\"string\">&quot;Hello&quot;</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH mylist <span class=\"string\">&quot;Hello01&quot;</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH mylist <span class=\"string\">&quot;Hello02&quot;</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH mylist <span class=\"string\">&quot;Hello03&quot;</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">127.0.0.1:6379&gt; ltrim mylist 1 2\t<span class=\"comment\"># 通过下标截取指定的长度，这个list已经改变了，截断了只剩下截取的元素1</span></span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; Lrange mylist 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;Hello01&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;Hello02&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">rpop lpush</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;Hello&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;Hello01&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;Hello02&quot;</span></span><br><span class=\"line\">4) <span class=\"string\">&quot;Hello03&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; rpoplpush mylist myotherlist\t<span class=\"comment\"># 移除列表的最后一个元素，将它移动到新的列表中！</span></span><br><span class=\"line\"><span class=\"string\">&quot;Hello03&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE mylist 0 -1\t<span class=\"comment\"># 查看原来的列表</span></span><br><span class=\"line\">1) <span class=\"string\">&quot;Hello&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;Hello01&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;Hello02&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE myotherlist 0 -1\t\t<span class=\"comment\"># 查看目标列表中，确实存在该值！</span></span><br><span class=\"line\">1) <span class=\"string\">&quot;Hello03&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">lset\t将列表中指定下标的值替换为另外一个值，更新操作</span><br><span class=\"line\">127.0.0.1:6379&gt; exists list\t\t<span class=\"comment\"># 判断这个列表是否存在</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 0</span><br><span class=\"line\">127.0.0.1:6379&gt; lset list 0 item\t<span class=\"comment\"># 如果不存在列表我们去更新就会报错</span></span><br><span class=\"line\">(error) ERR no such key</span><br><span class=\"line\">127.0.0.1:6379&gt; lpush list value1</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; lrange list 0 0\t\t<span class=\"comment\"># 如果存在，更新当前下标的值</span></span><br><span class=\"line\">1) <span class=\"string\">&quot;value1&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lset list 0 item</span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; Lrange list 0 0</span><br><span class=\"line\">1) <span class=\"string\">&quot;item&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lset list 1 value</span><br><span class=\"line\">(error) ERR index out of range</span><br></pre></td></tr></table></figure>\n<h3 id=\"set集合\"><a class=\"markdownIt-Anchor\" href=\"#set集合\"></a> Set（集合）</h3>\n<h3 id=\"hash哈希\"><a class=\"markdownIt-Anchor\" href=\"#hash哈希\"></a> Hash（哈希）</h3>\n<p>Map集合，key-map 这个值是一个map集合！</p>\n<blockquote>\n<p>hset key field value</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1:6379&gt; hset myhash field1 wangweijun</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; hget myhash field1</span><br><span class=\"line\"><span class=\"string\">&quot;wangweijun&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; hmset myhash field1 hello field2 world</span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; hmget myhash field1 field2</span><br><span class=\"line\">1) <span class=\"string\">&quot;hello&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;world&quot;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"jedis\"><a class=\"markdownIt-Anchor\" href=\"#jedis\"></a> Jedis</h2>\n<h3 id=\"redisconf详解\"><a class=\"markdownIt-Anchor\" href=\"#redisconf详解\"></a> Redis.conf详解</h3>\n<h3 id=\"redis持久化\"><a class=\"markdownIt-Anchor\" href=\"#redis持久化\"></a> Redis持久化</h3>\n<p>Redis是内存数据库，如果不将内存中的数据库状态保存到磁盘，那么一旦服务器进程退出，服务器中的数据库状态也会消失，所以Redis提供了持久化功能！</p>\n<h4 id=\"rdbredis-database\"><a class=\"markdownIt-Anchor\" href=\"#rdbredis-database\"></a> RDB（Redis DataBase）</h4>\n<blockquote>\n<p>什么是RDB</p>\n</blockquote>\n<h4 id=\"aofappend-only-file\"><a class=\"markdownIt-Anchor\" href=\"#aofappend-only-file\"></a> AOF（Append Only File）</h4>\n<p>将我们的所有命令都记录下来，history，恢复的时候就把这个文件全部执行一遍！</p>\n<blockquote>\n<p>AOF</p>\n</blockquote>\n<h3 id=\"redis发布订阅\"><a class=\"markdownIt-Anchor\" href=\"#redis发布订阅\"></a> Redis发布订阅</h3>\n<p>Redis发布订阅（pub/sub）是一种<mark>消息通信模式</mark>：发送者（pub），订阅者（sub）接收消息。</p>\n<p>Redis客户端可以订阅任意数量的频道。</p>\n<h3 id=\"redis主从复制\"><a class=\"markdownIt-Anchor\" href=\"#redis主从复制\"></a> Redis主从复制</h3>\n<h3 id=\"redis缓存穿透和雪崩\"><a class=\"markdownIt-Anchor\" href=\"#redis缓存穿透和雪崩\"></a> Redis缓存穿透和雪崩</h3>\n<h2 id=\"redis-数据备份与恢复\"><a class=\"markdownIt-Anchor\" href=\"#redis-数据备份与恢复\"></a> Redis 数据备份与恢复</h2>\n<p><strong>备份数据</strong></p>\n<p>redis Save 命令基本语法如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1:6379&gt; SAVE</span><br><span class=\"line\">OK</span><br></pre></td></tr></table></figure>\n<p>该命令将在 redis 安装目录中创建dump.rdb文件。</p>\n<p><strong>恢复数据</strong></p>\n<p>登录目标redis服务器，我们先<strong>停止redis服务</strong>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service redis stop  <span class=\"comment\">#停止redis服务</span></span><br></pre></td></tr></table></figure>\n<p>然后进入redis的文件存放目录redis,把刚刚备份的dump.rdb文件替换该目录下的dump.rdb文件（建议先备份当前目录下的dump.rdb文件），<strong>重启redis服务</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service redis start <span class=\"comment\">#启动redis服务</span></span><br></pre></td></tr></table></figure>\n<p>到此，redis数据迁移完成</p>\n<blockquote>\n<p>获取</p>\n</blockquote>\n<p>获取 redis 目录可以使用 <strong>CONFIG</strong> 命令，如下所示：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis 127.0.0.1:6379&gt; CONFIG GET <span class=\"built_in\">dir</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/30/12/15/rock-formations-7960445_960_720.jpg","cover_type":"img","excerpt":"","more":"<h2 id=\"windows安装\"><a class=\"markdownIt-Anchor\" href=\"#windows安装\"></a> windows安装</h2>\n<p><a href=\"https://github.com/tporadowski/redis/releases\">Releases · tporadowski/redis (github.com)</a></p>\n<p>点击安装<a href=\"https://github.com/tporadowski/redis/releases/download/v5.0.14.1/Redis-x64-5.0.14.1.msi\">Redis-x64-5.0.14.1.msi</a></p>\n<p>Nosql</p>\n<blockquote>\n<p>非关系型数据库</p>\n</blockquote>\n<h3 id=\"常用命令\"><a class=\"markdownIt-Anchor\" href=\"#常用命令\"></a> 常用命令：</h3>\n<blockquote>\n<p>设置键过期时间  expire</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPIRE key seconds\t<span class=\"comment\"># 秒为单位</span></span><br><span class=\"line\">127.0.0.1:6379&gt; <span class=\"built_in\">set</span> key1 wangweijun</span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; keys *</span><br><span class=\"line\">1) <span class=\"string\">&quot;key1&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; EXPIRE key1 10\t<span class=\"comment\"># 设置10s后过期</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; keys *</span><br><span class=\"line\">(empty list or <span class=\"built_in\">set</span>)\t\t<span class=\"comment\"># key1在10s后被删除</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>清空所有数据库</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flushdb</span><br></pre></td></tr></table></figure>\n<h2 id=\"五大数据类型\"><a class=\"markdownIt-Anchor\" href=\"#五大数据类型\"></a> 五大数据类型</h2>\n<h3 id=\"redis-key\"><a class=\"markdownIt-Anchor\" href=\"#redis-key\"></a> Redis-key</h3>\n<h3 id=\"string字符串\"><a class=\"markdownIt-Anchor\" href=\"#string字符串\"></a> String（字符串）</h3>\n<h3 id=\"list列表\"><a class=\"markdownIt-Anchor\" href=\"#list列表\"></a> List（列表）</h3>\n<p>在redis里面，我们可以把<strong>list</strong>当成，栈、队列、阻塞队列</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LPUSH list one\t<span class=\"comment\"># 将一个值或者多个值，插入到列表头部（左）</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; lpush list two</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">127.0.0.1:6379&gt; LPUSH list three</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list</span><br><span class=\"line\">(error) ERR wrong number of arguments <span class=\"keyword\">for</span> <span class=\"string\">&#x27;lrange&#x27;</span> <span class=\"built_in\">command</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH list right\t<span class=\"comment\"># 将一个值或者多个值，插入到列表尾部（右）</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\">4) <span class=\"string\">&quot;right&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">127.0.0.1:6379&gt; Lpop list\t<span class=\"comment\"># 移除list的第一个元素</span></span><br><span class=\"line\"><span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; RPOP list\t<span class=\"comment\"># 移除list最后一个元素</span></span><br><span class=\"line\"><span class=\"string\">&quot;right&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">Lindex</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lindex list 0\t<span class=\"comment\"># 通过下标获取 list 中的某一个值</span></span><br><span class=\"line\"><span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lindex list 1</span><br><span class=\"line\"><span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">Llen</span><br><span class=\"line\">127.0.0.1:6379&gt; Lpush list one</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; Lpush list two</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">127.0.0.1:6379&gt; LPUSH list three</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">127.0.0.1:6379&gt; Llen list\t<span class=\"comment\"># 返回列表的长度</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">移除某一个值 Lrem</span><br><span class=\"line\">127.0.0.1:6379&gt; lpush list three</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">4) <span class=\"string\">&quot;one&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lrem list 1 one</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt;  LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt;  LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;three&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">127.0.0.1:6379&gt; lrem list 2 three\t<span class=\"comment\"># 移除了2个three</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE list 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;two&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">trim 修剪</span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH mylist <span class=\"string\">&quot;Hello&quot;</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH mylist <span class=\"string\">&quot;Hello01&quot;</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH mylist <span class=\"string\">&quot;Hello02&quot;</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">127.0.0.1:6379&gt; RPUSH mylist <span class=\"string\">&quot;Hello03&quot;</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">127.0.0.1:6379&gt; ltrim mylist 1 2\t<span class=\"comment\"># 通过下标截取指定的长度，这个list已经改变了，截断了只剩下截取的元素1</span></span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; Lrange mylist 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;Hello01&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;Hello02&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">rpop lpush</span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class=\"line\">1) <span class=\"string\">&quot;Hello&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;Hello01&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;Hello02&quot;</span></span><br><span class=\"line\">4) <span class=\"string\">&quot;Hello03&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; rpoplpush mylist myotherlist\t<span class=\"comment\"># 移除列表的最后一个元素，将它移动到新的列表中！</span></span><br><span class=\"line\"><span class=\"string\">&quot;Hello03&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE mylist 0 -1\t<span class=\"comment\"># 查看原来的列表</span></span><br><span class=\"line\">1) <span class=\"string\">&quot;Hello&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;Hello01&quot;</span></span><br><span class=\"line\">3) <span class=\"string\">&quot;Hello02&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; LRANGE myotherlist 0 -1\t\t<span class=\"comment\"># 查看目标列表中，确实存在该值！</span></span><br><span class=\"line\">1) <span class=\"string\">&quot;Hello03&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#############################################################################</span></span><br><span class=\"line\">lset\t将列表中指定下标的值替换为另外一个值，更新操作</span><br><span class=\"line\">127.0.0.1:6379&gt; exists list\t\t<span class=\"comment\"># 判断这个列表是否存在</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 0</span><br><span class=\"line\">127.0.0.1:6379&gt; lset list 0 item\t<span class=\"comment\"># 如果不存在列表我们去更新就会报错</span></span><br><span class=\"line\">(error) ERR no such key</span><br><span class=\"line\">127.0.0.1:6379&gt; lpush list value1</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; lrange list 0 0\t\t<span class=\"comment\"># 如果存在，更新当前下标的值</span></span><br><span class=\"line\">1) <span class=\"string\">&quot;value1&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lset list 0 item</span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; Lrange list 0 0</span><br><span class=\"line\">1) <span class=\"string\">&quot;item&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; lset list 1 value</span><br><span class=\"line\">(error) ERR index out of range</span><br></pre></td></tr></table></figure>\n<h3 id=\"set集合\"><a class=\"markdownIt-Anchor\" href=\"#set集合\"></a> Set（集合）</h3>\n<h3 id=\"hash哈希\"><a class=\"markdownIt-Anchor\" href=\"#hash哈希\"></a> Hash（哈希）</h3>\n<p>Map集合，key-map 这个值是一个map集合！</p>\n<blockquote>\n<p>hset key field value</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1:6379&gt; hset myhash field1 wangweijun</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">127.0.0.1:6379&gt; hget myhash field1</span><br><span class=\"line\"><span class=\"string\">&quot;wangweijun&quot;</span></span><br><span class=\"line\">127.0.0.1:6379&gt; hmset myhash field1 hello field2 world</span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; hmget myhash field1 field2</span><br><span class=\"line\">1) <span class=\"string\">&quot;hello&quot;</span></span><br><span class=\"line\">2) <span class=\"string\">&quot;world&quot;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"jedis\"><a class=\"markdownIt-Anchor\" href=\"#jedis\"></a> Jedis</h2>\n<h3 id=\"redisconf详解\"><a class=\"markdownIt-Anchor\" href=\"#redisconf详解\"></a> Redis.conf详解</h3>\n<h3 id=\"redis持久化\"><a class=\"markdownIt-Anchor\" href=\"#redis持久化\"></a> Redis持久化</h3>\n<p>Redis是内存数据库，如果不将内存中的数据库状态保存到磁盘，那么一旦服务器进程退出，服务器中的数据库状态也会消失，所以Redis提供了持久化功能！</p>\n<h4 id=\"rdbredis-database\"><a class=\"markdownIt-Anchor\" href=\"#rdbredis-database\"></a> RDB（Redis DataBase）</h4>\n<blockquote>\n<p>什么是RDB</p>\n</blockquote>\n<h4 id=\"aofappend-only-file\"><a class=\"markdownIt-Anchor\" href=\"#aofappend-only-file\"></a> AOF（Append Only File）</h4>\n<p>将我们的所有命令都记录下来，history，恢复的时候就把这个文件全部执行一遍！</p>\n<blockquote>\n<p>AOF</p>\n</blockquote>\n<h3 id=\"redis发布订阅\"><a class=\"markdownIt-Anchor\" href=\"#redis发布订阅\"></a> Redis发布订阅</h3>\n<p>Redis发布订阅（pub/sub）是一种<mark>消息通信模式</mark>：发送者（pub），订阅者（sub）接收消息。</p>\n<p>Redis客户端可以订阅任意数量的频道。</p>\n<h3 id=\"redis主从复制\"><a class=\"markdownIt-Anchor\" href=\"#redis主从复制\"></a> Redis主从复制</h3>\n<h3 id=\"redis缓存穿透和雪崩\"><a class=\"markdownIt-Anchor\" href=\"#redis缓存穿透和雪崩\"></a> Redis缓存穿透和雪崩</h3>\n<h2 id=\"redis-数据备份与恢复\"><a class=\"markdownIt-Anchor\" href=\"#redis-数据备份与恢复\"></a> Redis 数据备份与恢复</h2>\n<p><strong>备份数据</strong></p>\n<p>redis Save 命令基本语法如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1:6379&gt; SAVE</span><br><span class=\"line\">OK</span><br></pre></td></tr></table></figure>\n<p>该命令将在 redis 安装目录中创建dump.rdb文件。</p>\n<p><strong>恢复数据</strong></p>\n<p>登录目标redis服务器，我们先<strong>停止redis服务</strong>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service redis stop  <span class=\"comment\">#停止redis服务</span></span><br></pre></td></tr></table></figure>\n<p>然后进入redis的文件存放目录redis,把刚刚备份的dump.rdb文件替换该目录下的dump.rdb文件（建议先备份当前目录下的dump.rdb文件），<strong>重启redis服务</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service redis start <span class=\"comment\">#启动redis服务</span></span><br></pre></td></tr></table></figure>\n<p>到此，redis数据迁移完成</p>\n<blockquote>\n<p>获取</p>\n</blockquote>\n<p>获取 redis 目录可以使用 <strong>CONFIG</strong> 命令，如下所示：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis 127.0.0.1:6379&gt; CONFIG GET <span class=\"built_in\">dir</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker","description":null,"date":"2023-05-11T17:00:00.000Z","updated":"2023-05-11T17:00:00.000Z","swiper_index":1,"_content":"\n\nDocker通过隔离机制，可以将服务器利用到了极致。\n\n> 容器化技术\n\n==容器化技术不是模拟的一个完整的操作系统==\n\n\n\n## Docker基本组成\n\n**镜像（image）：**\n\ndocker镜像好比一个模板，可以通过这个模板来创建容器服务，tomcat镜像==>》run ==》 tomcat01容器（提供服务器），通过这个镜像可以创建多个容器（最终服务运行或者项目运行就是在容器中）。\n\n**容器（container）：**\n\nDocker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。\n\n启动，停止，删除，基本命令！\n\n**仓库（repository）：**\n\n仓库就是存放镜像的地方！\n\n\n\n\n\n## Docker安装\n\n> 环境准备 CentOS 7\n\n\n\n> 环境查看\n\n~~~shell\n# 系统内核是 3.10 以上的\n[root@Wang /]# uname -r\n3.10.0-957.21.3.el7.x86_64\n\n~~~\n\n~~~shell\n# 系统环境\n[root@Wang /]# cat /etc/os-release\nNAME=\"CentOS Linux\"\nVERSION=\"7 (Core)\"\nID=\"centos\"\nID_LIKE=\"rhel fedora\"\nVERSION_ID=\"7\"\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:centos:centos:7\"\nHOME_URL=\"https://www.centos.org/\"\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\n\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT=\"centos\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n\n~~~\n\n\n\n## 安装\n\n帮助文档：\n\n~~~shell\n# 1、卸载旧的版本\nyum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n\n# 2、需要的安装包\nyum install -y yum-utils\n\n# 3、设置镜像仓库\nyum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo  # 默认是从国外的！\n\nyum-config-manager \\\n    --add-repo \\\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # 推荐使用阿里云的\n\n# 更新yum软件包索引\nyum makecache fast\n\n# 4、安装docker相关的内容 docker-ce 社区 \nyum install docker-ce docker-ce-cli containerd.io\n\n# 5、启动docker\nsystemctl start docker\n\n# 6、使用 docker version 是否安装成功！\n~~~\n\n![image-20230130172339188](../img/image-20230130172339188.png)\n\n~~~shell\n# 7、hello-world\ndocker run hello-world\n~~~\n\n![image-20230130172623721](../img/image-20230130172623721.png)\n\n~~~shell\n# 8、查看一下下载的这个hello-world镜像\n[root@Wang ~]# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nhello-world   latest    feb5d9fea6a5   16 months ago   13.3kB\n~~~\n\n了解：卸载docker\n\n~~~shell\n# 1、卸载依赖\nyum remove docker-ce docker-ce-cli containerd.io\n\n# 2、删除资源\nrm -rf /var/lib/docker\t# docker默认工作路径\nrm -rf /var/lib/containerd\n~~~\n\n\n\n## 阿里云镜像加速\n\n1、登录阿里云找到容器镜像服务\n\n![image-20230130173819786](../img/image-20230130173819786.png)\n\n2、配置使用\n\n~~~shell\nsudo mkdir -p /etc/docker\n\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://qfjygl3u.mirror.aliyuncs.com\"]\n}\nEOF\n\nsudo systemctl daemon-reload\n\nsudo systemctl restart docker\n~~~\n\n\n\n## 底层原理\n\n**Docker是怎么工作的？**\n\nDocker是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socket从客户端访问！\n\nDockerServer接受到Docker-Client的指令，就会执行这个命令！\n\n\n\n## Docker的常用命令\n\n### 帮助命令\n\n~~~shell\ndocker version\t\t# 显示docker版本信息\ndocker info\t\t\t# 显示docker的系统信息，包括镜像和容器的数量\ndocker 命令 --help  # 帮助命令\n~~~\n\n帮助文档的地址：https://docs.docker.com/reference/\n\n\n\n### 镜像命令\n\n**docker images ** 查看所有本地的主机上的镜像\n\n~~~shell\n[root@Wang ~]# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nhello-world   latest    feb5d9fea6a5   16 months ago   13.3kB\n\n# 解释\nREPOSITORY\t镜像的仓库源\nTAG\t\t\t镜像的标签\nIMAGE ID\t镜像的ID\nCREATED\t\t镜像的创建时间\nSIZE\t\t镜像的大小\n~~~\n\n**docker search** 搜索镜像\n\n~~~shell\n[root@Wang ~]# docker search mysql\nNAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nmysql                           MySQL is a widely used, open-source relation…   13741     [OK]    \nmariadb                         MariaDB Server is a high performing open sou…   5242      [OK]       \nphpmyadmin                      phpMyAdmin - A web interface for MySQL and M…   727       [OK]       \npercona                         Percona Server is a fork of the MySQL relati…   599       [OK]\n~~~\n\n**docker pull** 下载镜像\n\n~~~shell\n# 下载镜像 docker pull 镜像名:tag\n[root@Wang ~]# docker pull mysql\n\n# 指定版本下载\n[root@Wang ~]# docker pull mysql:5.7\n5.7: Pulling from library/mysql\n72a69066d2fe: Pull complete \n93619dbc5b36: Pull complete \n99da31dd6142: Pull complete \n626033c43d70: Pull complete \n37d5d7efb64e: Pull complete \nac563158d721: Pull complete \nd2ba16033dad: Pull complete \n0ceb82207cd7: Pull complete \n37f2405cae96: Pull complete \ne2482e017e53: Pull complete \n70deed891d42: Pull complete \nDigest: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94\nStatus: Downloaded newer image for mysql:5.7\ndocker.io/library/mysql:5.7\n\n~~~\n\n**docker rmi** 删除镜像\n\n~~~shell\ndocker rmi -f 镜像id\t\t# 删除指定的镜像\ndocker rmi -f 镜像id 镜像id 镜像id 镜像id\t# 删除多个镜像\n\n[root@Wang ~]# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nmysql         5.7       c20987f18b13   13 months ago   448MB\nhello-world   latest    feb5d9fea6a5   16 months ago   13.3kB\n# 删除hello-world 通过id删除\n[root@Wang ~]# docker rmi -f feb5d9fea6a5\nUntagged: hello-world:latest\nUntagged: hello-world@sha256:2498fce14358aa50ead0cc6c19990fc6ff866ce72aeb5546e1d59caac3d0d60f\nDeleted: sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412\n~~~\n\n\n\n## 容器命令\n\n说明：我们有了镜像才可以创建容器\n\n~~~shell\ndocker pull centos\n~~~\n\n新建镜像并启动\n\n~~~shell\ndocker run [可选参数] image\n\n# 参数说明\n--name=\"Name\"\t容器名字 tomcat01 tomcat02，用来区分\n-d\t\t\t\t后台方式运行\n-it\t\t\t\t使用交互方式运行，进入容器查看内容\n-p\t\t\t\t指定容器的端口\t-p 8080:8080\n\t-p 主机端口:容器端口（常用）\n\t-p 容器端口\n-P\t\t\t\t随机指定端口\n\n# 测试，启动并进入容器\n[root@Wang ~]# docker run -it centos /bin/bash\n[root@a1afe9f99dd6 /]# ls\t# 查看容器内的centos，基本版本，很多命令不完善\nbin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n\n# 从容器中退回主机\n[root@a1afe9f99dd6 /]# exit\nexit\n[root@Wang /]# ls\nbin   data  etc   lib    lost+found  mnt  patch  root  sbin  sys  usr  www\nboot  dev   home  lib64  media       opt  proc   run   srv   tmp  var\n\n\ndocker run -p 1234:1234 -it fed440038981 /bin/bash\ndocker exec -it 354e4cf9e32f /bin/bash\n\n~~~\n\n**列出所有的运行的容器**\n\n~~~shell\n# docker ps 命令\n-a\t# 列出当前正在运行的容器+带出历史运行过的容器\n\n[root@Wang ~]# docker ps -a\nCONTAINER ID   IMAGE          COMMAND       CREATED             STATUS                         PORTS     NAMES\na1afe9f99dd6   centos         \"/bin/bash\"   About an hour ago   Exited (0) About an hour ago             flamboyant_booth\n904a45d59a92   feb5d9fea6a5   \"/hello\"      5 hours ago         Exited (0) 5 hours ago                   focused_lalande\n~~~\n\n**退出容器**\n\n~~~shell\nexit\t# 容器退出并停止\nCtrl + P + Q\t# 容器不停止退出\n~~~\n\n\n\n**删除容器**\n\n~~~shell\ndocker rm 容器id\t# 删除指定的容器，不能删除正在运行的容器，如果强制删除 rm -f\ndocker rm -f $(docker ps -aq)\t# 删除所有的容器\n~~~\n\n**启动和停止容器的操作**\n\n~~~shell\ndocker start 容器id\t\t# 启动容器\ndocker restart 容器id\t\t# 重启容器\ndocker stop 容器id\t\t# 停止容器\ndocker kill 容器id\t\t# 强制停止当前容器\n~~~\n\n\n\n## 常用其他命令\n\n**后台启动容器**\n\n~~~shell\n# 命令 docker run -d 镜像名\n[root@Wang ~]# docker run -d centos\n\n# 问题docker ps，发现centos停止了\n\n# 常见的坑，容器使用后台运行后，就必须要有一个前台进程，docker发现没有应用，就会自动停止\n# nginx，容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了\n~~~\n\n**查看日志**\n\n~~~shell\ndocker logs -f -t --tail 容器\n~~~\n\n**查看容器中进程信息**ps\n\n~~~shell\ndocker top \n[root@Wang ~]# docker top 5cac1fea830f\n'UID\tPID\t\tPPID\tC\tSTIME\tTTY\t\tTIME\tCMD\nroot\t30121         30100         0          22:42               pts/0         00:00:00            /bin/bash\n\n~~~\n\n**查看镜像的元数据**\n\n~~~shell\n# 命令docker inspect 容器id\n[\n    {\n        \"Id\": \"88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe\",\n        \"Created\": \"2022-07-29T08:23:56.862239223Z\",\n        \"Path\": \"/bin/sh\",\n        \"Args\": [\n            \"-c\",\n            \"while true;do echo kuangshen;sleep 1;done\"\n        ],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 21212,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2022-07-29T08:23:57.109766809Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe-json.log\",\n        \"Name\": \"/silly_lichterman\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {},\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"CgroupnsMode\": \"host\",\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"private\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DeviceRequests\": null,\n            \"KernelMemory\": 0,\n            \"KernelMemoryTCP\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": null,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b-init/diff:/var/lib/docker/overlay2/7fc43e24b63e4656ab7e7718d3e4ef5297fe82509452be305a01605a7cdc3b97/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [],\n        \"Config\": {\n            \"Hostname\": \"88d23bcbe1f2\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": [\n                \"/bin/sh\",\n                \"-c\",\n                \"while true;do echo kuangshen;sleep 1;done\"\n            ],\n            \"Image\": \"centos\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": null,\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"org.label-schema.build-date\": \"20210915\",\n                \"org.label-schema.license\": \"GPLv2\",\n                \"org.label-schema.name\": \"CentOS Base Image\",\n                \"org.label-schema.schema-version\": \"1.0\",\n                \"org.label-schema.vendor\": \"CentOS\"\n            }\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"bfc28d2ba671adfe5c93325173b93c335d50d8b017eed4fdce2ab75410d6ac2e\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {},\n            \"SandboxKey\": \"/var/run/docker/netns/bfc28d2ba671\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"ad0252d454e751e2c5ecef24e64c32b0884c53242925bd66e9e5dbf5542af179\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.2\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:02\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"7254ffccbdf53e0c72c1d19252980f04fa65153ea3c7ca72af55cfac504cbe3f\",\n                    \"EndpointID\": \"ad0252d454e751e2c5ecef24e64c32b0884c53242925bd66e9e5dbf5542af179\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.2\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:02\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n~~~\n\n**进入当前正在运行的容器**\n\n~~~shell\n# 我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置\n# 命令\ndocker exec -it 容器id /bin/bash\n# 测试\n[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps\nCONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES\n88d23bcbe1f2   centos    \"/bin/sh -c 'while t…\"   13 minutes ago   Up 13 minutes             silly_lichterman\n[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it 88d23bcbe1f2 /bin/bash\n[root@88d23bcbe1f2 /]# ps -ef\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 08:23 ?        00:00:00 /bin/sh -c while true;do echo kuangshen;sleep 1;done\nroot       841     0  0 08:37 pts/0    00:00:00 /bin/bash\nroot       858     1  0 08:37 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1\nroot       859   841  0 08:37 pts/0    00:00:00 ps -ef\n# 方式二\ndocker attach 容器id\n# 测试\n[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker attach 88d23bcbe1f2\n正在执行当前的代码...\n\n# docker exec        # 进入容器后开启一个新的终端，可以再里面操作（常用）\n# docker attach        # 进入容器正在执行的终端，不会启动新的进程。\n~~~\n\n从容器内拷文件到主机上\n\n~~~shell\ndocker cp 容器id:容器内路径 目的主机的路径\n\n# 进入到容器内部\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker attach 6eda31ad7987\n[root@6eda31ad7987 /]# ls\nbin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n[root@6eda31ad7987 /]# cd /home/\n[root@6eda31ad7987 home]# ls\n# 在容器的/home路径下创建test.java文件\n[root@6eda31ad7987 home]# touch test.java\n[root@6eda31ad7987 home]# ls\ntest.java\n[root@6eda31ad7987 home]# exit\nexit\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps -a\nCONTAINER ID   IMAGE     COMMAND       CREATED              STATUS                      PORTS     NAMES\n6eda31ad7987   centos    \"/bin/bash\"   About a minute ago   Exited (0) 28 seconds ago             stoic_kepler\n# 将文件拷贝出来到主机上（在主机上执行该命令）\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker cp 6eda31ad7987:/home/test.java /home\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# ls\ntest.java\n# 拷贝是一个手动过程，未来我们使用 -v 卷的技术，可以实现，自动同步（容器内的/home路径和主机上的/home路径打通）\n~~~\n\n\n\n## 安装软件\n\n### 安装nginx\n\n**下载镜像**：pull\n\n~~~shell\n docker pull ngin\n~~~\n\n**启动nginx**\n\n~~~shell\n # -d 后台运行\n # --name=\"ngin\"    给容器命名\n # -p 宿主机端口:容器内部端口\n [root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker run -d --name nginx -p 3344:80 nginx\n 6e02190a50bc8d79653ffa88f6b5c143d79c5ac3257d5d5ed6a01247980fb48a\n [root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps\n CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                   NAMES\n 6e02190a50bc   nginx     \"/docker-entrypoint.…\"   18 seconds ago   Up 17 seconds   0.0.0.0:3344->80/tcp, :::3344->80/tcp   nginx-1\n # 进入容器\n [root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it a1e130aa184d /bin/bash\n root@a1e130aa184d:/# whereis nginx\n nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx\n root@a1e130aa184d:/# cd /etc/nginx/\n root@a1e130aa184d:/etc/nginx# ls\n conf.d  fastcgi_params  mime.types  modules  nginx.conf  scgi_params  uwsgi_params\n~~~\n\n**本机测试**\n\n~~~shell\n[root@Wang ~]# curl localhost:3344\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\nhtml { color-scheme: light dark; }\nbody { width: 35em; margin: 0 auto;\nfont-family: Tahoma, Verdana, Arial, sans-serif; }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.</p>\n\n<p>For online documentation and support please refer to\n<a href=\"http://nginx.org/\">nginx.org</a>.<br/>\nCommercial support is available at\n<a href=\"http://nginx.com/\">nginx.com</a>.</p>\n\n<p><em>Thank you for using nginx.</em></p>\n</body>\n</html>\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/Docker.md","raw":"---\ntitle: Docker\ndescription:\ndate: 2023-05-12 1:0:00\nupdated: 2023-05-12 1:0:00\ntags:\n  - Docker\ncategories:\n  - 技术栈\nswiper_index: 1 # 置顶权重\n---\n\n\nDocker通过隔离机制，可以将服务器利用到了极致。\n\n> 容器化技术\n\n==容器化技术不是模拟的一个完整的操作系统==\n\n\n\n## Docker基本组成\n\n**镜像（image）：**\n\ndocker镜像好比一个模板，可以通过这个模板来创建容器服务，tomcat镜像==>》run ==》 tomcat01容器（提供服务器），通过这个镜像可以创建多个容器（最终服务运行或者项目运行就是在容器中）。\n\n**容器（container）：**\n\nDocker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。\n\n启动，停止，删除，基本命令！\n\n**仓库（repository）：**\n\n仓库就是存放镜像的地方！\n\n\n\n\n\n## Docker安装\n\n> 环境准备 CentOS 7\n\n\n\n> 环境查看\n\n~~~shell\n# 系统内核是 3.10 以上的\n[root@Wang /]# uname -r\n3.10.0-957.21.3.el7.x86_64\n\n~~~\n\n~~~shell\n# 系统环境\n[root@Wang /]# cat /etc/os-release\nNAME=\"CentOS Linux\"\nVERSION=\"7 (Core)\"\nID=\"centos\"\nID_LIKE=\"rhel fedora\"\nVERSION_ID=\"7\"\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:centos:centos:7\"\nHOME_URL=\"https://www.centos.org/\"\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\n\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT=\"centos\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n\n~~~\n\n\n\n## 安装\n\n帮助文档：\n\n~~~shell\n# 1、卸载旧的版本\nyum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n\n# 2、需要的安装包\nyum install -y yum-utils\n\n# 3、设置镜像仓库\nyum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo  # 默认是从国外的！\n\nyum-config-manager \\\n    --add-repo \\\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # 推荐使用阿里云的\n\n# 更新yum软件包索引\nyum makecache fast\n\n# 4、安装docker相关的内容 docker-ce 社区 \nyum install docker-ce docker-ce-cli containerd.io\n\n# 5、启动docker\nsystemctl start docker\n\n# 6、使用 docker version 是否安装成功！\n~~~\n\n![image-20230130172339188](../img/image-20230130172339188.png)\n\n~~~shell\n# 7、hello-world\ndocker run hello-world\n~~~\n\n![image-20230130172623721](../img/image-20230130172623721.png)\n\n~~~shell\n# 8、查看一下下载的这个hello-world镜像\n[root@Wang ~]# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nhello-world   latest    feb5d9fea6a5   16 months ago   13.3kB\n~~~\n\n了解：卸载docker\n\n~~~shell\n# 1、卸载依赖\nyum remove docker-ce docker-ce-cli containerd.io\n\n# 2、删除资源\nrm -rf /var/lib/docker\t# docker默认工作路径\nrm -rf /var/lib/containerd\n~~~\n\n\n\n## 阿里云镜像加速\n\n1、登录阿里云找到容器镜像服务\n\n![image-20230130173819786](../img/image-20230130173819786.png)\n\n2、配置使用\n\n~~~shell\nsudo mkdir -p /etc/docker\n\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://qfjygl3u.mirror.aliyuncs.com\"]\n}\nEOF\n\nsudo systemctl daemon-reload\n\nsudo systemctl restart docker\n~~~\n\n\n\n## 底层原理\n\n**Docker是怎么工作的？**\n\nDocker是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socket从客户端访问！\n\nDockerServer接受到Docker-Client的指令，就会执行这个命令！\n\n\n\n## Docker的常用命令\n\n### 帮助命令\n\n~~~shell\ndocker version\t\t# 显示docker版本信息\ndocker info\t\t\t# 显示docker的系统信息，包括镜像和容器的数量\ndocker 命令 --help  # 帮助命令\n~~~\n\n帮助文档的地址：https://docs.docker.com/reference/\n\n\n\n### 镜像命令\n\n**docker images ** 查看所有本地的主机上的镜像\n\n~~~shell\n[root@Wang ~]# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nhello-world   latest    feb5d9fea6a5   16 months ago   13.3kB\n\n# 解释\nREPOSITORY\t镜像的仓库源\nTAG\t\t\t镜像的标签\nIMAGE ID\t镜像的ID\nCREATED\t\t镜像的创建时间\nSIZE\t\t镜像的大小\n~~~\n\n**docker search** 搜索镜像\n\n~~~shell\n[root@Wang ~]# docker search mysql\nNAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nmysql                           MySQL is a widely used, open-source relation…   13741     [OK]    \nmariadb                         MariaDB Server is a high performing open sou…   5242      [OK]       \nphpmyadmin                      phpMyAdmin - A web interface for MySQL and M…   727       [OK]       \npercona                         Percona Server is a fork of the MySQL relati…   599       [OK]\n~~~\n\n**docker pull** 下载镜像\n\n~~~shell\n# 下载镜像 docker pull 镜像名:tag\n[root@Wang ~]# docker pull mysql\n\n# 指定版本下载\n[root@Wang ~]# docker pull mysql:5.7\n5.7: Pulling from library/mysql\n72a69066d2fe: Pull complete \n93619dbc5b36: Pull complete \n99da31dd6142: Pull complete \n626033c43d70: Pull complete \n37d5d7efb64e: Pull complete \nac563158d721: Pull complete \nd2ba16033dad: Pull complete \n0ceb82207cd7: Pull complete \n37f2405cae96: Pull complete \ne2482e017e53: Pull complete \n70deed891d42: Pull complete \nDigest: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94\nStatus: Downloaded newer image for mysql:5.7\ndocker.io/library/mysql:5.7\n\n~~~\n\n**docker rmi** 删除镜像\n\n~~~shell\ndocker rmi -f 镜像id\t\t# 删除指定的镜像\ndocker rmi -f 镜像id 镜像id 镜像id 镜像id\t# 删除多个镜像\n\n[root@Wang ~]# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nmysql         5.7       c20987f18b13   13 months ago   448MB\nhello-world   latest    feb5d9fea6a5   16 months ago   13.3kB\n# 删除hello-world 通过id删除\n[root@Wang ~]# docker rmi -f feb5d9fea6a5\nUntagged: hello-world:latest\nUntagged: hello-world@sha256:2498fce14358aa50ead0cc6c19990fc6ff866ce72aeb5546e1d59caac3d0d60f\nDeleted: sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412\n~~~\n\n\n\n## 容器命令\n\n说明：我们有了镜像才可以创建容器\n\n~~~shell\ndocker pull centos\n~~~\n\n新建镜像并启动\n\n~~~shell\ndocker run [可选参数] image\n\n# 参数说明\n--name=\"Name\"\t容器名字 tomcat01 tomcat02，用来区分\n-d\t\t\t\t后台方式运行\n-it\t\t\t\t使用交互方式运行，进入容器查看内容\n-p\t\t\t\t指定容器的端口\t-p 8080:8080\n\t-p 主机端口:容器端口（常用）\n\t-p 容器端口\n-P\t\t\t\t随机指定端口\n\n# 测试，启动并进入容器\n[root@Wang ~]# docker run -it centos /bin/bash\n[root@a1afe9f99dd6 /]# ls\t# 查看容器内的centos，基本版本，很多命令不完善\nbin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n\n# 从容器中退回主机\n[root@a1afe9f99dd6 /]# exit\nexit\n[root@Wang /]# ls\nbin   data  etc   lib    lost+found  mnt  patch  root  sbin  sys  usr  www\nboot  dev   home  lib64  media       opt  proc   run   srv   tmp  var\n\n\ndocker run -p 1234:1234 -it fed440038981 /bin/bash\ndocker exec -it 354e4cf9e32f /bin/bash\n\n~~~\n\n**列出所有的运行的容器**\n\n~~~shell\n# docker ps 命令\n-a\t# 列出当前正在运行的容器+带出历史运行过的容器\n\n[root@Wang ~]# docker ps -a\nCONTAINER ID   IMAGE          COMMAND       CREATED             STATUS                         PORTS     NAMES\na1afe9f99dd6   centos         \"/bin/bash\"   About an hour ago   Exited (0) About an hour ago             flamboyant_booth\n904a45d59a92   feb5d9fea6a5   \"/hello\"      5 hours ago         Exited (0) 5 hours ago                   focused_lalande\n~~~\n\n**退出容器**\n\n~~~shell\nexit\t# 容器退出并停止\nCtrl + P + Q\t# 容器不停止退出\n~~~\n\n\n\n**删除容器**\n\n~~~shell\ndocker rm 容器id\t# 删除指定的容器，不能删除正在运行的容器，如果强制删除 rm -f\ndocker rm -f $(docker ps -aq)\t# 删除所有的容器\n~~~\n\n**启动和停止容器的操作**\n\n~~~shell\ndocker start 容器id\t\t# 启动容器\ndocker restart 容器id\t\t# 重启容器\ndocker stop 容器id\t\t# 停止容器\ndocker kill 容器id\t\t# 强制停止当前容器\n~~~\n\n\n\n## 常用其他命令\n\n**后台启动容器**\n\n~~~shell\n# 命令 docker run -d 镜像名\n[root@Wang ~]# docker run -d centos\n\n# 问题docker ps，发现centos停止了\n\n# 常见的坑，容器使用后台运行后，就必须要有一个前台进程，docker发现没有应用，就会自动停止\n# nginx，容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了\n~~~\n\n**查看日志**\n\n~~~shell\ndocker logs -f -t --tail 容器\n~~~\n\n**查看容器中进程信息**ps\n\n~~~shell\ndocker top \n[root@Wang ~]# docker top 5cac1fea830f\n'UID\tPID\t\tPPID\tC\tSTIME\tTTY\t\tTIME\tCMD\nroot\t30121         30100         0          22:42               pts/0         00:00:00            /bin/bash\n\n~~~\n\n**查看镜像的元数据**\n\n~~~shell\n# 命令docker inspect 容器id\n[\n    {\n        \"Id\": \"88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe\",\n        \"Created\": \"2022-07-29T08:23:56.862239223Z\",\n        \"Path\": \"/bin/sh\",\n        \"Args\": [\n            \"-c\",\n            \"while true;do echo kuangshen;sleep 1;done\"\n        ],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 21212,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2022-07-29T08:23:57.109766809Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe-json.log\",\n        \"Name\": \"/silly_lichterman\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {},\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"CgroupnsMode\": \"host\",\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"private\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DeviceRequests\": null,\n            \"KernelMemory\": 0,\n            \"KernelMemoryTCP\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": null,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b-init/diff:/var/lib/docker/overlay2/7fc43e24b63e4656ab7e7718d3e4ef5297fe82509452be305a01605a7cdc3b97/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [],\n        \"Config\": {\n            \"Hostname\": \"88d23bcbe1f2\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": [\n                \"/bin/sh\",\n                \"-c\",\n                \"while true;do echo kuangshen;sleep 1;done\"\n            ],\n            \"Image\": \"centos\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": null,\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"org.label-schema.build-date\": \"20210915\",\n                \"org.label-schema.license\": \"GPLv2\",\n                \"org.label-schema.name\": \"CentOS Base Image\",\n                \"org.label-schema.schema-version\": \"1.0\",\n                \"org.label-schema.vendor\": \"CentOS\"\n            }\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"bfc28d2ba671adfe5c93325173b93c335d50d8b017eed4fdce2ab75410d6ac2e\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {},\n            \"SandboxKey\": \"/var/run/docker/netns/bfc28d2ba671\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"ad0252d454e751e2c5ecef24e64c32b0884c53242925bd66e9e5dbf5542af179\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.2\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:02\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"7254ffccbdf53e0c72c1d19252980f04fa65153ea3c7ca72af55cfac504cbe3f\",\n                    \"EndpointID\": \"ad0252d454e751e2c5ecef24e64c32b0884c53242925bd66e9e5dbf5542af179\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.2\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:02\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n~~~\n\n**进入当前正在运行的容器**\n\n~~~shell\n# 我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置\n# 命令\ndocker exec -it 容器id /bin/bash\n# 测试\n[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps\nCONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES\n88d23bcbe1f2   centos    \"/bin/sh -c 'while t…\"   13 minutes ago   Up 13 minutes             silly_lichterman\n[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it 88d23bcbe1f2 /bin/bash\n[root@88d23bcbe1f2 /]# ps -ef\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 08:23 ?        00:00:00 /bin/sh -c while true;do echo kuangshen;sleep 1;done\nroot       841     0  0 08:37 pts/0    00:00:00 /bin/bash\nroot       858     1  0 08:37 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1\nroot       859   841  0 08:37 pts/0    00:00:00 ps -ef\n# 方式二\ndocker attach 容器id\n# 测试\n[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker attach 88d23bcbe1f2\n正在执行当前的代码...\n\n# docker exec        # 进入容器后开启一个新的终端，可以再里面操作（常用）\n# docker attach        # 进入容器正在执行的终端，不会启动新的进程。\n~~~\n\n从容器内拷文件到主机上\n\n~~~shell\ndocker cp 容器id:容器内路径 目的主机的路径\n\n# 进入到容器内部\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker attach 6eda31ad7987\n[root@6eda31ad7987 /]# ls\nbin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n[root@6eda31ad7987 /]# cd /home/\n[root@6eda31ad7987 home]# ls\n# 在容器的/home路径下创建test.java文件\n[root@6eda31ad7987 home]# touch test.java\n[root@6eda31ad7987 home]# ls\ntest.java\n[root@6eda31ad7987 home]# exit\nexit\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps -a\nCONTAINER ID   IMAGE     COMMAND       CREATED              STATUS                      PORTS     NAMES\n6eda31ad7987   centos    \"/bin/bash\"   About a minute ago   Exited (0) 28 seconds ago             stoic_kepler\n# 将文件拷贝出来到主机上（在主机上执行该命令）\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker cp 6eda31ad7987:/home/test.java /home\n[root@iZbp13qr3mm4ucsjumrlgqZ home]# ls\ntest.java\n# 拷贝是一个手动过程，未来我们使用 -v 卷的技术，可以实现，自动同步（容器内的/home路径和主机上的/home路径打通）\n~~~\n\n\n\n## 安装软件\n\n### 安装nginx\n\n**下载镜像**：pull\n\n~~~shell\n docker pull ngin\n~~~\n\n**启动nginx**\n\n~~~shell\n # -d 后台运行\n # --name=\"ngin\"    给容器命名\n # -p 宿主机端口:容器内部端口\n [root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker run -d --name nginx -p 3344:80 nginx\n 6e02190a50bc8d79653ffa88f6b5c143d79c5ac3257d5d5ed6a01247980fb48a\n [root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps\n CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                   NAMES\n 6e02190a50bc   nginx     \"/docker-entrypoint.…\"   18 seconds ago   Up 17 seconds   0.0.0.0:3344->80/tcp, :::3344->80/tcp   nginx-1\n # 进入容器\n [root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it a1e130aa184d /bin/bash\n root@a1e130aa184d:/# whereis nginx\n nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx\n root@a1e130aa184d:/# cd /etc/nginx/\n root@a1e130aa184d:/etc/nginx# ls\n conf.d  fastcgi_params  mime.types  modules  nginx.conf  scgi_params  uwsgi_params\n~~~\n\n**本机测试**\n\n~~~shell\n[root@Wang ~]# curl localhost:3344\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\nhtml { color-scheme: light dark; }\nbody { width: 35em; margin: 0 auto;\nfont-family: Tahoma, Verdana, Arial, sans-serif; }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.</p>\n\n<p>For online documentation and support please refer to\n<a href=\"http://nginx.org/\">nginx.org</a>.<br/>\nCommercial support is available at\n<a href=\"http://nginx.com/\">nginx.com</a>.</p>\n\n<p><em>Thank you for using nginx.</em></p>\n</body>\n</html>\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Docker","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clhje45zd0003qc9hhgrp5ivc","content":"<p>Docker通过隔离机制，可以将服务器利用到了极致。</p>\n<blockquote>\n<p>容器化技术</p>\n</blockquote>\n<p><mark>容器化技术不是模拟的一个完整的操作系统</mark></p>\n<h2 id=\"docker基本组成\"><a class=\"markdownIt-Anchor\" href=\"#docker基本组成\"></a> Docker基本组成</h2>\n<p><strong>镜像（image）：</strong></p>\n<p>docker镜像好比一个模板，可以通过这个模板来创建容器服务，tomcat镜像==&gt;》run ==》 tomcat01容器（提供服务器），通过这个镜像可以创建多个容器（最终服务运行或者项目运行就是在容器中）。</p>\n<p><strong>容器（container）：</strong></p>\n<p>Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。</p>\n<p>启动，停止，删除，基本命令！</p>\n<p><strong>仓库（repository）：</strong></p>\n<p>仓库就是存放镜像的地方！</p>\n<h2 id=\"docker安装\"><a class=\"markdownIt-Anchor\" href=\"#docker安装\"></a> Docker安装</h2>\n<blockquote>\n<p>环境准备 CentOS 7</p>\n</blockquote>\n<blockquote>\n<p>环境查看</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">系统内核是 3.10 以上的</span></span><br><span class=\"line\">[root@Wang /]# uname -r</span><br><span class=\"line\">3.10.0-957.21.3.el7.x86_64</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">系统环境</span></span><br><span class=\"line\">[root@Wang /]# cat /etc/os-release</span><br><span class=\"line\">NAME=&quot;CentOS Linux&quot;</span><br><span class=\"line\">VERSION=&quot;7 (Core)&quot;</span><br><span class=\"line\">ID=&quot;centos&quot;</span><br><span class=\"line\">ID_LIKE=&quot;rhel fedora&quot;</span><br><span class=\"line\">VERSION_ID=&quot;7&quot;</span><br><span class=\"line\">PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;</span><br><span class=\"line\">ANSI_COLOR=&quot;0;31&quot;</span><br><span class=\"line\">CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;</span><br><span class=\"line\">HOME_URL=&quot;https://www.centos.org/&quot;</span><br><span class=\"line\">BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;</span><br><span class=\"line\">CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;</span><br><span class=\"line\">REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;</span><br><span class=\"line\">REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\"></a> 安装</h2>\n<p>帮助文档：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">1、卸载旧的版本</span></span><br><span class=\"line\">yum remove docker \\</span><br><span class=\"line\">                  docker-client \\</span><br><span class=\"line\">                  docker-client-latest \\</span><br><span class=\"line\">                  docker-common \\</span><br><span class=\"line\">                  docker-latest \\</span><br><span class=\"line\">                  docker-latest-logrotate \\</span><br><span class=\"line\">                  docker-logrotate \\</span><br><span class=\"line\">                  docker-engine</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">2、需要的安装包</span></span><br><span class=\"line\">yum install -y yum-utils</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">3、设置镜像仓库</span></span><br><span class=\"line\">yum-config-manager \\</span><br><span class=\"line\">    --add-repo \\</span><br><span class=\"line\">    https://download.docker.com/linux/centos/docker-ce.repo  # 默认是从国外的！</span><br><span class=\"line\"></span><br><span class=\"line\">yum-config-manager \\</span><br><span class=\"line\">    --add-repo \\</span><br><span class=\"line\">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # 推荐使用阿里云的</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">更新yum软件包索引</span></span><br><span class=\"line\">yum makecache fast</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">4、安装docker相关的内容 docker-ce 社区</span> </span><br><span class=\"line\">yum install docker-ce docker-ce-cli containerd.io</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">5、启动docker</span></span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">6、使用 docker version 是否安装成功！</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"../img/image-20230130172339188.png\" alt=\"image-20230130172339188\" /></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">7、hello-world</span></span><br><span class=\"line\">docker run hello-world</span><br></pre></td></tr></table></figure>\n<p><img src=\"../img/image-20230130172623721.png\" alt=\"image-20230130172623721\" /></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">8、查看一下下载的这个hello-world镜像</span></span><br><span class=\"line\">[root@Wang ~]# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class=\"line\">hello-world   latest    feb5d9fea6a5   16 months ago   13.3kB</span><br></pre></td></tr></table></figure>\n<p>了解：卸载docker</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">1、卸载依赖</span></span><br><span class=\"line\">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">2、删除资源</span></span><br><span class=\"line\">rm -rf /var/lib/docker\t# docker默认工作路径</span><br><span class=\"line\">rm -rf /var/lib/containerd</span><br></pre></td></tr></table></figure>\n<h2 id=\"阿里云镜像加速\"><a class=\"markdownIt-Anchor\" href=\"#阿里云镜像加速\"></a> 阿里云镜像加速</h2>\n<p>1、登录阿里云找到容器镜像服务</p>\n<p><img src=\"../img/image-20230130173819786.png\" alt=\"image-20230130173819786\" /></p>\n<p>2、配置使用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /etc/docker</span><br><span class=\"line\"></span><br><span class=\"line\">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [&quot;https://qfjygl3u.mirror.aliyuncs.com&quot;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\"></span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n<h2 id=\"底层原理\"><a class=\"markdownIt-Anchor\" href=\"#底层原理\"></a> 底层原理</h2>\n<p><strong>Docker是怎么工作的？</strong></p>\n<p>Docker是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socket从客户端访问！</p>\n<p>DockerServer接受到Docker-Client的指令，就会执行这个命令！</p>\n<h2 id=\"docker的常用命令\"><a class=\"markdownIt-Anchor\" href=\"#docker的常用命令\"></a> Docker的常用命令</h2>\n<h3 id=\"帮助命令\"><a class=\"markdownIt-Anchor\" href=\"#帮助命令\"></a> 帮助命令</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker version\t\t# 显示docker版本信息</span><br><span class=\"line\">docker info\t\t\t# 显示docker的系统信息，包括镜像和容器的数量</span><br><span class=\"line\">docker 命令 --help  # 帮助命令</span><br></pre></td></tr></table></figure>\n<p>帮助文档的地址：<a href=\"https://docs.docker.com/reference/\">https://docs.docker.com/reference/</a></p>\n<h3 id=\"镜像命令\"><a class=\"markdownIt-Anchor\" href=\"#镜像命令\"></a> 镜像命令</h3>\n<p>**docker images ** 查看所有本地的主机上的镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@Wang ~]# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class=\"line\">hello-world   latest    feb5d9fea6a5   16 months ago   13.3kB</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解释</span></span><br><span class=\"line\">REPOSITORY\t镜像的仓库源</span><br><span class=\"line\">TAG\t\t\t镜像的标签</span><br><span class=\"line\">IMAGE ID\t镜像的ID</span><br><span class=\"line\">CREATED\t\t镜像的创建时间</span><br><span class=\"line\">SIZE\t\t镜像的大小</span><br></pre></td></tr></table></figure>\n<p><strong>docker search</strong> 搜索镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@Wang ~]# docker search mysql</span><br><span class=\"line\">NAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class=\"line\">mysql                           MySQL is a widely used, open-source relation…   13741     [OK]    </span><br><span class=\"line\">mariadb                         MariaDB Server is a high performing open sou…   5242      [OK]       </span><br><span class=\"line\">phpmyadmin                      phpMyAdmin - A web interface for MySQL and M…   727       [OK]       </span><br><span class=\"line\">percona                         Percona Server is a fork of the MySQL relati…   599       [OK]</span><br></pre></td></tr></table></figure>\n<p><strong>docker pull</strong> 下载镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载镜像 docker pull 镜像名:tag</span></span><br><span class=\"line\">[root@Wang ~]# docker pull mysql</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">指定版本下载</span></span><br><span class=\"line\">[root@Wang ~]# docker pull mysql:5.7</span><br><span class=\"line\">5.7: Pulling from library/mysql</span><br><span class=\"line\">72a69066d2fe: Pull complete </span><br><span class=\"line\">93619dbc5b36: Pull complete </span><br><span class=\"line\">99da31dd6142: Pull complete </span><br><span class=\"line\">626033c43d70: Pull complete </span><br><span class=\"line\">37d5d7efb64e: Pull complete </span><br><span class=\"line\">ac563158d721: Pull complete </span><br><span class=\"line\">d2ba16033dad: Pull complete </span><br><span class=\"line\">0ceb82207cd7: Pull complete </span><br><span class=\"line\">37f2405cae96: Pull complete </span><br><span class=\"line\">e2482e017e53: Pull complete </span><br><span class=\"line\">70deed891d42: Pull complete </span><br><span class=\"line\">Digest: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94</span><br><span class=\"line\">Status: Downloaded newer image for mysql:5.7</span><br><span class=\"line\">docker.io/library/mysql:5.7</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>docker rmi</strong> 删除镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi -f 镜像id\t\t# 删除指定的镜像</span><br><span class=\"line\">docker rmi -f 镜像id 镜像id 镜像id 镜像id\t# 删除多个镜像</span><br><span class=\"line\"></span><br><span class=\"line\">[root@Wang ~]# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class=\"line\">mysql         5.7       c20987f18b13   13 months ago   448MB</span><br><span class=\"line\">hello-world   latest    feb5d9fea6a5   16 months ago   13.3kB</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">删除hello-world 通过<span class=\"built_in\">id</span>删除</span></span><br><span class=\"line\">[root@Wang ~]# docker rmi -f feb5d9fea6a5</span><br><span class=\"line\">Untagged: hello-world:latest</span><br><span class=\"line\">Untagged: hello-world@sha256:2498fce14358aa50ead0cc6c19990fc6ff866ce72aeb5546e1d59caac3d0d60f</span><br><span class=\"line\">Deleted: sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412</span><br></pre></td></tr></table></figure>\n<h2 id=\"容器命令\"><a class=\"markdownIt-Anchor\" href=\"#容器命令\"></a> 容器命令</h2>\n<p>说明：我们有了镜像才可以创建容器</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull centos</span><br></pre></td></tr></table></figure>\n<p>新建镜像并启动</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run [可选参数] image</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">参数说明</span></span><br><span class=\"line\">--name=&quot;Name&quot;\t容器名字 tomcat01 tomcat02，用来区分</span><br><span class=\"line\">-d\t\t\t\t后台方式运行</span><br><span class=\"line\">-it\t\t\t\t使用交互方式运行，进入容器查看内容</span><br><span class=\"line\">-p\t\t\t\t指定容器的端口\t-p 8080:8080</span><br><span class=\"line\">\t-p 主机端口:容器端口（常用）</span><br><span class=\"line\">\t-p 容器端口</span><br><span class=\"line\">-P\t\t\t\t随机指定端口</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试，启动并进入容器</span></span><br><span class=\"line\">[root@Wang ~]# docker run -it centos /bin/bash</span><br><span class=\"line\">[root@a1afe9f99dd6 /]# ls\t# 查看容器内的centos，基本版本，很多命令不完善</span><br><span class=\"line\">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">从容器中退回主机</span></span><br><span class=\"line\">[root@a1afe9f99dd6 /]# exit</span><br><span class=\"line\">exit</span><br><span class=\"line\">[root@Wang /]# ls</span><br><span class=\"line\">bin   data  etc   lib    lost+found  mnt  patch  root  sbin  sys  usr  www</span><br><span class=\"line\">boot  dev   home  lib64  media       opt  proc   run   srv   tmp  var</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">docker run -p 1234:1234 -it fed440038981 /bin/bash</span><br><span class=\"line\">docker exec -it 354e4cf9e32f /bin/bash</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>列出所有的运行的容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker ps 命令</span></span><br><span class=\"line\">-a\t# 列出当前正在运行的容器+带出历史运行过的容器</span><br><span class=\"line\"></span><br><span class=\"line\">[root@Wang ~]# docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE          COMMAND       CREATED             STATUS                         PORTS     NAMES</span><br><span class=\"line\">a1afe9f99dd6   centos         &quot;/bin/bash&quot;   About an hour ago   Exited (0) About an hour ago             flamboyant_booth</span><br><span class=\"line\">904a45d59a92   feb5d9fea6a5   &quot;/hello&quot;      5 hours ago         Exited (0) 5 hours ago                   focused_lalande</span><br></pre></td></tr></table></figure>\n<p><strong>退出容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit\t# 容器退出并停止</span><br><span class=\"line\">Ctrl + P + Q\t# 容器不停止退出</span><br></pre></td></tr></table></figure>\n<p><strong>删除容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm 容器id\t# 删除指定的容器，不能删除正在运行的容器，如果强制删除 rm -f</span><br><span class=\"line\">docker rm -f $(docker ps -aq)\t# 删除所有的容器</span><br></pre></td></tr></table></figure>\n<p><strong>启动和停止容器的操作</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker start 容器id\t\t# 启动容器</span><br><span class=\"line\">docker restart 容器id\t\t# 重启容器</span><br><span class=\"line\">docker stop 容器id\t\t# 停止容器</span><br><span class=\"line\">docker kill 容器id\t\t# 强制停止当前容器</span><br></pre></td></tr></table></figure>\n<h2 id=\"常用其他命令\"><a class=\"markdownIt-Anchor\" href=\"#常用其他命令\"></a> 常用其他命令</h2>\n<p><strong>后台启动容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">命令 docker run -d 镜像名</span></span><br><span class=\"line\">[root@Wang ~]# docker run -d centos</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">问题docker ps，发现centos停止了</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">常见的坑，容器使用后台运行后，就必须要有一个前台进程，docker发现没有应用，就会自动停止</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">nginx，容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了</span></span><br></pre></td></tr></table></figure>\n<p><strong>查看日志</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs -f -t --tail 容器</span><br></pre></td></tr></table></figure>\n<p><strong>查看容器中进程信息</strong>ps</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker top </span><br><span class=\"line\">[root@Wang ~]# docker top 5cac1fea830f</span><br><span class=\"line\">&#x27;UID\tPID\t\tPPID\tC\tSTIME\tTTY\t\tTIME\tCMD</span><br><span class=\"line\">root\t30121         30100         0          22:42               pts/0         00:00:00            /bin/bash</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>查看镜像的元数据</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">命令docker inspect 容器<span class=\"built_in\">id</span></span></span><br><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Id&quot;: &quot;88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe&quot;,</span><br><span class=\"line\">        &quot;Created&quot;: &quot;2022-07-29T08:23:56.862239223Z&quot;,</span><br><span class=\"line\">        &quot;Path&quot;: &quot;/bin/sh&quot;,</span><br><span class=\"line\">        &quot;Args&quot;: [</span><br><span class=\"line\">            &quot;-c&quot;,</span><br><span class=\"line\">            &quot;while true;do echo kuangshen;sleep 1;done&quot;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        &quot;State&quot;: &#123;</span><br><span class=\"line\">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class=\"line\">            &quot;Running&quot;: true,</span><br><span class=\"line\">            &quot;Paused&quot;: false,</span><br><span class=\"line\">            &quot;Restarting&quot;: false,</span><br><span class=\"line\">            &quot;OOMKilled&quot;: false,</span><br><span class=\"line\">            &quot;Dead&quot;: false,</span><br><span class=\"line\">            &quot;Pid&quot;: 21212,</span><br><span class=\"line\">            &quot;ExitCode&quot;: 0,</span><br><span class=\"line\">            &quot;Error&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;StartedAt&quot;: &quot;2022-07-29T08:23:57.109766809Z&quot;,</span><br><span class=\"line\">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Image&quot;: &quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;,</span><br><span class=\"line\">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/resolv.conf&quot;,</span><br><span class=\"line\">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/hostname&quot;,</span><br><span class=\"line\">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/hosts&quot;,</span><br><span class=\"line\">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe-json.log&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;/silly_lichterman&quot;,</span><br><span class=\"line\">        &quot;RestartCount&quot;: 0,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class=\"line\">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class=\"line\">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ExecIDs&quot;: null,</span><br><span class=\"line\">        &quot;HostConfig&quot;: &#123;</span><br><span class=\"line\">            &quot;Binds&quot;: null,</span><br><span class=\"line\">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LogConfig&quot;: &#123;</span><br><span class=\"line\">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class=\"line\">                &quot;Config&quot;: &#123;&#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class=\"line\">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class=\"line\">            &quot;RestartPolicy&quot;: &#123;</span><br><span class=\"line\">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class=\"line\">                &quot;MaximumRetryCount&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;AutoRemove&quot;: false,</span><br><span class=\"line\">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;VolumesFrom&quot;: null,</span><br><span class=\"line\">            &quot;CapAdd&quot;: null,</span><br><span class=\"line\">            &quot;CapDrop&quot;: null,</span><br><span class=\"line\">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class=\"line\">            &quot;Dns&quot;: [],</span><br><span class=\"line\">            &quot;DnsOptions&quot;: [],</span><br><span class=\"line\">            &quot;DnsSearch&quot;: [],</span><br><span class=\"line\">            &quot;ExtraHosts&quot;: null,</span><br><span class=\"line\">            &quot;GroupAdd&quot;: null,</span><br><span class=\"line\">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class=\"line\">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Links&quot;: null,</span><br><span class=\"line\">            &quot;OomScoreAdj&quot;: 0,</span><br><span class=\"line\">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Privileged&quot;: false,</span><br><span class=\"line\">            &quot;PublishAllPorts&quot;: false,</span><br><span class=\"line\">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class=\"line\">            &quot;SecurityOpt&quot;: null,</span><br><span class=\"line\">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;ShmSize&quot;: 67108864,</span><br><span class=\"line\">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class=\"line\">            &quot;ConsoleSize&quot;: [</span><br><span class=\"line\">                0,</span><br><span class=\"line\">                0</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpuShares&quot;: 0,</span><br><span class=\"line\">            &quot;Memory&quot;: 0,</span><br><span class=\"line\">            &quot;NanoCpus&quot;: 0,</span><br><span class=\"line\">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;BlkioWeight&quot;: 0,</span><br><span class=\"line\">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class=\"line\">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class=\"line\">            &quot;CpuPeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuQuota&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class=\"line\">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Devices&quot;: [],</span><br><span class=\"line\">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class=\"line\">            &quot;DeviceRequests&quot;: null,</span><br><span class=\"line\">            &quot;KernelMemory&quot;: 0,</span><br><span class=\"line\">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class=\"line\">            &quot;MemoryReservation&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwap&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwappiness&quot;: null,</span><br><span class=\"line\">            &quot;OomKillDisable&quot;: false,</span><br><span class=\"line\">            &quot;PidsLimit&quot;: null,</span><br><span class=\"line\">            &quot;Ulimits&quot;: null,</span><br><span class=\"line\">            &quot;CpuCount&quot;: 0,</span><br><span class=\"line\">            &quot;CpuPercent&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class=\"line\">            &quot;MaskedPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/asound&quot;,</span><br><span class=\"line\">                &quot;/proc/acpi&quot;,</span><br><span class=\"line\">                &quot;/proc/kcore&quot;,</span><br><span class=\"line\">                &quot;/proc/keys&quot;,</span><br><span class=\"line\">                &quot;/proc/latency_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_list&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/sched_debug&quot;,</span><br><span class=\"line\">                &quot;/proc/scsi&quot;,</span><br><span class=\"line\">                &quot;/sys/firmware&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;ReadonlyPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/bus&quot;,</span><br><span class=\"line\">                &quot;/proc/fs&quot;,</span><br><span class=\"line\">                &quot;/proc/irq&quot;,</span><br><span class=\"line\">                &quot;/proc/sys&quot;,</span><br><span class=\"line\">                &quot;/proc/sysrq-trigger&quot;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;GraphDriver&quot;: &#123;</span><br><span class=\"line\">            &quot;Data&quot;: &#123;</span><br><span class=\"line\">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b-init/diff:/var/lib/docker/overlay2/7fc43e24b63e4656ab7e7718d3e4ef5297fe82509452be305a01605a7cdc3b97/diff&quot;,</span><br><span class=\"line\">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/merged&quot;,</span><br><span class=\"line\">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/diff&quot;,</span><br><span class=\"line\">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/work&quot;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Mounts&quot;: [],</span><br><span class=\"line\">        &quot;Config&quot;: &#123;</span><br><span class=\"line\">            &quot;Hostname&quot;: &quot;88d23bcbe1f2&quot;,</span><br><span class=\"line\">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;User&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;AttachStdin&quot;: false,</span><br><span class=\"line\">            &quot;AttachStdout&quot;: false,</span><br><span class=\"line\">            &quot;AttachStderr&quot;: false,</span><br><span class=\"line\">            &quot;Tty&quot;: false,</span><br><span class=\"line\">            &quot;OpenStdin&quot;: false,</span><br><span class=\"line\">            &quot;StdinOnce&quot;: false,</span><br><span class=\"line\">            &quot;Env&quot;: [</span><br><span class=\"line\">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Cmd&quot;: [</span><br><span class=\"line\">                &quot;/bin/sh&quot;,</span><br><span class=\"line\">                &quot;-c&quot;,</span><br><span class=\"line\">                &quot;while true;do echo kuangshen;sleep 1;done&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Image&quot;: &quot;centos&quot;,</span><br><span class=\"line\">            &quot;Volumes&quot;: null,</span><br><span class=\"line\">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Entrypoint&quot;: null,</span><br><span class=\"line\">            &quot;OnBuild&quot;: null,</span><br><span class=\"line\">            &quot;Labels&quot;: &#123;</span><br><span class=\"line\">                &quot;org.label-schema.build-date&quot;: &quot;20210915&quot;,</span><br><span class=\"line\">                &quot;org.label-schema.license&quot;: &quot;GPLv2&quot;,</span><br><span class=\"line\">                &quot;org.label-schema.name&quot;: &quot;CentOS Base Image&quot;,</span><br><span class=\"line\">                &quot;org.label-schema.schema-version&quot;: &quot;1.0&quot;,</span><br><span class=\"line\">                &quot;org.label-schema.vendor&quot;: &quot;CentOS&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;NetworkSettings&quot;: &#123;</span><br><span class=\"line\">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;SandboxID&quot;: &quot;bfc28d2ba671adfe5c93325173b93c335d50d8b017eed4fdce2ab75410d6ac2e&quot;,</span><br><span class=\"line\">            &quot;HairpinMode&quot;: false,</span><br><span class=\"line\">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class=\"line\">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/bfc28d2ba671&quot;,</span><br><span class=\"line\">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class=\"line\">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class=\"line\">            &quot;EndpointID&quot;: &quot;ad0252d454e751e2c5ecef24e64c32b0884c53242925bd66e9e5dbf5542af179&quot;,</span><br><span class=\"line\">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">            &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class=\"line\">            &quot;Networks&quot;: &#123;</span><br><span class=\"line\">                &quot;bridge&quot;: &#123;</span><br><span class=\"line\">                    &quot;IPAMConfig&quot;: null,</span><br><span class=\"line\">                    &quot;Links&quot;: null,</span><br><span class=\"line\">                    &quot;Aliases&quot;: null,</span><br><span class=\"line\">                    &quot;NetworkID&quot;: &quot;7254ffccbdf53e0c72c1d19252980f04fa65153ea3c7ca72af55cfac504cbe3f&quot;,</span><br><span class=\"line\">                    &quot;EndpointID&quot;: &quot;ad0252d454e751e2c5ecef24e64c32b0884c53242925bd66e9e5dbf5542af179&quot;,</span><br><span class=\"line\">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">                    &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class=\"line\">                    &quot;DriverOpts&quot;: null</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p><strong>进入当前正在运行的容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">命令</span></span><br><span class=\"line\">docker exec -it 容器id /bin/bash</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class=\"line\">88d23bcbe1f2   centos    &quot;/bin/sh -c &#x27;while t…&quot;   13 minutes ago   Up 13 minutes             silly_lichterman</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it 88d23bcbe1f2 /bin/bash</span><br><span class=\"line\">[root@88d23bcbe1f2 /]# ps -ef</span><br><span class=\"line\">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class=\"line\">root         1     0  0 08:23 ?        00:00:00 /bin/sh -c while true;do echo kuangshen;sleep 1;done</span><br><span class=\"line\">root       841     0  0 08:37 pts/0    00:00:00 /bin/bash</span><br><span class=\"line\">root       858     1  0 08:37 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1</span><br><span class=\"line\">root       859   841  0 08:37 pts/0    00:00:00 ps -ef</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">方式二</span></span><br><span class=\"line\">docker attach 容器id</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker attach 88d23bcbe1f2</span><br><span class=\"line\">正在执行当前的代码...</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker <span class=\"built_in\">exec</span>        <span class=\"comment\"># 进入容器后开启一个新的终端，可以再里面操作（常用）</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker attach        <span class=\"comment\"># 进入容器正在执行的终端，不会启动新的进程。</span></span></span><br></pre></td></tr></table></figure>\n<p>从容器内拷文件到主机上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp 容器id:容器内路径 目的主机的路径</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入到容器内部</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker attach 6eda31ad7987</span><br><span class=\"line\">[root@6eda31ad7987 /]# ls</span><br><span class=\"line\">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class=\"line\">[root@6eda31ad7987 /]# cd /home/</span><br><span class=\"line\">[root@6eda31ad7987 home]# ls</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">在容器的/home路径下创建test.java文件</span></span><br><span class=\"line\">[root@6eda31ad7987 home]# touch test.java</span><br><span class=\"line\">[root@6eda31ad7987 home]# ls</span><br><span class=\"line\">test.java</span><br><span class=\"line\">[root@6eda31ad7987 home]# exit</span><br><span class=\"line\">exit</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS                      PORTS     NAMES</span><br><span class=\"line\">6eda31ad7987   centos    &quot;/bin/bash&quot;   About a minute ago   Exited (0) 28 seconds ago             stoic_kepler</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">将文件拷贝出来到主机上（在主机上执行该命令）</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker cp 6eda31ad7987:/home/test.java /home</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# ls</span><br><span class=\"line\">test.java</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">拷贝是一个手动过程，未来我们使用 -v 卷的技术，可以实现，自动同步（容器内的/home路径和主机上的/home路径打通）</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"安装软件\"><a class=\"markdownIt-Anchor\" href=\"#安装软件\"></a> 安装软件</h2>\n<h3 id=\"安装nginx\"><a class=\"markdownIt-Anchor\" href=\"#安装nginx\"></a> 安装nginx</h3>\n<p><strong>下载镜像</strong>：pull</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull ngin</span><br></pre></td></tr></table></figure>\n<p><strong>启动nginx</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">-d 后台运行</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">--name=<span class=\"string\">&quot;ngin&quot;</span>    给容器命名</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">-p 宿主机端口:容器内部端口</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker run -d --name nginx -p 3344:80 nginx</span><br><span class=\"line\">6e02190a50bc8d79653ffa88f6b5c143d79c5ac3257d5d5ed6a01247980fb48a</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                   NAMES</span><br><span class=\"line\">6e02190a50bc   nginx     &quot;/docker-entrypoint.…&quot;   18 seconds ago   Up 17 seconds   0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp   nginx-1</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入容器</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it a1e130aa184d /bin/bash</span><br><span class=\"line\">root@a1e130aa184d:/# whereis nginx</span><br><span class=\"line\">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</span><br><span class=\"line\">root@a1e130aa184d:/# cd /etc/nginx/</span><br><span class=\"line\">root@a1e130aa184d:/etc/nginx# ls</span><br><span class=\"line\">conf.d  fastcgi_params  mime.types  modules  nginx.conf  scgi_params  uwsgi_params</span><br></pre></td></tr></table></figure>\n<p><strong>本机测试</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@Wang ~]# curl localhost:3344</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">html &#123; color-scheme: light dark; &#125;</span><br><span class=\"line\">body &#123; width: 35em; margin: 0 auto;</span><br><span class=\"line\">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class=\"line\">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class=\"line\">working. Further configuration is required.&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;p&gt;For online documentation and support please refer to</span><br><span class=\"line\">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class=\"line\">Commercial support is available at</span><br><span class=\"line\">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/05/02/18/13/london-7965770__340.jpg","cover_type":"img","excerpt":"","more":"<p>Docker通过隔离机制，可以将服务器利用到了极致。</p>\n<blockquote>\n<p>容器化技术</p>\n</blockquote>\n<p><mark>容器化技术不是模拟的一个完整的操作系统</mark></p>\n<h2 id=\"docker基本组成\"><a class=\"markdownIt-Anchor\" href=\"#docker基本组成\"></a> Docker基本组成</h2>\n<p><strong>镜像（image）：</strong></p>\n<p>docker镜像好比一个模板，可以通过这个模板来创建容器服务，tomcat镜像==&gt;》run ==》 tomcat01容器（提供服务器），通过这个镜像可以创建多个容器（最终服务运行或者项目运行就是在容器中）。</p>\n<p><strong>容器（container）：</strong></p>\n<p>Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。</p>\n<p>启动，停止，删除，基本命令！</p>\n<p><strong>仓库（repository）：</strong></p>\n<p>仓库就是存放镜像的地方！</p>\n<h2 id=\"docker安装\"><a class=\"markdownIt-Anchor\" href=\"#docker安装\"></a> Docker安装</h2>\n<blockquote>\n<p>环境准备 CentOS 7</p>\n</blockquote>\n<blockquote>\n<p>环境查看</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">系统内核是 3.10 以上的</span></span><br><span class=\"line\">[root@Wang /]# uname -r</span><br><span class=\"line\">3.10.0-957.21.3.el7.x86_64</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">系统环境</span></span><br><span class=\"line\">[root@Wang /]# cat /etc/os-release</span><br><span class=\"line\">NAME=&quot;CentOS Linux&quot;</span><br><span class=\"line\">VERSION=&quot;7 (Core)&quot;</span><br><span class=\"line\">ID=&quot;centos&quot;</span><br><span class=\"line\">ID_LIKE=&quot;rhel fedora&quot;</span><br><span class=\"line\">VERSION_ID=&quot;7&quot;</span><br><span class=\"line\">PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;</span><br><span class=\"line\">ANSI_COLOR=&quot;0;31&quot;</span><br><span class=\"line\">CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;</span><br><span class=\"line\">HOME_URL=&quot;https://www.centos.org/&quot;</span><br><span class=\"line\">BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;</span><br><span class=\"line\">CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;</span><br><span class=\"line\">REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;</span><br><span class=\"line\">REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\"></a> 安装</h2>\n<p>帮助文档：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">1、卸载旧的版本</span></span><br><span class=\"line\">yum remove docker \\</span><br><span class=\"line\">                  docker-client \\</span><br><span class=\"line\">                  docker-client-latest \\</span><br><span class=\"line\">                  docker-common \\</span><br><span class=\"line\">                  docker-latest \\</span><br><span class=\"line\">                  docker-latest-logrotate \\</span><br><span class=\"line\">                  docker-logrotate \\</span><br><span class=\"line\">                  docker-engine</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">2、需要的安装包</span></span><br><span class=\"line\">yum install -y yum-utils</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">3、设置镜像仓库</span></span><br><span class=\"line\">yum-config-manager \\</span><br><span class=\"line\">    --add-repo \\</span><br><span class=\"line\">    https://download.docker.com/linux/centos/docker-ce.repo  # 默认是从国外的！</span><br><span class=\"line\"></span><br><span class=\"line\">yum-config-manager \\</span><br><span class=\"line\">    --add-repo \\</span><br><span class=\"line\">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # 推荐使用阿里云的</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">更新yum软件包索引</span></span><br><span class=\"line\">yum makecache fast</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">4、安装docker相关的内容 docker-ce 社区</span> </span><br><span class=\"line\">yum install docker-ce docker-ce-cli containerd.io</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">5、启动docker</span></span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">6、使用 docker version 是否安装成功！</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"../img/image-20230130172339188.png\" alt=\"image-20230130172339188\" /></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">7、hello-world</span></span><br><span class=\"line\">docker run hello-world</span><br></pre></td></tr></table></figure>\n<p><img src=\"../img/image-20230130172623721.png\" alt=\"image-20230130172623721\" /></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">8、查看一下下载的这个hello-world镜像</span></span><br><span class=\"line\">[root@Wang ~]# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class=\"line\">hello-world   latest    feb5d9fea6a5   16 months ago   13.3kB</span><br></pre></td></tr></table></figure>\n<p>了解：卸载docker</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">1、卸载依赖</span></span><br><span class=\"line\">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">2、删除资源</span></span><br><span class=\"line\">rm -rf /var/lib/docker\t# docker默认工作路径</span><br><span class=\"line\">rm -rf /var/lib/containerd</span><br></pre></td></tr></table></figure>\n<h2 id=\"阿里云镜像加速\"><a class=\"markdownIt-Anchor\" href=\"#阿里云镜像加速\"></a> 阿里云镜像加速</h2>\n<p>1、登录阿里云找到容器镜像服务</p>\n<p><img src=\"../img/image-20230130173819786.png\" alt=\"image-20230130173819786\" /></p>\n<p>2、配置使用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /etc/docker</span><br><span class=\"line\"></span><br><span class=\"line\">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [&quot;https://qfjygl3u.mirror.aliyuncs.com&quot;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\"></span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n<h2 id=\"底层原理\"><a class=\"markdownIt-Anchor\" href=\"#底层原理\"></a> 底层原理</h2>\n<p><strong>Docker是怎么工作的？</strong></p>\n<p>Docker是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socket从客户端访问！</p>\n<p>DockerServer接受到Docker-Client的指令，就会执行这个命令！</p>\n<h2 id=\"docker的常用命令\"><a class=\"markdownIt-Anchor\" href=\"#docker的常用命令\"></a> Docker的常用命令</h2>\n<h3 id=\"帮助命令\"><a class=\"markdownIt-Anchor\" href=\"#帮助命令\"></a> 帮助命令</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker version\t\t# 显示docker版本信息</span><br><span class=\"line\">docker info\t\t\t# 显示docker的系统信息，包括镜像和容器的数量</span><br><span class=\"line\">docker 命令 --help  # 帮助命令</span><br></pre></td></tr></table></figure>\n<p>帮助文档的地址：<a href=\"https://docs.docker.com/reference/\">https://docs.docker.com/reference/</a></p>\n<h3 id=\"镜像命令\"><a class=\"markdownIt-Anchor\" href=\"#镜像命令\"></a> 镜像命令</h3>\n<p>**docker images ** 查看所有本地的主机上的镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@Wang ~]# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class=\"line\">hello-world   latest    feb5d9fea6a5   16 months ago   13.3kB</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解释</span></span><br><span class=\"line\">REPOSITORY\t镜像的仓库源</span><br><span class=\"line\">TAG\t\t\t镜像的标签</span><br><span class=\"line\">IMAGE ID\t镜像的ID</span><br><span class=\"line\">CREATED\t\t镜像的创建时间</span><br><span class=\"line\">SIZE\t\t镜像的大小</span><br></pre></td></tr></table></figure>\n<p><strong>docker search</strong> 搜索镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@Wang ~]# docker search mysql</span><br><span class=\"line\">NAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class=\"line\">mysql                           MySQL is a widely used, open-source relation…   13741     [OK]    </span><br><span class=\"line\">mariadb                         MariaDB Server is a high performing open sou…   5242      [OK]       </span><br><span class=\"line\">phpmyadmin                      phpMyAdmin - A web interface for MySQL and M…   727       [OK]       </span><br><span class=\"line\">percona                         Percona Server is a fork of the MySQL relati…   599       [OK]</span><br></pre></td></tr></table></figure>\n<p><strong>docker pull</strong> 下载镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载镜像 docker pull 镜像名:tag</span></span><br><span class=\"line\">[root@Wang ~]# docker pull mysql</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">指定版本下载</span></span><br><span class=\"line\">[root@Wang ~]# docker pull mysql:5.7</span><br><span class=\"line\">5.7: Pulling from library/mysql</span><br><span class=\"line\">72a69066d2fe: Pull complete </span><br><span class=\"line\">93619dbc5b36: Pull complete </span><br><span class=\"line\">99da31dd6142: Pull complete </span><br><span class=\"line\">626033c43d70: Pull complete </span><br><span class=\"line\">37d5d7efb64e: Pull complete </span><br><span class=\"line\">ac563158d721: Pull complete </span><br><span class=\"line\">d2ba16033dad: Pull complete </span><br><span class=\"line\">0ceb82207cd7: Pull complete </span><br><span class=\"line\">37f2405cae96: Pull complete </span><br><span class=\"line\">e2482e017e53: Pull complete </span><br><span class=\"line\">70deed891d42: Pull complete </span><br><span class=\"line\">Digest: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94</span><br><span class=\"line\">Status: Downloaded newer image for mysql:5.7</span><br><span class=\"line\">docker.io/library/mysql:5.7</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>docker rmi</strong> 删除镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi -f 镜像id\t\t# 删除指定的镜像</span><br><span class=\"line\">docker rmi -f 镜像id 镜像id 镜像id 镜像id\t# 删除多个镜像</span><br><span class=\"line\"></span><br><span class=\"line\">[root@Wang ~]# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class=\"line\">mysql         5.7       c20987f18b13   13 months ago   448MB</span><br><span class=\"line\">hello-world   latest    feb5d9fea6a5   16 months ago   13.3kB</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">删除hello-world 通过<span class=\"built_in\">id</span>删除</span></span><br><span class=\"line\">[root@Wang ~]# docker rmi -f feb5d9fea6a5</span><br><span class=\"line\">Untagged: hello-world:latest</span><br><span class=\"line\">Untagged: hello-world@sha256:2498fce14358aa50ead0cc6c19990fc6ff866ce72aeb5546e1d59caac3d0d60f</span><br><span class=\"line\">Deleted: sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412</span><br></pre></td></tr></table></figure>\n<h2 id=\"容器命令\"><a class=\"markdownIt-Anchor\" href=\"#容器命令\"></a> 容器命令</h2>\n<p>说明：我们有了镜像才可以创建容器</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull centos</span><br></pre></td></tr></table></figure>\n<p>新建镜像并启动</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run [可选参数] image</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">参数说明</span></span><br><span class=\"line\">--name=&quot;Name&quot;\t容器名字 tomcat01 tomcat02，用来区分</span><br><span class=\"line\">-d\t\t\t\t后台方式运行</span><br><span class=\"line\">-it\t\t\t\t使用交互方式运行，进入容器查看内容</span><br><span class=\"line\">-p\t\t\t\t指定容器的端口\t-p 8080:8080</span><br><span class=\"line\">\t-p 主机端口:容器端口（常用）</span><br><span class=\"line\">\t-p 容器端口</span><br><span class=\"line\">-P\t\t\t\t随机指定端口</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试，启动并进入容器</span></span><br><span class=\"line\">[root@Wang ~]# docker run -it centos /bin/bash</span><br><span class=\"line\">[root@a1afe9f99dd6 /]# ls\t# 查看容器内的centos，基本版本，很多命令不完善</span><br><span class=\"line\">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">从容器中退回主机</span></span><br><span class=\"line\">[root@a1afe9f99dd6 /]# exit</span><br><span class=\"line\">exit</span><br><span class=\"line\">[root@Wang /]# ls</span><br><span class=\"line\">bin   data  etc   lib    lost+found  mnt  patch  root  sbin  sys  usr  www</span><br><span class=\"line\">boot  dev   home  lib64  media       opt  proc   run   srv   tmp  var</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">docker run -p 1234:1234 -it fed440038981 /bin/bash</span><br><span class=\"line\">docker exec -it 354e4cf9e32f /bin/bash</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>列出所有的运行的容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker ps 命令</span></span><br><span class=\"line\">-a\t# 列出当前正在运行的容器+带出历史运行过的容器</span><br><span class=\"line\"></span><br><span class=\"line\">[root@Wang ~]# docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE          COMMAND       CREATED             STATUS                         PORTS     NAMES</span><br><span class=\"line\">a1afe9f99dd6   centos         &quot;/bin/bash&quot;   About an hour ago   Exited (0) About an hour ago             flamboyant_booth</span><br><span class=\"line\">904a45d59a92   feb5d9fea6a5   &quot;/hello&quot;      5 hours ago         Exited (0) 5 hours ago                   focused_lalande</span><br></pre></td></tr></table></figure>\n<p><strong>退出容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit\t# 容器退出并停止</span><br><span class=\"line\">Ctrl + P + Q\t# 容器不停止退出</span><br></pre></td></tr></table></figure>\n<p><strong>删除容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm 容器id\t# 删除指定的容器，不能删除正在运行的容器，如果强制删除 rm -f</span><br><span class=\"line\">docker rm -f $(docker ps -aq)\t# 删除所有的容器</span><br></pre></td></tr></table></figure>\n<p><strong>启动和停止容器的操作</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker start 容器id\t\t# 启动容器</span><br><span class=\"line\">docker restart 容器id\t\t# 重启容器</span><br><span class=\"line\">docker stop 容器id\t\t# 停止容器</span><br><span class=\"line\">docker kill 容器id\t\t# 强制停止当前容器</span><br></pre></td></tr></table></figure>\n<h2 id=\"常用其他命令\"><a class=\"markdownIt-Anchor\" href=\"#常用其他命令\"></a> 常用其他命令</h2>\n<p><strong>后台启动容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">命令 docker run -d 镜像名</span></span><br><span class=\"line\">[root@Wang ~]# docker run -d centos</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">问题docker ps，发现centos停止了</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">常见的坑，容器使用后台运行后，就必须要有一个前台进程，docker发现没有应用，就会自动停止</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">nginx，容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了</span></span><br></pre></td></tr></table></figure>\n<p><strong>查看日志</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs -f -t --tail 容器</span><br></pre></td></tr></table></figure>\n<p><strong>查看容器中进程信息</strong>ps</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker top </span><br><span class=\"line\">[root@Wang ~]# docker top 5cac1fea830f</span><br><span class=\"line\">&#x27;UID\tPID\t\tPPID\tC\tSTIME\tTTY\t\tTIME\tCMD</span><br><span class=\"line\">root\t30121         30100         0          22:42               pts/0         00:00:00            /bin/bash</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>查看镜像的元数据</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">命令docker inspect 容器<span class=\"built_in\">id</span></span></span><br><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Id&quot;: &quot;88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe&quot;,</span><br><span class=\"line\">        &quot;Created&quot;: &quot;2022-07-29T08:23:56.862239223Z&quot;,</span><br><span class=\"line\">        &quot;Path&quot;: &quot;/bin/sh&quot;,</span><br><span class=\"line\">        &quot;Args&quot;: [</span><br><span class=\"line\">            &quot;-c&quot;,</span><br><span class=\"line\">            &quot;while true;do echo kuangshen;sleep 1;done&quot;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        &quot;State&quot;: &#123;</span><br><span class=\"line\">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class=\"line\">            &quot;Running&quot;: true,</span><br><span class=\"line\">            &quot;Paused&quot;: false,</span><br><span class=\"line\">            &quot;Restarting&quot;: false,</span><br><span class=\"line\">            &quot;OOMKilled&quot;: false,</span><br><span class=\"line\">            &quot;Dead&quot;: false,</span><br><span class=\"line\">            &quot;Pid&quot;: 21212,</span><br><span class=\"line\">            &quot;ExitCode&quot;: 0,</span><br><span class=\"line\">            &quot;Error&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;StartedAt&quot;: &quot;2022-07-29T08:23:57.109766809Z&quot;,</span><br><span class=\"line\">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Image&quot;: &quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;,</span><br><span class=\"line\">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/resolv.conf&quot;,</span><br><span class=\"line\">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/hostname&quot;,</span><br><span class=\"line\">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/hosts&quot;,</span><br><span class=\"line\">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe/88d23bcbe1f28e1f8ae5d2b63fa8d57d2abcbdacf193db05852f4f74a95b9ffe-json.log&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;/silly_lichterman&quot;,</span><br><span class=\"line\">        &quot;RestartCount&quot;: 0,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class=\"line\">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class=\"line\">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ExecIDs&quot;: null,</span><br><span class=\"line\">        &quot;HostConfig&quot;: &#123;</span><br><span class=\"line\">            &quot;Binds&quot;: null,</span><br><span class=\"line\">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LogConfig&quot;: &#123;</span><br><span class=\"line\">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class=\"line\">                &quot;Config&quot;: &#123;&#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class=\"line\">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class=\"line\">            &quot;RestartPolicy&quot;: &#123;</span><br><span class=\"line\">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class=\"line\">                &quot;MaximumRetryCount&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;AutoRemove&quot;: false,</span><br><span class=\"line\">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;VolumesFrom&quot;: null,</span><br><span class=\"line\">            &quot;CapAdd&quot;: null,</span><br><span class=\"line\">            &quot;CapDrop&quot;: null,</span><br><span class=\"line\">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class=\"line\">            &quot;Dns&quot;: [],</span><br><span class=\"line\">            &quot;DnsOptions&quot;: [],</span><br><span class=\"line\">            &quot;DnsSearch&quot;: [],</span><br><span class=\"line\">            &quot;ExtraHosts&quot;: null,</span><br><span class=\"line\">            &quot;GroupAdd&quot;: null,</span><br><span class=\"line\">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class=\"line\">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Links&quot;: null,</span><br><span class=\"line\">            &quot;OomScoreAdj&quot;: 0,</span><br><span class=\"line\">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Privileged&quot;: false,</span><br><span class=\"line\">            &quot;PublishAllPorts&quot;: false,</span><br><span class=\"line\">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class=\"line\">            &quot;SecurityOpt&quot;: null,</span><br><span class=\"line\">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;ShmSize&quot;: 67108864,</span><br><span class=\"line\">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class=\"line\">            &quot;ConsoleSize&quot;: [</span><br><span class=\"line\">                0,</span><br><span class=\"line\">                0</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpuShares&quot;: 0,</span><br><span class=\"line\">            &quot;Memory&quot;: 0,</span><br><span class=\"line\">            &quot;NanoCpus&quot;: 0,</span><br><span class=\"line\">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;BlkioWeight&quot;: 0,</span><br><span class=\"line\">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class=\"line\">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class=\"line\">            &quot;CpuPeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuQuota&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class=\"line\">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Devices&quot;: [],</span><br><span class=\"line\">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class=\"line\">            &quot;DeviceRequests&quot;: null,</span><br><span class=\"line\">            &quot;KernelMemory&quot;: 0,</span><br><span class=\"line\">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class=\"line\">            &quot;MemoryReservation&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwap&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwappiness&quot;: null,</span><br><span class=\"line\">            &quot;OomKillDisable&quot;: false,</span><br><span class=\"line\">            &quot;PidsLimit&quot;: null,</span><br><span class=\"line\">            &quot;Ulimits&quot;: null,</span><br><span class=\"line\">            &quot;CpuCount&quot;: 0,</span><br><span class=\"line\">            &quot;CpuPercent&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class=\"line\">            &quot;MaskedPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/asound&quot;,</span><br><span class=\"line\">                &quot;/proc/acpi&quot;,</span><br><span class=\"line\">                &quot;/proc/kcore&quot;,</span><br><span class=\"line\">                &quot;/proc/keys&quot;,</span><br><span class=\"line\">                &quot;/proc/latency_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_list&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/sched_debug&quot;,</span><br><span class=\"line\">                &quot;/proc/scsi&quot;,</span><br><span class=\"line\">                &quot;/sys/firmware&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;ReadonlyPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/bus&quot;,</span><br><span class=\"line\">                &quot;/proc/fs&quot;,</span><br><span class=\"line\">                &quot;/proc/irq&quot;,</span><br><span class=\"line\">                &quot;/proc/sys&quot;,</span><br><span class=\"line\">                &quot;/proc/sysrq-trigger&quot;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;GraphDriver&quot;: &#123;</span><br><span class=\"line\">            &quot;Data&quot;: &#123;</span><br><span class=\"line\">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b-init/diff:/var/lib/docker/overlay2/7fc43e24b63e4656ab7e7718d3e4ef5297fe82509452be305a01605a7cdc3b97/diff&quot;,</span><br><span class=\"line\">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/merged&quot;,</span><br><span class=\"line\">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/diff&quot;,</span><br><span class=\"line\">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/59b088d44f6e67f4ed336de44d19a5784c1a13fa856760bd2b166c4a4d421e2b/work&quot;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Mounts&quot;: [],</span><br><span class=\"line\">        &quot;Config&quot;: &#123;</span><br><span class=\"line\">            &quot;Hostname&quot;: &quot;88d23bcbe1f2&quot;,</span><br><span class=\"line\">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;User&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;AttachStdin&quot;: false,</span><br><span class=\"line\">            &quot;AttachStdout&quot;: false,</span><br><span class=\"line\">            &quot;AttachStderr&quot;: false,</span><br><span class=\"line\">            &quot;Tty&quot;: false,</span><br><span class=\"line\">            &quot;OpenStdin&quot;: false,</span><br><span class=\"line\">            &quot;StdinOnce&quot;: false,</span><br><span class=\"line\">            &quot;Env&quot;: [</span><br><span class=\"line\">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Cmd&quot;: [</span><br><span class=\"line\">                &quot;/bin/sh&quot;,</span><br><span class=\"line\">                &quot;-c&quot;,</span><br><span class=\"line\">                &quot;while true;do echo kuangshen;sleep 1;done&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Image&quot;: &quot;centos&quot;,</span><br><span class=\"line\">            &quot;Volumes&quot;: null,</span><br><span class=\"line\">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Entrypoint&quot;: null,</span><br><span class=\"line\">            &quot;OnBuild&quot;: null,</span><br><span class=\"line\">            &quot;Labels&quot;: &#123;</span><br><span class=\"line\">                &quot;org.label-schema.build-date&quot;: &quot;20210915&quot;,</span><br><span class=\"line\">                &quot;org.label-schema.license&quot;: &quot;GPLv2&quot;,</span><br><span class=\"line\">                &quot;org.label-schema.name&quot;: &quot;CentOS Base Image&quot;,</span><br><span class=\"line\">                &quot;org.label-schema.schema-version&quot;: &quot;1.0&quot;,</span><br><span class=\"line\">                &quot;org.label-schema.vendor&quot;: &quot;CentOS&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;NetworkSettings&quot;: &#123;</span><br><span class=\"line\">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;SandboxID&quot;: &quot;bfc28d2ba671adfe5c93325173b93c335d50d8b017eed4fdce2ab75410d6ac2e&quot;,</span><br><span class=\"line\">            &quot;HairpinMode&quot;: false,</span><br><span class=\"line\">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class=\"line\">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/bfc28d2ba671&quot;,</span><br><span class=\"line\">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class=\"line\">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class=\"line\">            &quot;EndpointID&quot;: &quot;ad0252d454e751e2c5ecef24e64c32b0884c53242925bd66e9e5dbf5542af179&quot;,</span><br><span class=\"line\">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">            &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class=\"line\">            &quot;Networks&quot;: &#123;</span><br><span class=\"line\">                &quot;bridge&quot;: &#123;</span><br><span class=\"line\">                    &quot;IPAMConfig&quot;: null,</span><br><span class=\"line\">                    &quot;Links&quot;: null,</span><br><span class=\"line\">                    &quot;Aliases&quot;: null,</span><br><span class=\"line\">                    &quot;NetworkID&quot;: &quot;7254ffccbdf53e0c72c1d19252980f04fa65153ea3c7ca72af55cfac504cbe3f&quot;,</span><br><span class=\"line\">                    &quot;EndpointID&quot;: &quot;ad0252d454e751e2c5ecef24e64c32b0884c53242925bd66e9e5dbf5542af179&quot;,</span><br><span class=\"line\">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">                    &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class=\"line\">                    &quot;DriverOpts&quot;: null</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p><strong>进入当前正在运行的容器</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">命令</span></span><br><span class=\"line\">docker exec -it 容器id /bin/bash</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class=\"line\">88d23bcbe1f2   centos    &quot;/bin/sh -c &#x27;while t…&quot;   13 minutes ago   Up 13 minutes             silly_lichterman</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it 88d23bcbe1f2 /bin/bash</span><br><span class=\"line\">[root@88d23bcbe1f2 /]# ps -ef</span><br><span class=\"line\">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class=\"line\">root         1     0  0 08:23 ?        00:00:00 /bin/sh -c while true;do echo kuangshen;sleep 1;done</span><br><span class=\"line\">root       841     0  0 08:37 pts/0    00:00:00 /bin/bash</span><br><span class=\"line\">root       858     1  0 08:37 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1</span><br><span class=\"line\">root       859   841  0 08:37 pts/0    00:00:00 ps -ef</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">方式二</span></span><br><span class=\"line\">docker attach 容器id</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker attach 88d23bcbe1f2</span><br><span class=\"line\">正在执行当前的代码...</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker <span class=\"built_in\">exec</span>        <span class=\"comment\"># 进入容器后开启一个新的终端，可以再里面操作（常用）</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker attach        <span class=\"comment\"># 进入容器正在执行的终端，不会启动新的进程。</span></span></span><br></pre></td></tr></table></figure>\n<p>从容器内拷文件到主机上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp 容器id:容器内路径 目的主机的路径</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入到容器内部</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker attach 6eda31ad7987</span><br><span class=\"line\">[root@6eda31ad7987 /]# ls</span><br><span class=\"line\">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class=\"line\">[root@6eda31ad7987 /]# cd /home/</span><br><span class=\"line\">[root@6eda31ad7987 home]# ls</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">在容器的/home路径下创建test.java文件</span></span><br><span class=\"line\">[root@6eda31ad7987 home]# touch test.java</span><br><span class=\"line\">[root@6eda31ad7987 home]# ls</span><br><span class=\"line\">test.java</span><br><span class=\"line\">[root@6eda31ad7987 home]# exit</span><br><span class=\"line\">exit</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS                      PORTS     NAMES</span><br><span class=\"line\">6eda31ad7987   centos    &quot;/bin/bash&quot;   About a minute ago   Exited (0) 28 seconds ago             stoic_kepler</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">将文件拷贝出来到主机上（在主机上执行该命令）</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker cp 6eda31ad7987:/home/test.java /home</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ home]# ls</span><br><span class=\"line\">test.java</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">拷贝是一个手动过程，未来我们使用 -v 卷的技术，可以实现，自动同步（容器内的/home路径和主机上的/home路径打通）</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"安装软件\"><a class=\"markdownIt-Anchor\" href=\"#安装软件\"></a> 安装软件</h2>\n<h3 id=\"安装nginx\"><a class=\"markdownIt-Anchor\" href=\"#安装nginx\"></a> 安装nginx</h3>\n<p><strong>下载镜像</strong>：pull</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull ngin</span><br></pre></td></tr></table></figure>\n<p><strong>启动nginx</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">-d 后台运行</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">--name=<span class=\"string\">&quot;ngin&quot;</span>    给容器命名</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">-p 宿主机端口:容器内部端口</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker run -d --name nginx -p 3344:80 nginx</span><br><span class=\"line\">6e02190a50bc8d79653ffa88f6b5c143d79c5ac3257d5d5ed6a01247980fb48a</span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                   NAMES</span><br><span class=\"line\">6e02190a50bc   nginx     &quot;/docker-entrypoint.…&quot;   18 seconds ago   Up 17 seconds   0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp   nginx-1</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入容器</span></span><br><span class=\"line\">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it a1e130aa184d /bin/bash</span><br><span class=\"line\">root@a1e130aa184d:/# whereis nginx</span><br><span class=\"line\">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</span><br><span class=\"line\">root@a1e130aa184d:/# cd /etc/nginx/</span><br><span class=\"line\">root@a1e130aa184d:/etc/nginx# ls</span><br><span class=\"line\">conf.d  fastcgi_params  mime.types  modules  nginx.conf  scgi_params  uwsgi_params</span><br></pre></td></tr></table></figure>\n<p><strong>本机测试</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@Wang ~]# curl localhost:3344</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">html &#123; color-scheme: light dark; &#125;</span><br><span class=\"line\">body &#123; width: 35em; margin: 0 auto;</span><br><span class=\"line\">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class=\"line\">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class=\"line\">working. Further configuration is required.&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;p&gt;For online documentation and support please refer to</span><br><span class=\"line\">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class=\"line\">Commercial support is available at</span><br><span class=\"line\">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n"},{"title":"Git","description":null,"date":"2023-05-11T17:00:00.000Z","updated":"2023-05-11T17:00:00.000Z","swiper_index":1,"_content":"\n> git config --global user.name #name\t设置用户签名\n\n> git config --global user.email #email\t设置用户邮箱\n\n---\n\n> git init\t初始化本地库\n\n> git status\t本地库状态\n\n~~~shell\n$ git status\t本地库状态\nOn branch master\n\nNo commits yet\t\n\nnothing to commit (create/copy files and use \"git add\" to track)\t# 还没有文件\n\n$ git status\nOn branch master\n\nNo commits yet\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n        test.txt\n\nnothing added to commit but untracked files present (use \"git add\" to track)\n~~~\n\n> git add #filename\n\n~~~\n~~~\n\n\n\n> git config --list    #查看git配置信息\n\n![image-20230307101516684](../img/image-20230307101516684.png)\n\n\n\n查看用户名，密码和邮箱命令：\n\n~~~bash\ngit config user.name \ngit config user.password \ngit config user.email \n~~~\n\n设置或修改用户名，密码和邮箱命令：\n\n~~~bash\ngit config --global user.name \"freedom\"\ngit config --global user.password \"123456\"\ngit config --global user.email \"12345678@qq.com\"\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Git分支 \n\n> 切换分支\n\n```Shell\ngit checkout branchName\n```\n\n> 查看分支\n\n```Shell\ngit branch -a\n```\n\n\n\n\n\n\n\n\n\n## 使用码云\n\n1. 注册登录，完善信息\n2. 设置本机绑定SSH密钥，实现免密码登录\n\n~~~bash\n# 进入C:\\Users\\Admin\\.ssh\n# 生成公钥\nssh-keygen -t rsa\n~~~\n\n![image-20230222173117354](../img/image-20230222173117354.png)\n\n3. 添加密钥到码云\n\n![image-20230222173328690](../img/image-20230222173328690.png)\n\n4. 使用码云创建自己的仓库\n\n许可证：开源是否可以随意转载，开源但不能商业使用、不能转载，...限制\n\n\n\n5. 克隆自己的仓库\n\n![image-20230222175655348](../img/image-20230222175655348.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Idea集成Git\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/Git.md","raw":"---\ntitle: Git\ndescription:\ndate: 2023-05-12 1:0:00\nupdated: 2023-05-12 1:0:00\ntags:\n  - Git\ncategories:\n  - 技术栈\nswiper_index: 1 # 置顶权重\n---\n\n> git config --global user.name #name\t设置用户签名\n\n> git config --global user.email #email\t设置用户邮箱\n\n---\n\n> git init\t初始化本地库\n\n> git status\t本地库状态\n\n~~~shell\n$ git status\t本地库状态\nOn branch master\n\nNo commits yet\t\n\nnothing to commit (create/copy files and use \"git add\" to track)\t# 还没有文件\n\n$ git status\nOn branch master\n\nNo commits yet\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n        test.txt\n\nnothing added to commit but untracked files present (use \"git add\" to track)\n~~~\n\n> git add #filename\n\n~~~\n~~~\n\n\n\n> git config --list    #查看git配置信息\n\n![image-20230307101516684](../img/image-20230307101516684.png)\n\n\n\n查看用户名，密码和邮箱命令：\n\n~~~bash\ngit config user.name \ngit config user.password \ngit config user.email \n~~~\n\n设置或修改用户名，密码和邮箱命令：\n\n~~~bash\ngit config --global user.name \"freedom\"\ngit config --global user.password \"123456\"\ngit config --global user.email \"12345678@qq.com\"\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Git分支 \n\n> 切换分支\n\n```Shell\ngit checkout branchName\n```\n\n> 查看分支\n\n```Shell\ngit branch -a\n```\n\n\n\n\n\n\n\n\n\n## 使用码云\n\n1. 注册登录，完善信息\n2. 设置本机绑定SSH密钥，实现免密码登录\n\n~~~bash\n# 进入C:\\Users\\Admin\\.ssh\n# 生成公钥\nssh-keygen -t rsa\n~~~\n\n![image-20230222173117354](../img/image-20230222173117354.png)\n\n3. 添加密钥到码云\n\n![image-20230222173328690](../img/image-20230222173328690.png)\n\n4. 使用码云创建自己的仓库\n\n许可证：开源是否可以随意转载，开源但不能商业使用、不能转载，...限制\n\n\n\n5. 克隆自己的仓库\n\n![image-20230222175655348](../img/image-20230222175655348.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Idea集成Git\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Git","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clhje45zg0007qc9hfgavb70c","content":"<blockquote>\n<p>git config --global <a href=\"http://user.name\">user.name</a> #name\t设置用户签名</p>\n</blockquote>\n<blockquote>\n<p>git config --global user.email #email\t设置用户邮箱</p>\n</blockquote>\n<hr />\n<blockquote>\n<p>git init\t初始化本地库</p>\n</blockquote>\n<blockquote>\n<p>git status\t本地库状态</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">git status\t本地库状态</span></span><br><span class=\"line\">On branch master</span><br><span class=\"line\"></span><br><span class=\"line\">No commits yet\t</span><br><span class=\"line\"></span><br><span class=\"line\">nothing to commit (create/copy files and use &quot;git add&quot; to track)\t# 还没有文件</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">git status</span></span><br><span class=\"line\">On branch master</span><br><span class=\"line\"></span><br><span class=\"line\">No commits yet</span><br><span class=\"line\"></span><br><span class=\"line\">Untracked files:</span><br><span class=\"line\">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class=\"line\">        test.txt</span><br><span class=\"line\"></span><br><span class=\"line\">nothing added to commit but untracked files present (use &quot;git add&quot; to track)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>git add #filename</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~~~</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt; git config --list    #查看git配置信息</span><br><span class=\"line\"></span><br><span class=\"line\">![image-20230307101516684](../img/image-20230307101516684.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">查看用户名，密码和邮箱命令：</span><br><span class=\"line\"></span><br><span class=\"line\">~~~bash</span><br><span class=\"line\">git config user.name </span><br><span class=\"line\">git config user.password </span><br><span class=\"line\">git config user.email </span><br></pre></td></tr></table></figure>\n<p>设置或修改用户名，密码和邮箱命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">&quot;freedom&quot;</span></span><br><span class=\"line\">git config --global user.password <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">&quot;12345678@qq.com&quot;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"git分支\"><a class=\"markdownIt-Anchor\" href=\"#git分支\"></a> Git分支</h2>\n<blockquote>\n<p>切换分支</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout branchName</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>查看分支</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch -a</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用码云\"><a class=\"markdownIt-Anchor\" href=\"#使用码云\"></a> 使用码云</h2>\n<ol>\n<li>注册登录，完善信息</li>\n<li>设置本机绑定SSH密钥，实现免密码登录</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 进入C:\\Users\\Admin\\.ssh</span></span><br><span class=\"line\"><span class=\"comment\"># 生成公钥</span></span><br><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n<p><img src=\"../img/image-20230222173117354.png\" alt=\"image-20230222173117354\" /></p>\n<ol start=\"3\">\n<li>添加密钥到码云</li>\n</ol>\n<p><img src=\"../img/image-20230222173328690.png\" alt=\"image-20230222173328690\" /></p>\n<ol start=\"4\">\n<li>使用码云创建自己的仓库</li>\n</ol>\n<p>许可证：开源是否可以随意转载，开源但不能商业使用、不能转载，…限制</p>\n<ol start=\"5\">\n<li>克隆自己的仓库</li>\n</ol>\n<p><img src=\"../img/image-20230222175655348.png\" alt=\"image-20230222175655348\" /></p>\n<h2 id=\"idea集成git\"><a class=\"markdownIt-Anchor\" href=\"#idea集成git\"></a> Idea集成Git</h2>\n","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/03/30/11/58/norway-7887613_960_720.jpg","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>git config --global <a href=\"http://user.name\">user.name</a> #name\t设置用户签名</p>\n</blockquote>\n<blockquote>\n<p>git config --global user.email #email\t设置用户邮箱</p>\n</blockquote>\n<hr />\n<blockquote>\n<p>git init\t初始化本地库</p>\n</blockquote>\n<blockquote>\n<p>git status\t本地库状态</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">git status\t本地库状态</span></span><br><span class=\"line\">On branch master</span><br><span class=\"line\"></span><br><span class=\"line\">No commits yet\t</span><br><span class=\"line\"></span><br><span class=\"line\">nothing to commit (create/copy files and use &quot;git add&quot; to track)\t# 还没有文件</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">git status</span></span><br><span class=\"line\">On branch master</span><br><span class=\"line\"></span><br><span class=\"line\">No commits yet</span><br><span class=\"line\"></span><br><span class=\"line\">Untracked files:</span><br><span class=\"line\">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class=\"line\">        test.txt</span><br><span class=\"line\"></span><br><span class=\"line\">nothing added to commit but untracked files present (use &quot;git add&quot; to track)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>git add #filename</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~~~</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt; git config --list    #查看git配置信息</span><br><span class=\"line\"></span><br><span class=\"line\">![image-20230307101516684](../img/image-20230307101516684.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">查看用户名，密码和邮箱命令：</span><br><span class=\"line\"></span><br><span class=\"line\">~~~bash</span><br><span class=\"line\">git config user.name </span><br><span class=\"line\">git config user.password </span><br><span class=\"line\">git config user.email </span><br></pre></td></tr></table></figure>\n<p>设置或修改用户名，密码和邮箱命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">&quot;freedom&quot;</span></span><br><span class=\"line\">git config --global user.password <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">&quot;12345678@qq.com&quot;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"git分支\"><a class=\"markdownIt-Anchor\" href=\"#git分支\"></a> Git分支</h2>\n<blockquote>\n<p>切换分支</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout branchName</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>查看分支</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch -a</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用码云\"><a class=\"markdownIt-Anchor\" href=\"#使用码云\"></a> 使用码云</h2>\n<ol>\n<li>注册登录，完善信息</li>\n<li>设置本机绑定SSH密钥，实现免密码登录</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 进入C:\\Users\\Admin\\.ssh</span></span><br><span class=\"line\"><span class=\"comment\"># 生成公钥</span></span><br><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n<p><img src=\"../img/image-20230222173117354.png\" alt=\"image-20230222173117354\" /></p>\n<ol start=\"3\">\n<li>添加密钥到码云</li>\n</ol>\n<p><img src=\"../img/image-20230222173328690.png\" alt=\"image-20230222173328690\" /></p>\n<ol start=\"4\">\n<li>使用码云创建自己的仓库</li>\n</ol>\n<p>许可证：开源是否可以随意转载，开源但不能商业使用、不能转载，…限制</p>\n<ol start=\"5\">\n<li>克隆自己的仓库</li>\n</ol>\n<p><img src=\"../img/image-20230222175655348.png\" alt=\"image-20230222175655348\" /></p>\n<h2 id=\"idea集成git\"><a class=\"markdownIt-Anchor\" href=\"#idea集成git\"></a> Idea集成Git</h2>\n"},{"title":"Python打包exe","description":null,"date":"2023-05-09T08:10:00.000Z","updated":"2023-05-09T08:10:00.000Z","swiper_index":1,"_content":"\n## 使用pyinstaller打包\n\n在pycharm中点击**新建环境**\n\n![image-20230509165923855](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509165923855.png)\n\n进入文件后，会有一个文件夹`venv`，用来存放管理的库文件\n\n### 创建requirements.txt\n\n~~~shell\npip install requests\n~~~\n\n~~~shell\npip freeze > requirements.txt\n~~~\n\n![image-20230509170609691](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509170609691.png)\n\n可以看到虚拟环境下安装的包\n\n\n\n## 安装pyinstaller\n\n~~~shell\npip install pyinstaller\n~~~\n\n安装完成后将终端关闭，**重新打开**\n\n我们输入`pyinstaller`，当出现一下结果，说明安装成功\n\n![image-20230509171248558](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171248558.png)\n\n\n\n### 单文件打包\n\n~~~shell\npyinstaller -D app.py\n~~~\n\n开始打包\n\n![image-20230509171708499](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171708499.png)\n\n之后在当前文件夹会出现三个文件\n\n+ **build**：中间编译时，产出的文件\n+ **dist**：打包生成后的文件目录\n+ **xxx.spec**：打包的配置文件\n\n在`dist`中可以看到有我们上面起的名字`app`，只需将**app文件夹**发给他人，打开里面的**app.exe**文件，即可使用\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/Python打包exe.md","raw":"---\ntitle: Python打包exe\ndescription:\ndate: 2023-05-9 16:10:00\nupdated: 2023-05-9 16:10:00\ntags:\n  - Python\ncategories:\n  - 开发\nswiper_index: 1\n---\n\n## 使用pyinstaller打包\n\n在pycharm中点击**新建环境**\n\n![image-20230509165923855](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509165923855.png)\n\n进入文件后，会有一个文件夹`venv`，用来存放管理的库文件\n\n### 创建requirements.txt\n\n~~~shell\npip install requests\n~~~\n\n~~~shell\npip freeze > requirements.txt\n~~~\n\n![image-20230509170609691](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509170609691.png)\n\n可以看到虚拟环境下安装的包\n\n\n\n## 安装pyinstaller\n\n~~~shell\npip install pyinstaller\n~~~\n\n安装完成后将终端关闭，**重新打开**\n\n我们输入`pyinstaller`，当出现一下结果，说明安装成功\n\n![image-20230509171248558](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171248558.png)\n\n\n\n### 单文件打包\n\n~~~shell\npyinstaller -D app.py\n~~~\n\n开始打包\n\n![image-20230509171708499](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171708499.png)\n\n之后在当前文件夹会出现三个文件\n\n+ **build**：中间编译时，产出的文件\n+ **dist**：打包生成后的文件目录\n+ **xxx.spec**：打包的配置文件\n\n在`dist`中可以看到有我们上面起的名字`app`，只需将**app文件夹**发给他人，打开里面的**app.exe**文件，即可使用\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Python打包exe","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clhje45zi0009qc9hdwys49i2","content":"<h2 id=\"使用pyinstaller打包\"><a class=\"markdownIt-Anchor\" href=\"#使用pyinstaller打包\"></a> 使用pyinstaller打包</h2>\n<p>在pycharm中点击<strong>新建环境</strong></p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509165923855.png\" alt=\"image-20230509165923855\" /></p>\n<p>进入文件后，会有一个文件夹<code>venv</code>，用来存放管理的库文件</p>\n<h3 id=\"创建requirementstxt\"><a class=\"markdownIt-Anchor\" href=\"#创建requirementstxt\"></a> 创建requirements.txt</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install requests</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509170609691.png\" alt=\"image-20230509170609691\" /></p>\n<p>可以看到虚拟环境下安装的包</p>\n<h2 id=\"安装pyinstaller\"><a class=\"markdownIt-Anchor\" href=\"#安装pyinstaller\"></a> 安装pyinstaller</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pyinstaller</span><br></pre></td></tr></table></figure>\n<p>安装完成后将终端关闭，<strong>重新打开</strong></p>\n<p>我们输入<code>pyinstaller</code>，当出现一下结果，说明安装成功</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171248558.png\" alt=\"image-20230509171248558\" /></p>\n<h3 id=\"单文件打包\"><a class=\"markdownIt-Anchor\" href=\"#单文件打包\"></a> 单文件打包</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pyinstaller -D app.py</span><br></pre></td></tr></table></figure>\n<p>开始打包</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171708499.png\" alt=\"image-20230509171708499\" /></p>\n<p>之后在当前文件夹会出现三个文件</p>\n<ul>\n<li><strong>build</strong>：中间编译时，产出的文件</li>\n<li><strong>dist</strong>：打包生成后的文件目录</li>\n<li><strong>xxx.spec</strong>：打包的配置文件</li>\n</ul>\n<p>在<code>dist</code>中可以看到有我们上面起的名字<code>app</code>，只需将<strong>app文件夹</strong>发给他人，打开里面的<strong>app.exe</strong>文件，即可使用</p>\n","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/04/30/12/15/rock-formations-7960445_960_720.jpg","cover_type":"img","excerpt":"","more":"<h2 id=\"使用pyinstaller打包\"><a class=\"markdownIt-Anchor\" href=\"#使用pyinstaller打包\"></a> 使用pyinstaller打包</h2>\n<p>在pycharm中点击<strong>新建环境</strong></p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509165923855.png\" alt=\"image-20230509165923855\" /></p>\n<p>进入文件后，会有一个文件夹<code>venv</code>，用来存放管理的库文件</p>\n<h3 id=\"创建requirementstxt\"><a class=\"markdownIt-Anchor\" href=\"#创建requirementstxt\"></a> 创建requirements.txt</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install requests</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509170609691.png\" alt=\"image-20230509170609691\" /></p>\n<p>可以看到虚拟环境下安装的包</p>\n<h2 id=\"安装pyinstaller\"><a class=\"markdownIt-Anchor\" href=\"#安装pyinstaller\"></a> 安装pyinstaller</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pyinstaller</span><br></pre></td></tr></table></figure>\n<p>安装完成后将终端关闭，<strong>重新打开</strong></p>\n<p>我们输入<code>pyinstaller</code>，当出现一下结果，说明安装成功</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171248558.png\" alt=\"image-20230509171248558\" /></p>\n<h3 id=\"单文件打包\"><a class=\"markdownIt-Anchor\" href=\"#单文件打包\"></a> 单文件打包</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pyinstaller -D app.py</span><br></pre></td></tr></table></figure>\n<p>开始打包</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509171708499.png\" alt=\"image-20230509171708499\" /></p>\n<p>之后在当前文件夹会出现三个文件</p>\n<ul>\n<li><strong>build</strong>：中间编译时，产出的文件</li>\n<li><strong>dist</strong>：打包生成后的文件目录</li>\n<li><strong>xxx.spec</strong>：打包的配置文件</li>\n</ul>\n<p>在<code>dist</code>中可以看到有我们上面起的名字<code>app</code>，只需将<strong>app文件夹</strong>发给他人，打开里面的<strong>app.exe</strong>文件，即可使用</p>\n"},{"title":"python常用工具","description":null,"date":"2023-05-11T17:00:00.000Z","updated":"2023-05-11T17:00:00.000Z","swiper_index":1,"_content":"\n\n## 文件读写\n\n~~~python\nwith open('xxx.txt', 'w', encoding='utf-8') as f:\n\tf.write('xxx' + '\\n')\n    f.close()\n~~~\n\n\n\n## 爬虫\n\n> 代码案例\n\n~~~python\nfrom bs4 import BeautifulSoup\nimport requests\n\ndef getHTMLText(url):\n    try:\n        headers = {\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'}\n        res = requests.get(url, headers=headers)\n        res.raise_for_status()\n        res.encoding = res.apparent_encoding\n        return res.text\n    except:\n        return 'error'\n\ndef get_info(url):\n    demo = getHTMLText(url)\n    soup = BeautifulSoup(demo, 'html.parser')\n    table = soup.find('table', {'class': 'rk-table'})\n    tbody = table.find('tbody')\n    rows = tbody.find_all('tr')\n    for row in rows:\n        tds = row.find_all('td')\n        rank = tds[0].text.strip()\n        name = row.find('a').text.strip()\n        location = tds[2].text.strip()\n        total = tds[4].text.strip()\n        data = {\n            '排名': rank,\n            '学校名称': name,\n            '省市': location,\n            '总分': total\n        }\n        print(data)\n\n\nurl_2020 = 'https://www.shanghairanking.cn/rankings/bcur/2020'\nurl_2021 = 'https://www.shanghairanking.cn/rankings/bcur/2021'\nget_info(url_2021)\n~~~\n\n\n\n## 数据库管理\n\n~~~python\nimport pymysql\n\nconn=pymysql.connect(host = '127.0.0.1' # 连接名称，默认127.0.0.1\n,user = 'root' # 用户名\n,passwd='123456' # 密码\n,port= 3306 # 端口，默认为3306\n,db='python' # 数据库名称\n,charset='utf8' # 字符编码\n)\ncur = conn.cursor() # 生成游标对象\nif cur:\n    print('数据库连接成功')\nsql=\"select * from `web` \" # SQL语句\ncur.execute(sql) # 执行SQL语句\ndata = cur.fetchall() # 通过fetchall方法获得数据\nfor i in data[:1]: # 打印输出1条数据\n    print(i)\ncur.close() # 关闭游标\nconn.close() # 关闭连接\n~~~\n\n\n\n## 爬虫案例（写入数据库）\n\n> 实例\n\n~~~python\nimport json\nimport re\nimport pymysql\nimport requests\n\nconn = pymysql.connect(host='127.0.0.1'  # 连接名称，默认127.0.0.1\n                       , user='root'  # 用户名\n                       , passwd='123456'  # 密码\n                       , port=3306  # 端口，默认为3306\n                       , db='python'  # 数据库名称\n                       , charset='utf8'  # 字符编码\n                       )\ncur = conn.cursor()  # 生成游标对象\n\n\ndef getHTMLText(url):\n    try:\n        headers = {\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'}\n        res = requests.get(url, headers=headers)\n        res.raise_for_status()\n        res.encoding = res.apparent_encoding\n        return res.text\n    except:\n        return 'error'\n\n\ndef main(url):\n    res = getHTMLText(url)\n    regex = re.compile(r\"(?=\\()(.*)(?<=\\))\")\n    jsonString = regex.findall(res)[-1]\n    jsonString = jsonString.strip('()')\n    jsonData = json.loads(jsonString)\n    diffValue = jsonData['data']['diff']\n    for i in range(len(diffValue)):\n        demo = diffValue[i]['f12']\n        name = diffValue[i]['f14']\n        sql = \"INSERT INTO money(demo,name) VALUES ('{}', '{}');\".format(demo, name)\n        cur.execute(sql)\n        conn.commit()\n        print(demo+name)\n    cur.close()\n    conn.close()\n\n\nurl = 'http://85.push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124007516892373587614_1682312504170&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=|0|0|0|web&fid=f3&fs=m:0+t:6,m:0+t:80,m:1+t:2,m:1+t:23,m:0+t:81+s:2048&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&_=1682312504458'\nmain(url)\n~~~\n\n\n\n## 图片转文字画\n\n~~~python\nimport numpy as np\nfrom PIL import Image\nimport time\n\nif __name__ == '__main__':\n    start_time = time.time()\n    image_file = 'lena.png'\n    height = 100\n\n    img = Image.open(image_file)\n    img_width, img_height = img.size\n    width = int(1.8 * height * img_width // img_height)\n    img = img.resize((width, height), Image.ANTIALIAS)\n    pixels = np.array(img.convert('L'))\n    print('type(pixels) = ', type(pixels))\n    print(pixels.shape)\n    print(pixels)\n    chars = \"MNHQ$OC?7>!:-;. \"\n    N = len(chars)\n    step = 256 // N\n    print(N)\n    result = ''\n    for i in range(height):\n        for j in range(width):\n            result += chars[pixels[i][j] // step]\n        result += '\\n'\n    with open('text.txt', mode='w') as f:\n        f.write(result)\n    end_time = time.time()\n    elapsed_time = end_time - start_time\n    print(f'程序耗时：{elapsed_time:.2f} 秒')\n~~~\n\n**示例**\n\n![image-20230504112017912](./img/image-20230504112017912.png)\n","source":"_posts/python常用工具.md","raw":"---\ntitle: python常用工具\ndescription:\ndate: 2023-05-12 1:0:00\nupdated: 2023-05-12 1:0:00\ntags:\n  - Python\ncategories:\n  - 开发\nswiper_index: 1 # 置顶权重\n---\n\n\n## 文件读写\n\n~~~python\nwith open('xxx.txt', 'w', encoding='utf-8') as f:\n\tf.write('xxx' + '\\n')\n    f.close()\n~~~\n\n\n\n## 爬虫\n\n> 代码案例\n\n~~~python\nfrom bs4 import BeautifulSoup\nimport requests\n\ndef getHTMLText(url):\n    try:\n        headers = {\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'}\n        res = requests.get(url, headers=headers)\n        res.raise_for_status()\n        res.encoding = res.apparent_encoding\n        return res.text\n    except:\n        return 'error'\n\ndef get_info(url):\n    demo = getHTMLText(url)\n    soup = BeautifulSoup(demo, 'html.parser')\n    table = soup.find('table', {'class': 'rk-table'})\n    tbody = table.find('tbody')\n    rows = tbody.find_all('tr')\n    for row in rows:\n        tds = row.find_all('td')\n        rank = tds[0].text.strip()\n        name = row.find('a').text.strip()\n        location = tds[2].text.strip()\n        total = tds[4].text.strip()\n        data = {\n            '排名': rank,\n            '学校名称': name,\n            '省市': location,\n            '总分': total\n        }\n        print(data)\n\n\nurl_2020 = 'https://www.shanghairanking.cn/rankings/bcur/2020'\nurl_2021 = 'https://www.shanghairanking.cn/rankings/bcur/2021'\nget_info(url_2021)\n~~~\n\n\n\n## 数据库管理\n\n~~~python\nimport pymysql\n\nconn=pymysql.connect(host = '127.0.0.1' # 连接名称，默认127.0.0.1\n,user = 'root' # 用户名\n,passwd='123456' # 密码\n,port= 3306 # 端口，默认为3306\n,db='python' # 数据库名称\n,charset='utf8' # 字符编码\n)\ncur = conn.cursor() # 生成游标对象\nif cur:\n    print('数据库连接成功')\nsql=\"select * from `web` \" # SQL语句\ncur.execute(sql) # 执行SQL语句\ndata = cur.fetchall() # 通过fetchall方法获得数据\nfor i in data[:1]: # 打印输出1条数据\n    print(i)\ncur.close() # 关闭游标\nconn.close() # 关闭连接\n~~~\n\n\n\n## 爬虫案例（写入数据库）\n\n> 实例\n\n~~~python\nimport json\nimport re\nimport pymysql\nimport requests\n\nconn = pymysql.connect(host='127.0.0.1'  # 连接名称，默认127.0.0.1\n                       , user='root'  # 用户名\n                       , passwd='123456'  # 密码\n                       , port=3306  # 端口，默认为3306\n                       , db='python'  # 数据库名称\n                       , charset='utf8'  # 字符编码\n                       )\ncur = conn.cursor()  # 生成游标对象\n\n\ndef getHTMLText(url):\n    try:\n        headers = {\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'}\n        res = requests.get(url, headers=headers)\n        res.raise_for_status()\n        res.encoding = res.apparent_encoding\n        return res.text\n    except:\n        return 'error'\n\n\ndef main(url):\n    res = getHTMLText(url)\n    regex = re.compile(r\"(?=\\()(.*)(?<=\\))\")\n    jsonString = regex.findall(res)[-1]\n    jsonString = jsonString.strip('()')\n    jsonData = json.loads(jsonString)\n    diffValue = jsonData['data']['diff']\n    for i in range(len(diffValue)):\n        demo = diffValue[i]['f12']\n        name = diffValue[i]['f14']\n        sql = \"INSERT INTO money(demo,name) VALUES ('{}', '{}');\".format(demo, name)\n        cur.execute(sql)\n        conn.commit()\n        print(demo+name)\n    cur.close()\n    conn.close()\n\n\nurl = 'http://85.push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124007516892373587614_1682312504170&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=|0|0|0|web&fid=f3&fs=m:0+t:6,m:0+t:80,m:1+t:2,m:1+t:23,m:0+t:81+s:2048&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&_=1682312504458'\nmain(url)\n~~~\n\n\n\n## 图片转文字画\n\n~~~python\nimport numpy as np\nfrom PIL import Image\nimport time\n\nif __name__ == '__main__':\n    start_time = time.time()\n    image_file = 'lena.png'\n    height = 100\n\n    img = Image.open(image_file)\n    img_width, img_height = img.size\n    width = int(1.8 * height * img_width // img_height)\n    img = img.resize((width, height), Image.ANTIALIAS)\n    pixels = np.array(img.convert('L'))\n    print('type(pixels) = ', type(pixels))\n    print(pixels.shape)\n    print(pixels)\n    chars = \"MNHQ$OC?7>!:-;. \"\n    N = len(chars)\n    step = 256 // N\n    print(N)\n    result = ''\n    for i in range(height):\n        for j in range(width):\n            result += chars[pixels[i][j] // step]\n        result += '\\n'\n    with open('text.txt', mode='w') as f:\n        f.write(result)\n    end_time = time.time()\n    elapsed_time = end_time - start_time\n    print(f'程序耗时：{elapsed_time:.2f} 秒')\n~~~\n\n**示例**\n\n![image-20230504112017912](./img/image-20230504112017912.png)\n","slug":"python常用工具","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clhje45zj000bqc9h3x6xglal","content":"<h2 id=\"文件读写\"><a class=\"markdownIt-Anchor\" href=\"#文件读写\"></a> 文件读写</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;xxx.txt&#x27;</span>, <span class=\"string\">&#x27;w&#x27;</span>, encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">\tf.write(<span class=\"string\">&#x27;xxx&#x27;</span> + <span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\">    f.close()</span><br></pre></td></tr></table></figure>\n<h2 id=\"爬虫\"><a class=\"markdownIt-Anchor\" href=\"#爬虫\"></a> 爬虫</h2>\n<blockquote>\n<p>代码案例</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">getHTMLText</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        headers = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36&#x27;</span>&#125;</span><br><span class=\"line\">        res = requests.get(url, headers=headers)</span><br><span class=\"line\">        res.raise_for_status()</span><br><span class=\"line\">        res.encoding = res.apparent_encoding</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.text</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_info</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    demo = getHTMLText(url)</span><br><span class=\"line\">    soup = BeautifulSoup(demo, <span class=\"string\">&#x27;html.parser&#x27;</span>)</span><br><span class=\"line\">    table = soup.find(<span class=\"string\">&#x27;table&#x27;</span>, &#123;<span class=\"string\">&#x27;class&#x27;</span>: <span class=\"string\">&#x27;rk-table&#x27;</span>&#125;)</span><br><span class=\"line\">    tbody = table.find(<span class=\"string\">&#x27;tbody&#x27;</span>)</span><br><span class=\"line\">    rows = tbody.find_all(<span class=\"string\">&#x27;tr&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> rows:</span><br><span class=\"line\">        tds = row.find_all(<span class=\"string\">&#x27;td&#x27;</span>)</span><br><span class=\"line\">        rank = tds[<span class=\"number\">0</span>].text.strip()</span><br><span class=\"line\">        name = row.find(<span class=\"string\">&#x27;a&#x27;</span>).text.strip()</span><br><span class=\"line\">        location = tds[<span class=\"number\">2</span>].text.strip()</span><br><span class=\"line\">        total = tds[<span class=\"number\">4</span>].text.strip()</span><br><span class=\"line\">        data = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;排名&#x27;</span>: rank,</span><br><span class=\"line\">            <span class=\"string\">&#x27;学校名称&#x27;</span>: name,</span><br><span class=\"line\">            <span class=\"string\">&#x27;省市&#x27;</span>: location,</span><br><span class=\"line\">            <span class=\"string\">&#x27;总分&#x27;</span>: total</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">url_2020 = <span class=\"string\">&#x27;https://www.shanghairanking.cn/rankings/bcur/2020&#x27;</span></span><br><span class=\"line\">url_2021 = <span class=\"string\">&#x27;https://www.shanghairanking.cn/rankings/bcur/2021&#x27;</span></span><br><span class=\"line\">get_info(url_2021)</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据库管理\"><a class=\"markdownIt-Anchor\" href=\"#数据库管理\"></a> 数据库管理</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pymysql</span><br><span class=\"line\"></span><br><span class=\"line\">conn=pymysql.connect(host = <span class=\"string\">&#x27;127.0.0.1&#x27;</span> <span class=\"comment\"># 连接名称，默认127.0.0.1</span></span><br><span class=\"line\">,user = <span class=\"string\">&#x27;root&#x27;</span> <span class=\"comment\"># 用户名</span></span><br><span class=\"line\">,passwd=<span class=\"string\">&#x27;123456&#x27;</span> <span class=\"comment\"># 密码</span></span><br><span class=\"line\">,port= <span class=\"number\">3306</span> <span class=\"comment\"># 端口，默认为3306</span></span><br><span class=\"line\">,db=<span class=\"string\">&#x27;python&#x27;</span> <span class=\"comment\"># 数据库名称</span></span><br><span class=\"line\">,charset=<span class=\"string\">&#x27;utf8&#x27;</span> <span class=\"comment\"># 字符编码</span></span><br><span class=\"line\">)</span><br><span class=\"line\">cur = conn.cursor() <span class=\"comment\"># 生成游标对象</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> cur:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;数据库连接成功&#x27;</span>)</span><br><span class=\"line\">sql=<span class=\"string\">&quot;select * from `web` &quot;</span> <span class=\"comment\"># SQL语句</span></span><br><span class=\"line\">cur.execute(sql) <span class=\"comment\"># 执行SQL语句</span></span><br><span class=\"line\">data = cur.fetchall() <span class=\"comment\"># 通过fetchall方法获得数据</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> data[:<span class=\"number\">1</span>]: <span class=\"comment\"># 打印输出1条数据</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(i)</span><br><span class=\"line\">cur.close() <span class=\"comment\"># 关闭游标</span></span><br><span class=\"line\">conn.close() <span class=\"comment\"># 关闭连接</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"爬虫案例写入数据库\"><a class=\"markdownIt-Anchor\" href=\"#爬虫案例写入数据库\"></a> 爬虫案例（写入数据库）</h2>\n<blockquote>\n<p>实例</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> pymysql</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\">conn = pymysql.connect(host=<span class=\"string\">&#x27;127.0.0.1&#x27;</span>  <span class=\"comment\"># 连接名称，默认127.0.0.1</span></span><br><span class=\"line\">                       , user=<span class=\"string\">&#x27;root&#x27;</span>  <span class=\"comment\"># 用户名</span></span><br><span class=\"line\">                       , passwd=<span class=\"string\">&#x27;123456&#x27;</span>  <span class=\"comment\"># 密码</span></span><br><span class=\"line\">                       , port=<span class=\"number\">3306</span>  <span class=\"comment\"># 端口，默认为3306</span></span><br><span class=\"line\">                       , db=<span class=\"string\">&#x27;python&#x27;</span>  <span class=\"comment\"># 数据库名称</span></span><br><span class=\"line\">                       , charset=<span class=\"string\">&#x27;utf8&#x27;</span>  <span class=\"comment\"># 字符编码</span></span><br><span class=\"line\">                       )</span><br><span class=\"line\">cur = conn.cursor()  <span class=\"comment\"># 生成游标对象</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">getHTMLText</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        headers = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36&#x27;</span>&#125;</span><br><span class=\"line\">        res = requests.get(url, headers=headers)</span><br><span class=\"line\">        res.raise_for_status()</span><br><span class=\"line\">        res.encoding = res.apparent_encoding</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.text</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    res = getHTMLText(url)</span><br><span class=\"line\">    regex = re.<span class=\"built_in\">compile</span>(<span class=\"string\">r&quot;(?=\\()(.*)(?&lt;=\\))&quot;</span>)</span><br><span class=\"line\">    jsonString = regex.findall(res)[-<span class=\"number\">1</span>]</span><br><span class=\"line\">    jsonString = jsonString.strip(<span class=\"string\">&#x27;()&#x27;</span>)</span><br><span class=\"line\">    jsonData = json.loads(jsonString)</span><br><span class=\"line\">    diffValue = jsonData[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;diff&#x27;</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(diffValue)):</span><br><span class=\"line\">        demo = diffValue[i][<span class=\"string\">&#x27;f12&#x27;</span>]</span><br><span class=\"line\">        name = diffValue[i][<span class=\"string\">&#x27;f14&#x27;</span>]</span><br><span class=\"line\">        sql = <span class=\"string\">&quot;INSERT INTO money(demo,name) VALUES (&#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;);&quot;</span>.<span class=\"built_in\">format</span>(demo, name)</span><br><span class=\"line\">        cur.execute(sql)</span><br><span class=\"line\">        conn.commit()</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(demo+name)</span><br><span class=\"line\">    cur.close()</span><br><span class=\"line\">    conn.close()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">&#x27;http://85.push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124007516892373587614_1682312504170&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=|0|0|0|web&amp;fid=f3&amp;fs=m:0+t:6,m:0+t:80,m:1+t:2,m:1+t:23,m:0+t:81+s:2048&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&amp;_=1682312504458&#x27;</span></span><br><span class=\"line\">main(url)</span><br></pre></td></tr></table></figure>\n<h2 id=\"图片转文字画\"><a class=\"markdownIt-Anchor\" href=\"#图片转文字画\"></a> 图片转文字画</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    start_time = time.time()</span><br><span class=\"line\">    image_file = <span class=\"string\">&#x27;lena.png&#x27;</span></span><br><span class=\"line\">    height = <span class=\"number\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\">    img = Image.<span class=\"built_in\">open</span>(image_file)</span><br><span class=\"line\">    img_width, img_height = img.size</span><br><span class=\"line\">    width = <span class=\"built_in\">int</span>(<span class=\"number\">1.8</span> * height * img_width // img_height)</span><br><span class=\"line\">    img = img.resize((width, height), Image.ANTIALIAS)</span><br><span class=\"line\">    pixels = np.array(img.convert(<span class=\"string\">&#x27;L&#x27;</span>))</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;type(pixels) = &#x27;</span>, <span class=\"built_in\">type</span>(pixels))</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(pixels.shape)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(pixels)</span><br><span class=\"line\">    chars = <span class=\"string\">&quot;MNHQ$OC?7&gt;!:-;. &quot;</span></span><br><span class=\"line\">    N = <span class=\"built_in\">len</span>(chars)</span><br><span class=\"line\">    step = <span class=\"number\">256</span> // N</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(N)</span><br><span class=\"line\">    result = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(height):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(width):</span><br><span class=\"line\">            result += chars[pixels[i][j] // step]</span><br><span class=\"line\">        result += <span class=\"string\">&#x27;\\n&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;text.txt&#x27;</span>, mode=<span class=\"string\">&#x27;w&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        f.write(result)</span><br><span class=\"line\">    end_time = time.time()</span><br><span class=\"line\">    elapsed_time = end_time - start_time</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;程序耗时：<span class=\"subst\">&#123;elapsed_time:<span class=\"number\">.2</span>f&#125;</span> 秒&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p><strong>示例</strong></p>\n<p><img src=\"./img/image-20230504112017912.png\" alt=\"image-20230504112017912\" /></p>\n","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/03/30/11/58/norway-7887613_960_720.jpg","cover_type":"img","excerpt":"","more":"<h2 id=\"文件读写\"><a class=\"markdownIt-Anchor\" href=\"#文件读写\"></a> 文件读写</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;xxx.txt&#x27;</span>, <span class=\"string\">&#x27;w&#x27;</span>, encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">\tf.write(<span class=\"string\">&#x27;xxx&#x27;</span> + <span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\">    f.close()</span><br></pre></td></tr></table></figure>\n<h2 id=\"爬虫\"><a class=\"markdownIt-Anchor\" href=\"#爬虫\"></a> 爬虫</h2>\n<blockquote>\n<p>代码案例</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">getHTMLText</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        headers = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36&#x27;</span>&#125;</span><br><span class=\"line\">        res = requests.get(url, headers=headers)</span><br><span class=\"line\">        res.raise_for_status()</span><br><span class=\"line\">        res.encoding = res.apparent_encoding</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.text</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_info</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    demo = getHTMLText(url)</span><br><span class=\"line\">    soup = BeautifulSoup(demo, <span class=\"string\">&#x27;html.parser&#x27;</span>)</span><br><span class=\"line\">    table = soup.find(<span class=\"string\">&#x27;table&#x27;</span>, &#123;<span class=\"string\">&#x27;class&#x27;</span>: <span class=\"string\">&#x27;rk-table&#x27;</span>&#125;)</span><br><span class=\"line\">    tbody = table.find(<span class=\"string\">&#x27;tbody&#x27;</span>)</span><br><span class=\"line\">    rows = tbody.find_all(<span class=\"string\">&#x27;tr&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> rows:</span><br><span class=\"line\">        tds = row.find_all(<span class=\"string\">&#x27;td&#x27;</span>)</span><br><span class=\"line\">        rank = tds[<span class=\"number\">0</span>].text.strip()</span><br><span class=\"line\">        name = row.find(<span class=\"string\">&#x27;a&#x27;</span>).text.strip()</span><br><span class=\"line\">        location = tds[<span class=\"number\">2</span>].text.strip()</span><br><span class=\"line\">        total = tds[<span class=\"number\">4</span>].text.strip()</span><br><span class=\"line\">        data = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;排名&#x27;</span>: rank,</span><br><span class=\"line\">            <span class=\"string\">&#x27;学校名称&#x27;</span>: name,</span><br><span class=\"line\">            <span class=\"string\">&#x27;省市&#x27;</span>: location,</span><br><span class=\"line\">            <span class=\"string\">&#x27;总分&#x27;</span>: total</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">url_2020 = <span class=\"string\">&#x27;https://www.shanghairanking.cn/rankings/bcur/2020&#x27;</span></span><br><span class=\"line\">url_2021 = <span class=\"string\">&#x27;https://www.shanghairanking.cn/rankings/bcur/2021&#x27;</span></span><br><span class=\"line\">get_info(url_2021)</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据库管理\"><a class=\"markdownIt-Anchor\" href=\"#数据库管理\"></a> 数据库管理</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pymysql</span><br><span class=\"line\"></span><br><span class=\"line\">conn=pymysql.connect(host = <span class=\"string\">&#x27;127.0.0.1&#x27;</span> <span class=\"comment\"># 连接名称，默认127.0.0.1</span></span><br><span class=\"line\">,user = <span class=\"string\">&#x27;root&#x27;</span> <span class=\"comment\"># 用户名</span></span><br><span class=\"line\">,passwd=<span class=\"string\">&#x27;123456&#x27;</span> <span class=\"comment\"># 密码</span></span><br><span class=\"line\">,port= <span class=\"number\">3306</span> <span class=\"comment\"># 端口，默认为3306</span></span><br><span class=\"line\">,db=<span class=\"string\">&#x27;python&#x27;</span> <span class=\"comment\"># 数据库名称</span></span><br><span class=\"line\">,charset=<span class=\"string\">&#x27;utf8&#x27;</span> <span class=\"comment\"># 字符编码</span></span><br><span class=\"line\">)</span><br><span class=\"line\">cur = conn.cursor() <span class=\"comment\"># 生成游标对象</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> cur:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;数据库连接成功&#x27;</span>)</span><br><span class=\"line\">sql=<span class=\"string\">&quot;select * from `web` &quot;</span> <span class=\"comment\"># SQL语句</span></span><br><span class=\"line\">cur.execute(sql) <span class=\"comment\"># 执行SQL语句</span></span><br><span class=\"line\">data = cur.fetchall() <span class=\"comment\"># 通过fetchall方法获得数据</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> data[:<span class=\"number\">1</span>]: <span class=\"comment\"># 打印输出1条数据</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(i)</span><br><span class=\"line\">cur.close() <span class=\"comment\"># 关闭游标</span></span><br><span class=\"line\">conn.close() <span class=\"comment\"># 关闭连接</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"爬虫案例写入数据库\"><a class=\"markdownIt-Anchor\" href=\"#爬虫案例写入数据库\"></a> 爬虫案例（写入数据库）</h2>\n<blockquote>\n<p>实例</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> pymysql</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\">conn = pymysql.connect(host=<span class=\"string\">&#x27;127.0.0.1&#x27;</span>  <span class=\"comment\"># 连接名称，默认127.0.0.1</span></span><br><span class=\"line\">                       , user=<span class=\"string\">&#x27;root&#x27;</span>  <span class=\"comment\"># 用户名</span></span><br><span class=\"line\">                       , passwd=<span class=\"string\">&#x27;123456&#x27;</span>  <span class=\"comment\"># 密码</span></span><br><span class=\"line\">                       , port=<span class=\"number\">3306</span>  <span class=\"comment\"># 端口，默认为3306</span></span><br><span class=\"line\">                       , db=<span class=\"string\">&#x27;python&#x27;</span>  <span class=\"comment\"># 数据库名称</span></span><br><span class=\"line\">                       , charset=<span class=\"string\">&#x27;utf8&#x27;</span>  <span class=\"comment\"># 字符编码</span></span><br><span class=\"line\">                       )</span><br><span class=\"line\">cur = conn.cursor()  <span class=\"comment\"># 生成游标对象</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">getHTMLText</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        headers = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36&#x27;</span>&#125;</span><br><span class=\"line\">        res = requests.get(url, headers=headers)</span><br><span class=\"line\">        res.raise_for_status()</span><br><span class=\"line\">        res.encoding = res.apparent_encoding</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.text</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    res = getHTMLText(url)</span><br><span class=\"line\">    regex = re.<span class=\"built_in\">compile</span>(<span class=\"string\">r&quot;(?=\\()(.*)(?&lt;=\\))&quot;</span>)</span><br><span class=\"line\">    jsonString = regex.findall(res)[-<span class=\"number\">1</span>]</span><br><span class=\"line\">    jsonString = jsonString.strip(<span class=\"string\">&#x27;()&#x27;</span>)</span><br><span class=\"line\">    jsonData = json.loads(jsonString)</span><br><span class=\"line\">    diffValue = jsonData[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;diff&#x27;</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(diffValue)):</span><br><span class=\"line\">        demo = diffValue[i][<span class=\"string\">&#x27;f12&#x27;</span>]</span><br><span class=\"line\">        name = diffValue[i][<span class=\"string\">&#x27;f14&#x27;</span>]</span><br><span class=\"line\">        sql = <span class=\"string\">&quot;INSERT INTO money(demo,name) VALUES (&#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;);&quot;</span>.<span class=\"built_in\">format</span>(demo, name)</span><br><span class=\"line\">        cur.execute(sql)</span><br><span class=\"line\">        conn.commit()</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(demo+name)</span><br><span class=\"line\">    cur.close()</span><br><span class=\"line\">    conn.close()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">&#x27;http://85.push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124007516892373587614_1682312504170&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=|0|0|0|web&amp;fid=f3&amp;fs=m:0+t:6,m:0+t:80,m:1+t:2,m:1+t:23,m:0+t:81+s:2048&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&amp;_=1682312504458&#x27;</span></span><br><span class=\"line\">main(url)</span><br></pre></td></tr></table></figure>\n<h2 id=\"图片转文字画\"><a class=\"markdownIt-Anchor\" href=\"#图片转文字画\"></a> 图片转文字画</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    start_time = time.time()</span><br><span class=\"line\">    image_file = <span class=\"string\">&#x27;lena.png&#x27;</span></span><br><span class=\"line\">    height = <span class=\"number\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\">    img = Image.<span class=\"built_in\">open</span>(image_file)</span><br><span class=\"line\">    img_width, img_height = img.size</span><br><span class=\"line\">    width = <span class=\"built_in\">int</span>(<span class=\"number\">1.8</span> * height * img_width // img_height)</span><br><span class=\"line\">    img = img.resize((width, height), Image.ANTIALIAS)</span><br><span class=\"line\">    pixels = np.array(img.convert(<span class=\"string\">&#x27;L&#x27;</span>))</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;type(pixels) = &#x27;</span>, <span class=\"built_in\">type</span>(pixels))</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(pixels.shape)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(pixels)</span><br><span class=\"line\">    chars = <span class=\"string\">&quot;MNHQ$OC?7&gt;!:-;. &quot;</span></span><br><span class=\"line\">    N = <span class=\"built_in\">len</span>(chars)</span><br><span class=\"line\">    step = <span class=\"number\">256</span> // N</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(N)</span><br><span class=\"line\">    result = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(height):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(width):</span><br><span class=\"line\">            result += chars[pixels[i][j] // step]</span><br><span class=\"line\">        result += <span class=\"string\">&#x27;\\n&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;text.txt&#x27;</span>, mode=<span class=\"string\">&#x27;w&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        f.write(result)</span><br><span class=\"line\">    end_time = time.time()</span><br><span class=\"line\">    elapsed_time = end_time - start_time</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;程序耗时：<span class=\"subst\">&#123;elapsed_time:<span class=\"number\">.2</span>f&#125;</span> 秒&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p><strong>示例</strong></p>\n<p><img src=\"./img/image-20230504112017912.png\" alt=\"image-20230504112017912\" /></p>\n"},{"title":"博客网站","description":null,"date":"2023-05-11T17:00:00.000Z","updated":"2023-05-11T17:00:00.000Z","swiper_index":5,"_content":"\n## Hexo\n\n### 安装前提\n\n安装 Hexo 相当简单，只需要先安装下列应用程序即可：\n\n- [Node.js](http://nodejs.org/) (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)\n- [Git](http://git-scm.com/)\n\n如果您的电脑中已经安装上述必备程序，那么恭喜您！你可以直接前往 [安装 Hexo](https://hexo.io/zh-cn/docs/#安装-Hexo) 步骤。\n\n如果您的电脑中尚未安装所需要的程序，请根据以下安装指示完成安装。\n\n\n\n#### 安装 Git\n\n- Windows：下载并安装 [git](https://git-scm.com/download/win).\n- Mac：使用 [Homebrew](http://mxcl.github.com/homebrew/), [MacPorts](http://www.macports.org/) 或者下载 [安装程序](http://sourceforge.net/projects/git-osx-installer/)。\n- Linux (Ubuntu, Debian)：`sudo apt-get install git-core`\n- Linux (Fedora, Red Hat, CentOS)：`sudo yum install git-core`\n\n> **Mac 用户**\n>\n> 如果在编译时可能会遇到问题，请先到 App Store 安装 Xcode，Xcode 完成后，启动并进入 **Preferences -> Download -> Command Line Tools -> Install** 安装命令行工具。\n\n> **Windows 用户**\n>\n> 对于中国大陆地区用户，可以前往 [淘宝 Git for Windows 镜像](https://npmmirror.com/mirrors/git-for-windows/) 下载 git 安装包。\n>\n> \n\n#### 安装 Node.js\n\nNode.js 为大多数平台提供了官方的 [安装程序](https://nodejs.org/zh-cn/download/)。对于中国大陆地区用户，可以前往 [淘宝 Node.js 镜像](https://npmmirror.com/mirrors/node/) 下载。\n\n其它的安装方法：\n\n- Windows：通过 [nvs](https://github.com/jasongin/nvs/)（推荐）或者 [nvm](https://github.com/nvm-sh/nvm) 安装。\n- Mac：使用 [Homebrew](https://brew.sh/) 或 [MacPorts](http://www.macports.org/) 安装。\n- Linux（DEB/RPM-based）：从 [NodeSource](https://github.com/nodesource/distributions) 安装。\n- 其它：使用相应的软件包管理器进行安装，可以参考由 Node.js 提供的 [指导](https://nodejs.org/zh-cn/download/package-manager/)。\n\n对于 Mac 和 Linux 同样建议使用 nvs 或者 nvm，以避免可能会出现的权限问题。\n\n\n\n> **Windows 用户**\n>\n> 使用 Node.js 官方安装程序时，请确保勾选 **Add to PATH** 选项（默认已勾选）\n\n> **For Mac / Linux 用户**\n>\n> 如果在尝试安装 Hexo 的过程中出现 `EACCES` 权限错误，请遵循 [由 npmjs 发布的指导](https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally) 修复该问题。强烈建议 **不要** 使用 root、sudo 等方法覆盖权限\n\n> **Linux**\n>\n> 如果您使用 Snap 来安装 Node.js，在 [初始化](https://hexo.io/zh-cn/docs/commands#init) 博客时您可能需要手动在目标文件夹中执行 `npm install`。\n\n\n\n### 安装 Hexo\n\n所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。\n\n~~~bash\n$ npm install -g hexo-cli\n~~~\n\n### 初始化 Hexo 项目\n\n~~~bash\n$ hexo init blog(项目名)\n~~~\n\n~~~bash\ncd blog-demo  //进入blog-demo文件夹\nnpm i\t\t // 安装依赖\n~~~\n\n初始化项目后，`blog`有如下结构：\n\n【node_modules】：依赖包\n【scaffolds】：生成文章的一些模板\n【source】：用来存放你的文章\n【themes】：主题\n【.npmignore】：发布时忽略的文件（可忽略）\n【_config.landscape.yml】：主题的配置文件\n【config.yml】：博客的配置文件\n【package.json】：项目名称、描述、版本、运行和开发等信息\n\n\n\n### 启动项目\n\n> hexo server或者hexo s \n\n~~~bash\n$ hexo s\n================================\nINFO  Validating config\nINFO  Start processing\nINFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.\n~~~\n\n\n\n### 挂载到GitHub Pages\n\n安装 hexo-deployer-git\n\n```bash\nnpm install hexo-deployer-git --save\n```\n\n修改 _config.yml 文件\n\n修改最后一行的配置，将repository修改为你自己的github项目地址即可，还有分支要改为`main`代表主分支（注意缩进）。\n\n```yaml\ndeploy:\n  type: git\n  repository: git@github.com:Fomalhaut-Blog/Fomalhaut-Blog.github.io.git\n  branch: main\n```\n\n修改好配置后，运行如下命令，将代码部署到 GitHub\n\n```bash\nhexo clean && hexo generate && hexo deploy  // Git BASH终端\nhexo clean; hexo generate; hexo deploy  // VSCODE终端\n```\n\n+ hexo clean：删除之前生成的文件，若未生成过静态文件，可忽略此命令。\n+ hexo generate：生成静态文章，可以用`hexo g`缩写\n+ hexo deploy：部署文章，可以用`hexo d`缩写\n\n如果出现`Deploy done`，则说明部署成功了。\n\n![image-20230508130652933](./img/image-20230508130652933.png)\n\n\n\n## 美化博客\n\n**官方文档**\n\n[Butterfly - A Simple and Card UI Design theme for Hexo](https://butterfly.js.org/)\n\n### 安装butterfly主题\n\n在你的博客根目录打开`Git BASH`命令窗口执行`npm i hexo-theme-butterfly`\n\n```bash\nnpm i hexo-theme-butterfly\n```\n\n安装成功后可在【blog/node_modules】文件夹下找到hexo-theme-butterfly文件夹\n\n升级方法：在博客根目录下，运行 `npm update hexo-theme-butterfly`。\n升级前请将`hexo-theme-butterfly`文件夹备份，npm更新会直接覆盖成新的包。\n\n\n\n### 应用主题\n\n1. 修改站点配置文件_config.yml，把主题改为butterfly\n\n   ```yaml\n   theme: butterfly\n   ```\n\n2. 如果你没有pug以及stylus的渲染器，请下载安装，这两个渲染器是Butterfly生成基础页面所需的依赖包：\n\n   ```bash\n   npm install hexo-renderer-pug hexo-renderer-stylus --save\n   ```\n\n3. 为了减少升级主题后带来的不便，请使用以下方法（建议，可以不做，高度魔改的一般都不会升级主题了，不然魔改的会被覆盖掉）\n   把主题文件夹中的 `_config.yml` 复制到 Hexo 根目录里（，同时重新命名为 `_config.butterfly.yml`。以后只需要在 `_config.butterfly.yml`进行配置即可生效。Hexo会自动合併主题中的`_config.yml`和 `_config.butterfly.yml`里的配置，如果存在同名配置，会使用`_config.butterfly.yml`的配置，其优先度较高。\n\n   \n\n###  Front-matter\n\n`Front-matter` 是 markdown 文件最上方以`---`分隔的区域，用于指定个别档案的变数。\n\n- Page Front-matter 用于页面配置\n- Post Front-matter 用于文章页配置\n\n\n\n**Page Front-matter：**\n\n~~~markdown\n---\ntitle:\ndate:\nupdated:\ntype:\ncomments:\ndescription:\nkeywords:\ntop_img:\nmathjax:\nkatex:\naside:\naplayer:\nhighlight_shrink:\n---\n~~~\n\n| 写法             |                             解释                             |\n| :--------------- | :----------------------------------------------------------: |\n| title            |                       【必需】页面标题                       |\n| date             |                     【必需】页面创建日期                     |\n| type             |         【必需】标籤、分类和友情链接三个页面需要配置         |\n| updated          |                     【可选】页面更新日期                     |\n| description      |                       【可选】页面描述                       |\n| keywords         |                      【可选】页面关键字                      |\n| comments         |             【可选】显示页面评论模块(默认 true)              |\n| top_img          |                     【可选】页面顶部图片                     |\n| mathjax          | 【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false) |\n| kates            | 【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false) |\n| aside            |                【可选】显示侧边栏 (默认 true)                |\n| aplayer          | 【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置 |\n| highlight_shrink | 【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置) |\n\n**Post Front-matter：**\n\n```markdown\n---\ntitle:\ndate:\nupdated:\ntags:\ncategories:\nkeywords:\ndescription:\ntop_img:\ncomments:\ncover:\ntoc:\ntoc_number:\ntoc_style_simple:\ncopyright:\ncopyright_author:\ncopyright_author_href:\ncopyright_url:\ncopyright_info:\nmathjax:\nkatex:\naplayer:\nhighlight_shrink:\naside:\n---\n```\n\n| 写法                  |                             解释                             |\n| --------------------- | :----------------------------------------------------------: |\n| title                 |                       【必需】文章标题                       |\n| date                  |                     【必需】文章创建日期                     |\n| updated               |                     【可选】文章更新日期                     |\n| tags                  |                       【可选】文章标籤                       |\n| categories            |                       【可选】文章分类                       |\n| keywords              |                      【可选】文章关键字                      |\n| description           |                       【可选】文章描述                       |\n| top_img               |                     【可选】文章顶部图片                     |\n| cover                 | 【可选】文章缩略图(如果没有设置top_img,文章页顶部将显示缩略图，可设为false/图片地址/留空) |\n| comments              |             【可选】显示文章评论模块(默认 true)              |\n| toc                   |       【可选】显示文章TOC(默认为设置中toc的enable配置)       |\n| toc_number            |     【可选】显示toc_number(默认为设置中toc的number配置)      |\n| toc_style_simple      |                  【可选】显示 toc 简洁模式                   |\n| copyright             | 【可选】显示文章版权模块(默认为设置中post_copyright的enable配置) |\n| copyright_author      |                【可选】文章版权模块的文章作者                |\n| copyright_author_href |              【可选】文章版权模块的文章作者链接              |\n| copyright_url         |              【可选】文章版权模块的文章连结链接              |\n| copyright_info        |              【可选】文章版权模块的版权声明文字              |\n| mathjax               | 【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false) |\n| katex                 | 【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false) |\n| aplayer               | 【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置 |\n| highlight_shrink      | 【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置) |\n| aside                 |                【可选】显示侧边栏 (默认 true)                |\n\n\n\n### 标签页\n\n前往你的Hexo博客根目录，打开`Git Bash`执行如下命令：\n\n```bash\nhexo new page tags\n```\n\n在`\\source\\`会生成一个含有`index.md`文件的`tags`文件夹。\n\n修改`\\source\\tags\\index.md`，添加`type: \"tags\"`。\n\n```markdown\n---\ntitle: tags\ndate: 2022-10-28 12:00:00\ntype: \"tags\"\n---\n```\n\n\n\n### 友情链接\n\n前往你的Hexo博客根目录，打开cmd命令窗口执行如下命令：\n\n```bash\nhexo new page link\n```\n\n在`[BlogRoot]\\source\\`会生成一个含有`index.md`文件的`link`文件夹\n\n修改`[BlogRoot]\\source\\link\\index.md`，添加`type: \"link\"`\n\n```markdown\n---\ntitle: link\ndate: 2022-10-28 12:00:00\ntype: \"link\"\n---\n```\n\n前往`[BlogRoot]\\source\\_data`创建一个`link.yml`文件（如果沒有 `_data` 文件夹，请自行创建），并写入如下信息（根据你的需要写）：\n\n```yaml\n- class_name: 1.技术支持\n  class_desc: 本网站的搭建由以下开源作者提供技术支持\n  link_list: \n    - name: Hexo \n      link: https://hexo.io/zh-cn/\n      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg\n      descr: 快速、简单且强大的网志框架\n      siteshot: https://source.fomal.cc/siteshot/hexo.io.jpg\n      \n- class_name: 2.友情链接\n  class_desc: 一些好朋友~~\n  link_list:\n    - name: Fomalhaut🥝\n      link: https://fomal.cc/\n      avatar: /assets/head.jpg\n      descr: Future is now 🍭🍭🍭\n      siteshot: https://source.fomal.cc/siteshot/www.fomal.cn.jpg\n```\n\nclass_name和class_desc支持 html 格式，如不需要，也可以留空。\n\n\n\n###  404页面\n\n主題內置了一个简单的404页面，可在设置中开放。\n\n如需本地预览，请访问 http://localhost:4000/404.html\n\n~~~yaml\n# A simple 404 page\nerror_404:\n  enable: true\n  subtitle: \"页面沒有找到\"\n  background: \n~~~\n\n## 博客网站配置\n\n> git\n\n~~~bash\n# 清除缓存，生成静态文件，部署到github \nhexo cl && hexo g && hexo d # git bash\nhexo cl; hexo g; hexo d # vscode\n~~~\n\nMarkdown语法与外挂标签写法汇总\nhttps://www.fomal.cc/posts/5389e93f.html\n\n{% note simple %}默认 提示块标签{% endnote %}\n\n{% note default simple %}default 提示块标签{% endnote %}\n\n{% note primary simple %}primary 提示块标签{% endnote %}\n\n{% note success simple %}success 提示块标签{% endnote %}\n\n{% note info simple %}info 提示块标签{% endnote %}\n\n{% note warning simple %}warning 提示块标签{% endnote %}\n\n{% note danger simple %}danger 提示块标签{% endnote %}\n\n\n| 需要复制的                                                   | 需要删除的                                                   |\n| :----------------------------------------------------------- | ------------------------------------------------------------ |\n| _config.yml：站点配置文件                                    | .git：无论是在站点根目录下，还是主题目录下的.git文件，都可以删掉 |\n| _config.butterfly.yml：主题配置文件，为了方便主题升级剥离出来的配置文件 | node_modules：`npm install`会根据package.json生成            |\n| package.json：说明使用哪些依赖包                             | public：`hexo g`会重新编译生成                               |\n| scaffolds：文章的模板                                        | .deploy_git：在使用`hexo d`时也会重新生成                    |\n| source：自己写的博客源码                                     | db.json文件：`hexo s`快速启动所需的数据库                    |\n| themes：主题文件夹（魔改都在里面啦）                         | package-lock.json：记录依赖之间的内部依赖关系，可以根据`package.json`重新生成 |\n| .gitignore：说明在提交时哪些文件可以忽略                     |                                                              |\n\n\n**嵌入B站视频**\n\n~~~html\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>\n~~~\n\n| 视频质量         | 弹幕（0为默认关闭）  |\n| --------------- | ------------------- |\n| &high_quality=1 | &danmaku=0          |\n\n\n## Aplayer歌单引入\n必要的参数\n\ndata-id =>音乐页面链接上的id号\n\ndata-server => 平台名称。netease：网易；tencent：腾讯；xiami：虾米；kugou：酷狗；baidu：百度\n\ndata-type=>类型。playlist：歌单；song：单曲；专辑：album；关键词：search；歌手：artist\n\n| data-id | data-server | data-type |\n| ------- | ----------- | --------- |\n| 3778678 | netease     | playlist  |\n| 热歌榜  | 网易         | 歌单      |\n","source":"_posts/博客网站.md","raw":"---\ntitle: 博客网站\ndescription:\ndate: 2023-05-12 1:0:00\nupdated: 2023-05-12 1:0:00\ntags:\n  - Blog\ncategories:\n  - 网站\nswiper_index: 5 # 置顶权重\n---\n\n## Hexo\n\n### 安装前提\n\n安装 Hexo 相当简单，只需要先安装下列应用程序即可：\n\n- [Node.js](http://nodejs.org/) (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)\n- [Git](http://git-scm.com/)\n\n如果您的电脑中已经安装上述必备程序，那么恭喜您！你可以直接前往 [安装 Hexo](https://hexo.io/zh-cn/docs/#安装-Hexo) 步骤。\n\n如果您的电脑中尚未安装所需要的程序，请根据以下安装指示完成安装。\n\n\n\n#### 安装 Git\n\n- Windows：下载并安装 [git](https://git-scm.com/download/win).\n- Mac：使用 [Homebrew](http://mxcl.github.com/homebrew/), [MacPorts](http://www.macports.org/) 或者下载 [安装程序](http://sourceforge.net/projects/git-osx-installer/)。\n- Linux (Ubuntu, Debian)：`sudo apt-get install git-core`\n- Linux (Fedora, Red Hat, CentOS)：`sudo yum install git-core`\n\n> **Mac 用户**\n>\n> 如果在编译时可能会遇到问题，请先到 App Store 安装 Xcode，Xcode 完成后，启动并进入 **Preferences -> Download -> Command Line Tools -> Install** 安装命令行工具。\n\n> **Windows 用户**\n>\n> 对于中国大陆地区用户，可以前往 [淘宝 Git for Windows 镜像](https://npmmirror.com/mirrors/git-for-windows/) 下载 git 安装包。\n>\n> \n\n#### 安装 Node.js\n\nNode.js 为大多数平台提供了官方的 [安装程序](https://nodejs.org/zh-cn/download/)。对于中国大陆地区用户，可以前往 [淘宝 Node.js 镜像](https://npmmirror.com/mirrors/node/) 下载。\n\n其它的安装方法：\n\n- Windows：通过 [nvs](https://github.com/jasongin/nvs/)（推荐）或者 [nvm](https://github.com/nvm-sh/nvm) 安装。\n- Mac：使用 [Homebrew](https://brew.sh/) 或 [MacPorts](http://www.macports.org/) 安装。\n- Linux（DEB/RPM-based）：从 [NodeSource](https://github.com/nodesource/distributions) 安装。\n- 其它：使用相应的软件包管理器进行安装，可以参考由 Node.js 提供的 [指导](https://nodejs.org/zh-cn/download/package-manager/)。\n\n对于 Mac 和 Linux 同样建议使用 nvs 或者 nvm，以避免可能会出现的权限问题。\n\n\n\n> **Windows 用户**\n>\n> 使用 Node.js 官方安装程序时，请确保勾选 **Add to PATH** 选项（默认已勾选）\n\n> **For Mac / Linux 用户**\n>\n> 如果在尝试安装 Hexo 的过程中出现 `EACCES` 权限错误，请遵循 [由 npmjs 发布的指导](https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally) 修复该问题。强烈建议 **不要** 使用 root、sudo 等方法覆盖权限\n\n> **Linux**\n>\n> 如果您使用 Snap 来安装 Node.js，在 [初始化](https://hexo.io/zh-cn/docs/commands#init) 博客时您可能需要手动在目标文件夹中执行 `npm install`。\n\n\n\n### 安装 Hexo\n\n所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。\n\n~~~bash\n$ npm install -g hexo-cli\n~~~\n\n### 初始化 Hexo 项目\n\n~~~bash\n$ hexo init blog(项目名)\n~~~\n\n~~~bash\ncd blog-demo  //进入blog-demo文件夹\nnpm i\t\t // 安装依赖\n~~~\n\n初始化项目后，`blog`有如下结构：\n\n【node_modules】：依赖包\n【scaffolds】：生成文章的一些模板\n【source】：用来存放你的文章\n【themes】：主题\n【.npmignore】：发布时忽略的文件（可忽略）\n【_config.landscape.yml】：主题的配置文件\n【config.yml】：博客的配置文件\n【package.json】：项目名称、描述、版本、运行和开发等信息\n\n\n\n### 启动项目\n\n> hexo server或者hexo s \n\n~~~bash\n$ hexo s\n================================\nINFO  Validating config\nINFO  Start processing\nINFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.\n~~~\n\n\n\n### 挂载到GitHub Pages\n\n安装 hexo-deployer-git\n\n```bash\nnpm install hexo-deployer-git --save\n```\n\n修改 _config.yml 文件\n\n修改最后一行的配置，将repository修改为你自己的github项目地址即可，还有分支要改为`main`代表主分支（注意缩进）。\n\n```yaml\ndeploy:\n  type: git\n  repository: git@github.com:Fomalhaut-Blog/Fomalhaut-Blog.github.io.git\n  branch: main\n```\n\n修改好配置后，运行如下命令，将代码部署到 GitHub\n\n```bash\nhexo clean && hexo generate && hexo deploy  // Git BASH终端\nhexo clean; hexo generate; hexo deploy  // VSCODE终端\n```\n\n+ hexo clean：删除之前生成的文件，若未生成过静态文件，可忽略此命令。\n+ hexo generate：生成静态文章，可以用`hexo g`缩写\n+ hexo deploy：部署文章，可以用`hexo d`缩写\n\n如果出现`Deploy done`，则说明部署成功了。\n\n![image-20230508130652933](./img/image-20230508130652933.png)\n\n\n\n## 美化博客\n\n**官方文档**\n\n[Butterfly - A Simple and Card UI Design theme for Hexo](https://butterfly.js.org/)\n\n### 安装butterfly主题\n\n在你的博客根目录打开`Git BASH`命令窗口执行`npm i hexo-theme-butterfly`\n\n```bash\nnpm i hexo-theme-butterfly\n```\n\n安装成功后可在【blog/node_modules】文件夹下找到hexo-theme-butterfly文件夹\n\n升级方法：在博客根目录下，运行 `npm update hexo-theme-butterfly`。\n升级前请将`hexo-theme-butterfly`文件夹备份，npm更新会直接覆盖成新的包。\n\n\n\n### 应用主题\n\n1. 修改站点配置文件_config.yml，把主题改为butterfly\n\n   ```yaml\n   theme: butterfly\n   ```\n\n2. 如果你没有pug以及stylus的渲染器，请下载安装，这两个渲染器是Butterfly生成基础页面所需的依赖包：\n\n   ```bash\n   npm install hexo-renderer-pug hexo-renderer-stylus --save\n   ```\n\n3. 为了减少升级主题后带来的不便，请使用以下方法（建议，可以不做，高度魔改的一般都不会升级主题了，不然魔改的会被覆盖掉）\n   把主题文件夹中的 `_config.yml` 复制到 Hexo 根目录里（，同时重新命名为 `_config.butterfly.yml`。以后只需要在 `_config.butterfly.yml`进行配置即可生效。Hexo会自动合併主题中的`_config.yml`和 `_config.butterfly.yml`里的配置，如果存在同名配置，会使用`_config.butterfly.yml`的配置，其优先度较高。\n\n   \n\n###  Front-matter\n\n`Front-matter` 是 markdown 文件最上方以`---`分隔的区域，用于指定个别档案的变数。\n\n- Page Front-matter 用于页面配置\n- Post Front-matter 用于文章页配置\n\n\n\n**Page Front-matter：**\n\n~~~markdown\n---\ntitle:\ndate:\nupdated:\ntype:\ncomments:\ndescription:\nkeywords:\ntop_img:\nmathjax:\nkatex:\naside:\naplayer:\nhighlight_shrink:\n---\n~~~\n\n| 写法             |                             解释                             |\n| :--------------- | :----------------------------------------------------------: |\n| title            |                       【必需】页面标题                       |\n| date             |                     【必需】页面创建日期                     |\n| type             |         【必需】标籤、分类和友情链接三个页面需要配置         |\n| updated          |                     【可选】页面更新日期                     |\n| description      |                       【可选】页面描述                       |\n| keywords         |                      【可选】页面关键字                      |\n| comments         |             【可选】显示页面评论模块(默认 true)              |\n| top_img          |                     【可选】页面顶部图片                     |\n| mathjax          | 【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false) |\n| kates            | 【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false) |\n| aside            |                【可选】显示侧边栏 (默认 true)                |\n| aplayer          | 【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置 |\n| highlight_shrink | 【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置) |\n\n**Post Front-matter：**\n\n```markdown\n---\ntitle:\ndate:\nupdated:\ntags:\ncategories:\nkeywords:\ndescription:\ntop_img:\ncomments:\ncover:\ntoc:\ntoc_number:\ntoc_style_simple:\ncopyright:\ncopyright_author:\ncopyright_author_href:\ncopyright_url:\ncopyright_info:\nmathjax:\nkatex:\naplayer:\nhighlight_shrink:\naside:\n---\n```\n\n| 写法                  |                             解释                             |\n| --------------------- | :----------------------------------------------------------: |\n| title                 |                       【必需】文章标题                       |\n| date                  |                     【必需】文章创建日期                     |\n| updated               |                     【可选】文章更新日期                     |\n| tags                  |                       【可选】文章标籤                       |\n| categories            |                       【可选】文章分类                       |\n| keywords              |                      【可选】文章关键字                      |\n| description           |                       【可选】文章描述                       |\n| top_img               |                     【可选】文章顶部图片                     |\n| cover                 | 【可选】文章缩略图(如果没有设置top_img,文章页顶部将显示缩略图，可设为false/图片地址/留空) |\n| comments              |             【可选】显示文章评论模块(默认 true)              |\n| toc                   |       【可选】显示文章TOC(默认为设置中toc的enable配置)       |\n| toc_number            |     【可选】显示toc_number(默认为设置中toc的number配置)      |\n| toc_style_simple      |                  【可选】显示 toc 简洁模式                   |\n| copyright             | 【可选】显示文章版权模块(默认为设置中post_copyright的enable配置) |\n| copyright_author      |                【可选】文章版权模块的文章作者                |\n| copyright_author_href |              【可选】文章版权模块的文章作者链接              |\n| copyright_url         |              【可选】文章版权模块的文章连结链接              |\n| copyright_info        |              【可选】文章版权模块的版权声明文字              |\n| mathjax               | 【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false) |\n| katex                 | 【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false) |\n| aplayer               | 【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置 |\n| highlight_shrink      | 【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置) |\n| aside                 |                【可选】显示侧边栏 (默认 true)                |\n\n\n\n### 标签页\n\n前往你的Hexo博客根目录，打开`Git Bash`执行如下命令：\n\n```bash\nhexo new page tags\n```\n\n在`\\source\\`会生成一个含有`index.md`文件的`tags`文件夹。\n\n修改`\\source\\tags\\index.md`，添加`type: \"tags\"`。\n\n```markdown\n---\ntitle: tags\ndate: 2022-10-28 12:00:00\ntype: \"tags\"\n---\n```\n\n\n\n### 友情链接\n\n前往你的Hexo博客根目录，打开cmd命令窗口执行如下命令：\n\n```bash\nhexo new page link\n```\n\n在`[BlogRoot]\\source\\`会生成一个含有`index.md`文件的`link`文件夹\n\n修改`[BlogRoot]\\source\\link\\index.md`，添加`type: \"link\"`\n\n```markdown\n---\ntitle: link\ndate: 2022-10-28 12:00:00\ntype: \"link\"\n---\n```\n\n前往`[BlogRoot]\\source\\_data`创建一个`link.yml`文件（如果沒有 `_data` 文件夹，请自行创建），并写入如下信息（根据你的需要写）：\n\n```yaml\n- class_name: 1.技术支持\n  class_desc: 本网站的搭建由以下开源作者提供技术支持\n  link_list: \n    - name: Hexo \n      link: https://hexo.io/zh-cn/\n      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg\n      descr: 快速、简单且强大的网志框架\n      siteshot: https://source.fomal.cc/siteshot/hexo.io.jpg\n      \n- class_name: 2.友情链接\n  class_desc: 一些好朋友~~\n  link_list:\n    - name: Fomalhaut🥝\n      link: https://fomal.cc/\n      avatar: /assets/head.jpg\n      descr: Future is now 🍭🍭🍭\n      siteshot: https://source.fomal.cc/siteshot/www.fomal.cn.jpg\n```\n\nclass_name和class_desc支持 html 格式，如不需要，也可以留空。\n\n\n\n###  404页面\n\n主題內置了一个简单的404页面，可在设置中开放。\n\n如需本地预览，请访问 http://localhost:4000/404.html\n\n~~~yaml\n# A simple 404 page\nerror_404:\n  enable: true\n  subtitle: \"页面沒有找到\"\n  background: \n~~~\n\n## 博客网站配置\n\n> git\n\n~~~bash\n# 清除缓存，生成静态文件，部署到github \nhexo cl && hexo g && hexo d # git bash\nhexo cl; hexo g; hexo d # vscode\n~~~\n\nMarkdown语法与外挂标签写法汇总\nhttps://www.fomal.cc/posts/5389e93f.html\n\n{% note simple %}默认 提示块标签{% endnote %}\n\n{% note default simple %}default 提示块标签{% endnote %}\n\n{% note primary simple %}primary 提示块标签{% endnote %}\n\n{% note success simple %}success 提示块标签{% endnote %}\n\n{% note info simple %}info 提示块标签{% endnote %}\n\n{% note warning simple %}warning 提示块标签{% endnote %}\n\n{% note danger simple %}danger 提示块标签{% endnote %}\n\n\n| 需要复制的                                                   | 需要删除的                                                   |\n| :----------------------------------------------------------- | ------------------------------------------------------------ |\n| _config.yml：站点配置文件                                    | .git：无论是在站点根目录下，还是主题目录下的.git文件，都可以删掉 |\n| _config.butterfly.yml：主题配置文件，为了方便主题升级剥离出来的配置文件 | node_modules：`npm install`会根据package.json生成            |\n| package.json：说明使用哪些依赖包                             | public：`hexo g`会重新编译生成                               |\n| scaffolds：文章的模板                                        | .deploy_git：在使用`hexo d`时也会重新生成                    |\n| source：自己写的博客源码                                     | db.json文件：`hexo s`快速启动所需的数据库                    |\n| themes：主题文件夹（魔改都在里面啦）                         | package-lock.json：记录依赖之间的内部依赖关系，可以根据`package.json`重新生成 |\n| .gitignore：说明在提交时哪些文件可以忽略                     |                                                              |\n\n\n**嵌入B站视频**\n\n~~~html\n<div align=center class=\"aspect-ratio\">\n    <iframe src=\"https://player.bilibili.com/player.html?aid=247609487&bvid=BV1vv41177jq&cid=324439110&page=1&high_quality=1&danmaku=0\" \n    scrolling=\"no\" \n    border=\"0\" \n    frameborder=\"no\" \n    framespacing=\"0\" \n    high_quality=1\n    danmaku=1 \n    allowfullscreen=\"true\"> \n    </iframe>\n</div>\n~~~\n\n| 视频质量         | 弹幕（0为默认关闭）  |\n| --------------- | ------------------- |\n| &high_quality=1 | &danmaku=0          |\n\n\n## Aplayer歌单引入\n必要的参数\n\ndata-id =>音乐页面链接上的id号\n\ndata-server => 平台名称。netease：网易；tencent：腾讯；xiami：虾米；kugou：酷狗；baidu：百度\n\ndata-type=>类型。playlist：歌单；song：单曲；专辑：album；关键词：search；歌手：artist\n\n| data-id | data-server | data-type |\n| ------- | ----------- | --------- |\n| 3778678 | netease     | playlist  |\n| 热歌榜  | 网易         | 歌单      |\n","slug":"博客网站","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clhje45zu0013qc9h5m9b9797","content":"<h2 id=\"hexo\"><a class=\"markdownIt-Anchor\" href=\"#hexo\"></a> Hexo</h2>\n<h3 id=\"安装前提\"><a class=\"markdownIt-Anchor\" href=\"#安装前提\"></a> 安装前提</h3>\n<p>安装 Hexo 相当简单，只需要先安装下列应用程序即可：</p>\n<ul>\n<li><a href=\"http://nodejs.org/\">Node.js</a> (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)</li>\n<li><a href=\"http://git-scm.com/\">Git</a></li>\n</ul>\n<p>如果您的电脑中已经安装上述必备程序，那么恭喜您！你可以直接前往 <a href=\"https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85-Hexo\">安装 Hexo</a> 步骤。</p>\n<p>如果您的电脑中尚未安装所需要的程序，请根据以下安装指示完成安装。</p>\n<h4 id=\"安装-git\"><a class=\"markdownIt-Anchor\" href=\"#安装-git\"></a> 安装 Git</h4>\n<ul>\n<li>Windows：下载并安装 <a href=\"https://git-scm.com/download/win\">git</a>.</li>\n<li>Mac：使用 <a href=\"http://mxcl.github.com/homebrew/\">Homebrew</a>, <a href=\"http://www.macports.org/\">MacPorts</a> 或者下载 <a href=\"http://sourceforge.net/projects/git-osx-installer/\">安装程序</a>。</li>\n<li>Linux (Ubuntu, Debian)：<code>sudo apt-get install git-core</code></li>\n<li>Linux (Fedora, Red Hat, CentOS)：<code>sudo yum install git-core</code></li>\n</ul>\n<blockquote>\n<p><strong>Mac 用户</strong></p>\n<p>如果在编译时可能会遇到问题，请先到 App Store 安装 Xcode，Xcode 完成后，启动并进入 <strong>Preferences -&gt; Download -&gt; Command Line Tools -&gt; Install</strong> 安装命令行工具。</p>\n</blockquote>\n<blockquote>\n<p><strong>Windows 用户</strong></p>\n<p>对于中国大陆地区用户，可以前往 <a href=\"https://npmmirror.com/mirrors/git-for-windows/\">淘宝 Git for Windows 镜像</a> 下载 git 安装包。</p>\n</blockquote>\n<h4 id=\"安装-nodejs\"><a class=\"markdownIt-Anchor\" href=\"#安装-nodejs\"></a> 安装 Node.js</h4>\n<p>Node.js 为大多数平台提供了官方的 <a href=\"https://nodejs.org/zh-cn/download/\">安装程序</a>。对于中国大陆地区用户，可以前往 <a href=\"https://npmmirror.com/mirrors/node/\">淘宝 Node.js 镜像</a> 下载。</p>\n<p>其它的安装方法：</p>\n<ul>\n<li>Windows：通过 <a href=\"https://github.com/jasongin/nvs/\">nvs</a>（推荐）或者 <a href=\"https://github.com/nvm-sh/nvm\">nvm</a> 安装。</li>\n<li>Mac：使用 <a href=\"https://brew.sh/\">Homebrew</a> 或 <a href=\"http://www.macports.org/\">MacPorts</a> 安装。</li>\n<li>Linux（DEB/RPM-based）：从 <a href=\"https://github.com/nodesource/distributions\">NodeSource</a> 安装。</li>\n<li>其它：使用相应的软件包管理器进行安装，可以参考由 Node.js 提供的 <a href=\"https://nodejs.org/zh-cn/download/package-manager/\">指导</a>。</li>\n</ul>\n<p>对于 Mac 和 Linux 同样建议使用 nvs 或者 nvm，以避免可能会出现的权限问题。</p>\n<blockquote>\n<p><strong>Windows 用户</strong></p>\n<p>使用 Node.js 官方安装程序时，请确保勾选 <strong>Add to PATH</strong> 选项（默认已勾选）</p>\n</blockquote>\n<blockquote>\n<p><strong>For Mac / Linux 用户</strong></p>\n<p>如果在尝试安装 Hexo 的过程中出现 <code>EACCES</code> 权限错误，请遵循 <a href=\"https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally\">由 npmjs 发布的指导</a> 修复该问题。强烈建议 <strong>不要</strong> 使用 root、sudo 等方法覆盖权限</p>\n</blockquote>\n<blockquote>\n<p><strong>Linux</strong></p>\n<p>如果您使用 Snap 来安装 Node.js，在 <a href=\"https://hexo.io/zh-cn/docs/commands#init\">初始化</a> 博客时您可能需要手动在目标文件夹中执行 <code>npm install</code>。</p>\n</blockquote>\n<h3 id=\"安装-hexo\"><a class=\"markdownIt-Anchor\" href=\"#安装-hexo\"></a> 安装 Hexo</h3>\n<p>所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n<h3 id=\"初始化-hexo-项目\"><a class=\"markdownIt-Anchor\" href=\"#初始化-hexo-项目\"></a> 初始化 Hexo 项目</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo init blog(项目名)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog-demo  //进入blog-demo文件夹</span><br><span class=\"line\">npm i\t\t // 安装依赖</span><br></pre></td></tr></table></figure>\n<p>初始化项目后，<code>blog</code>有如下结构：</p>\n<p>【node_modules】：依赖包<br />\n【scaffolds】：生成文章的一些模板<br />\n【source】：用来存放你的文章<br />\n【themes】：主题<br />\n【.npmignore】：发布时忽略的文件（可忽略）<br />\n【_config.landscape.yml】：主题的配置文件<br />\n【config.yml】：博客的配置文件<br />\n【package.json】：项目名称、描述、版本、运行和开发等信息</p>\n<h3 id=\"启动项目\"><a class=\"markdownIt-Anchor\" href=\"#启动项目\"></a> 启动项目</h3>\n<blockquote>\n<p>hexo server或者hexo s</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo s</span><br><span class=\"line\">================================</span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">INFO  Start processing</span><br><span class=\"line\">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>\n<h3 id=\"挂载到github-pages\"><a class=\"markdownIt-Anchor\" href=\"#挂载到github-pages\"></a> 挂载到GitHub Pages</h3>\n<p>安装 hexo-deployer-git</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n<p>修改 _config.yml 文件</p>\n<p>修改最后一行的配置，将repository修改为你自己的github项目地址即可，还有分支要改为<code>main</code>代表主分支（注意缩进）。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repository:</span> <span class=\"string\">git@github.com:Fomalhaut-Blog/Fomalhaut-Blog.github.io.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">main</span></span><br></pre></td></tr></table></figure>\n<p>修改好配置后，运行如下命令，将代码部署到 GitHub</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy  // Git BASH终端</span><br><span class=\"line\">hexo clean; hexo generate; hexo deploy  // VSCODE终端</span><br></pre></td></tr></table></figure>\n<ul>\n<li>hexo clean：删除之前生成的文件，若未生成过静态文件，可忽略此命令。</li>\n<li>hexo generate：生成静态文章，可以用<code>hexo g</code>缩写</li>\n<li>hexo deploy：部署文章，可以用<code>hexo d</code>缩写</li>\n</ul>\n<p>如果出现<code>Deploy done</code>，则说明部署成功了。</p>\n<p><img src=\"./img/image-20230508130652933.png\" alt=\"image-20230508130652933\" /></p>\n<h2 id=\"美化博客\"><a class=\"markdownIt-Anchor\" href=\"#美化博客\"></a> 美化博客</h2>\n<p><strong>官方文档</strong></p>\n<p><a href=\"https://butterfly.js.org/\">Butterfly - A Simple and Card UI Design theme for Hexo</a></p>\n<h3 id=\"安装butterfly主题\"><a class=\"markdownIt-Anchor\" href=\"#安装butterfly主题\"></a> 安装butterfly主题</h3>\n<p>在你的博客根目录打开<code>Git BASH</code>命令窗口执行<code>npm i hexo-theme-butterfly</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i hexo-theme-butterfly</span><br></pre></td></tr></table></figure>\n<p>安装成功后可在【blog/node_modules】文件夹下找到hexo-theme-butterfly文件夹</p>\n<p>升级方法：在博客根目录下，运行 <code>npm update hexo-theme-butterfly</code>。<br />\n升级前请将<code>hexo-theme-butterfly</code>文件夹备份，npm更新会直接覆盖成新的包。</p>\n<h3 id=\"应用主题\"><a class=\"markdownIt-Anchor\" href=\"#应用主题\"></a> 应用主题</h3>\n<ol>\n<li>\n<p>修改站点配置文件_config.yml，把主题改为butterfly</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">butterfly</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>如果你没有pug以及stylus的渲染器，请下载安装，这两个渲染器是Butterfly生成基础页面所需的依赖包：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>为了减少升级主题后带来的不便，请使用以下方法（建议，可以不做，高度魔改的一般都不会升级主题了，不然魔改的会被覆盖掉）<br />\n把主题文件夹中的 <code>_config.yml</code> 复制到 Hexo 根目录里（，同时重新命名为 <code>_config.butterfly.yml</code>。以后只需要在 <code>_config.butterfly.yml</code>进行配置即可生效。Hexo会自动合併主题中的<code>_config.yml</code>和 <code>_config.butterfly.yml</code>里的配置，如果存在同名配置，会使用<code>_config.butterfly.yml</code>的配置，其优先度较高。</p>\n</li>\n</ol>\n<h3 id=\"front-matter\"><a class=\"markdownIt-Anchor\" href=\"#front-matter\"></a> Front-matter</h3>\n<p><code>Front-matter</code> 是 markdown 文件最上方以<code>---</code>分隔的区域，用于指定个别档案的变数。</p>\n<ul>\n<li>Page Front-matter 用于页面配置</li>\n<li>Post Front-matter 用于文章页配置</li>\n</ul>\n<p><strong>Page Front-matter：</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title:</span><br><span class=\"line\">date:</span><br><span class=\"line\">updated:</span><br><span class=\"line\">type:</span><br><span class=\"line\">comments:</span><br><span class=\"line\">description:</span><br><span class=\"line\">keywords:</span><br><span class=\"line\">top<span class=\"emphasis\">_img:</span></span><br><span class=\"line\"><span class=\"emphasis\">mathjax:</span></span><br><span class=\"line\"><span class=\"emphasis\">katex:</span></span><br><span class=\"line\"><span class=\"emphasis\">aside:</span></span><br><span class=\"line\"><span class=\"emphasis\">aplayer:</span></span><br><span class=\"line\"><span class=\"emphasis\">highlight_</span>shrink:</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">写法</th>\n<th style=\"text-align:center\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">title</td>\n<td style=\"text-align:center\">【必需】页面标题</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">date</td>\n<td style=\"text-align:center\">【必需】页面创建日期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">type</td>\n<td style=\"text-align:center\">【必需】标籤、分类和友情链接三个页面需要配置</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">updated</td>\n<td style=\"text-align:center\">【可选】页面更新日期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">description</td>\n<td style=\"text-align:center\">【可选】页面描述</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">keywords</td>\n<td style=\"text-align:center\">【可选】页面关键字</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">comments</td>\n<td style=\"text-align:center\">【可选】显示页面评论模块(默认 true)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">top_img</td>\n<td style=\"text-align:center\">【可选】页面顶部图片</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mathjax</td>\n<td style=\"text-align:center\">【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kates</td>\n<td style=\"text-align:center\">【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">aside</td>\n<td style=\"text-align:center\">【可选】显示侧边栏 (默认 true)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">aplayer</td>\n<td style=\"text-align:center\">【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">highlight_shrink</td>\n<td style=\"text-align:center\">【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置)</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Post Front-matter：</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title:</span><br><span class=\"line\">date:</span><br><span class=\"line\">updated:</span><br><span class=\"line\">tags:</span><br><span class=\"line\">categories:</span><br><span class=\"line\">keywords:</span><br><span class=\"line\">description:</span><br><span class=\"line\">top<span class=\"emphasis\">_img:</span></span><br><span class=\"line\"><span class=\"emphasis\">comments:</span></span><br><span class=\"line\"><span class=\"emphasis\">cover:</span></span><br><span class=\"line\"><span class=\"emphasis\">toc:</span></span><br><span class=\"line\"><span class=\"emphasis\">toc_</span>number:</span><br><span class=\"line\">toc<span class=\"emphasis\">_style_</span>simple:</span><br><span class=\"line\">copyright:</span><br><span class=\"line\">copyright<span class=\"emphasis\">_author:</span></span><br><span class=\"line\"><span class=\"emphasis\">copyright_</span>author<span class=\"emphasis\">_href:</span></span><br><span class=\"line\"><span class=\"emphasis\">copyright_</span>url:</span><br><span class=\"line\">copyright<span class=\"emphasis\">_info:</span></span><br><span class=\"line\"><span class=\"emphasis\">mathjax:</span></span><br><span class=\"line\"><span class=\"emphasis\">katex:</span></span><br><span class=\"line\"><span class=\"emphasis\">aplayer:</span></span><br><span class=\"line\"><span class=\"emphasis\">highlight_</span>shrink:</span><br><span class=\"line\"><span class=\"section\">aside:</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>写法</th>\n<th style=\"text-align:center\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>title</td>\n<td style=\"text-align:center\">【必需】文章标题</td>\n</tr>\n<tr>\n<td>date</td>\n<td style=\"text-align:center\">【必需】文章创建日期</td>\n</tr>\n<tr>\n<td>updated</td>\n<td style=\"text-align:center\">【可选】文章更新日期</td>\n</tr>\n<tr>\n<td>tags</td>\n<td style=\"text-align:center\">【可选】文章标籤</td>\n</tr>\n<tr>\n<td>categories</td>\n<td style=\"text-align:center\">【可选】文章分类</td>\n</tr>\n<tr>\n<td>keywords</td>\n<td style=\"text-align:center\">【可选】文章关键字</td>\n</tr>\n<tr>\n<td>description</td>\n<td style=\"text-align:center\">【可选】文章描述</td>\n</tr>\n<tr>\n<td>top_img</td>\n<td style=\"text-align:center\">【可选】文章顶部图片</td>\n</tr>\n<tr>\n<td>cover</td>\n<td style=\"text-align:center\">【可选】文章缩略图(如果没有设置top_img,文章页顶部将显示缩略图，可设为false/图片地址/留空)</td>\n</tr>\n<tr>\n<td>comments</td>\n<td style=\"text-align:center\">【可选】显示文章评论模块(默认 true)</td>\n</tr>\n<tr>\n<td>toc</td>\n<td style=\"text-align:center\">【可选】显示文章TOC(默认为设置中toc的enable配置)</td>\n</tr>\n<tr>\n<td>toc_number</td>\n<td style=\"text-align:center\">【可选】显示toc_number(默认为设置中toc的number配置)</td>\n</tr>\n<tr>\n<td>toc_style_simple</td>\n<td style=\"text-align:center\">【可选】显示 toc 简洁模式</td>\n</tr>\n<tr>\n<td>copyright</td>\n<td style=\"text-align:center\">【可选】显示文章版权模块(默认为设置中post_copyright的enable配置)</td>\n</tr>\n<tr>\n<td>copyright_author</td>\n<td style=\"text-align:center\">【可选】文章版权模块的文章作者</td>\n</tr>\n<tr>\n<td>copyright_author_href</td>\n<td style=\"text-align:center\">【可选】文章版权模块的文章作者链接</td>\n</tr>\n<tr>\n<td>copyright_url</td>\n<td style=\"text-align:center\">【可选】文章版权模块的文章连结链接</td>\n</tr>\n<tr>\n<td>copyright_info</td>\n<td style=\"text-align:center\">【可选】文章版权模块的版权声明文字</td>\n</tr>\n<tr>\n<td>mathjax</td>\n<td style=\"text-align:center\">【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false)</td>\n</tr>\n<tr>\n<td>katex</td>\n<td style=\"text-align:center\">【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false)</td>\n</tr>\n<tr>\n<td>aplayer</td>\n<td style=\"text-align:center\">【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</td>\n</tr>\n<tr>\n<td>highlight_shrink</td>\n<td style=\"text-align:center\">【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置)</td>\n</tr>\n<tr>\n<td>aside</td>\n<td style=\"text-align:center\">【可选】显示侧边栏 (默认 true)</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"标签页\"><a class=\"markdownIt-Anchor\" href=\"#标签页\"></a> 标签页</h3>\n<p>前往你的Hexo博客根目录，打开<code>Git Bash</code>执行如下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page tags</span><br></pre></td></tr></table></figure>\n<p>在<code>\\source\\</code>会生成一个含有<code>index.md</code>文件的<code>tags</code>文件夹。</p>\n<p>修改<code>\\source\\tags\\index.md</code>，添加<code>type: &quot;tags&quot;</code>。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: tags</span><br><span class=\"line\">date: 2022-10-28 12:00:00</span><br><span class=\"line\"><span class=\"section\">type: &quot;tags&quot;</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"友情链接\"><a class=\"markdownIt-Anchor\" href=\"#友情链接\"></a> 友情链接</h3>\n<p>前往你的Hexo博客根目录，打开cmd命令窗口执行如下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page <span class=\"built_in\">link</span></span><br></pre></td></tr></table></figure>\n<p>在<code>[BlogRoot]\\source\\</code>会生成一个含有<code>index.md</code>文件的<code>link</code>文件夹</p>\n<p>修改<code>[BlogRoot]\\source\\link\\index.md</code>，添加<code>type: &quot;link&quot;</code></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: link</span><br><span class=\"line\">date: 2022-10-28 12:00:00</span><br><span class=\"line\"><span class=\"section\">type: &quot;link&quot;</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br></pre></td></tr></table></figure>\n<p>前往<code>[BlogRoot]\\source\\_data</code>创建一个<code>link.yml</code>文件（如果沒有 <code>_data</code> 文件夹，请自行创建），并写入如下信息（根据你的需要写）：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">class_name:</span> <span class=\"number\">1</span><span class=\"string\">.技术支持</span></span><br><span class=\"line\">  <span class=\"attr\">class_desc:</span> <span class=\"string\">本网站的搭建由以下开源作者提供技术支持</span></span><br><span class=\"line\">  <span class=\"attr\">link_list:</span> </span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Hexo</span> </span><br><span class=\"line\">      <span class=\"attr\">link:</span> <span class=\"string\">https://hexo.io/zh-cn/</span></span><br><span class=\"line\">      <span class=\"attr\">avatar:</span> <span class=\"string\">https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class=\"line\">      <span class=\"attr\">descr:</span> <span class=\"string\">快速、简单且强大的网志框架</span></span><br><span class=\"line\">      <span class=\"attr\">siteshot:</span> <span class=\"string\">https://source.fomal.cc/siteshot/hexo.io.jpg</span></span><br><span class=\"line\">      </span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">class_name:</span> <span class=\"number\">2</span><span class=\"string\">.友情链接</span></span><br><span class=\"line\">  <span class=\"attr\">class_desc:</span> <span class=\"string\">一些好朋友~~</span></span><br><span class=\"line\">  <span class=\"attr\">link_list:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Fomalhaut🥝</span></span><br><span class=\"line\">      <span class=\"attr\">link:</span> <span class=\"string\">https://fomal.cc/</span></span><br><span class=\"line\">      <span class=\"attr\">avatar:</span> <span class=\"string\">/assets/head.jpg</span></span><br><span class=\"line\">      <span class=\"attr\">descr:</span> <span class=\"string\">Future</span> <span class=\"string\">is</span> <span class=\"string\">now</span> <span class=\"string\">🍭🍭🍭</span></span><br><span class=\"line\">      <span class=\"attr\">siteshot:</span> <span class=\"string\">https://source.fomal.cc/siteshot/www.fomal.cn.jpg</span></span><br></pre></td></tr></table></figure>\n<p>class_name和class_desc支持 html 格式，如不需要，也可以留空。</p>\n<h3 id=\"404页面\"><a class=\"markdownIt-Anchor\" href=\"#404页面\"></a> 404页面</h3>\n<p>主題內置了一个简单的404页面，可在设置中开放。</p>\n<p>如需本地预览，请访问 <a href=\"http://localhost:4000/404.html\">http://localhost:4000/404.html</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># A simple 404 page</span></span><br><span class=\"line\"><span class=\"attr\">error_404:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">subtitle:</span> <span class=\"string\">&quot;页面沒有找到&quot;</span></span><br><span class=\"line\">  <span class=\"attr\">background:</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"博客网站配置\"><a class=\"markdownIt-Anchor\" href=\"#博客网站配置\"></a> 博客网站配置</h2>\n<blockquote>\n<p>git</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 清除缓存，生成静态文件，部署到github </span></span><br><span class=\"line\">hexo cl &amp;&amp; hexo g &amp;&amp; hexo d <span class=\"comment\"># git bash</span></span><br><span class=\"line\">hexo cl; hexo g; hexo d <span class=\"comment\"># vscode</span></span><br></pre></td></tr></table></figure>\n<p>Markdown语法与外挂标签写法汇总<br />\n<a href=\"https://www.fomal.cc/posts/5389e93f.html\">https://www.fomal.cc/posts/5389e93f.html</a></p>\n<div class=\"note simple\"><p>默认 提示块标签</p>\n</div>\n<div class=\"note default simple\"><p>default 提示块标签</p>\n</div>\n<div class=\"note primary simple\"><p>primary 提示块标签</p>\n</div>\n<div class=\"note success simple\"><p>success 提示块标签</p>\n</div>\n<div class=\"note info simple\"><p>info 提示块标签</p>\n</div>\n<div class=\"note warning simple\"><p>warning 提示块标签</p>\n</div>\n<div class=\"note danger simple\"><p>danger 提示块标签</p>\n</div>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">需要复制的</th>\n<th>需要删除的</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">_config.yml：站点配置文件</td>\n<td>.git：无论是在站点根目录下，还是主题目录下的.git文件，都可以删掉</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_config.butterfly.yml：主题配置文件，为了方便主题升级剥离出来的配置文件</td>\n<td>node_modules：<code>npm install</code>会根据package.json生成</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">package.json：说明使用哪些依赖包</td>\n<td>public：<code>hexo g</code>会重新编译生成</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scaffolds：文章的模板</td>\n<td>.deploy_git：在使用<code>hexo d</code>时也会重新生成</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">source：自己写的博客源码</td>\n<td>db.json文件：<code>hexo s</code>快速启动所需的数据库</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">themes：主题文件夹（魔改都在里面啦）</td>\n<td>package-lock.json：记录依赖之间的内部依赖关系，可以根据<code>package.json</code>重新生成</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">.gitignore：说明在提交时哪些文件可以忽略</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p><strong>嵌入B站视频</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">align</span>=<span class=\"string\">center</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;aspect-ratio&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://player.bilibili.com/player.html?aid=247609487&amp;bvid=BV1vv41177jq&amp;cid=324439110&amp;page=1&amp;high_quality=1&amp;danmaku=0&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">scrolling</span>=<span class=\"string\">&quot;no&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">border</span>=<span class=\"string\">&quot;0&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">frameborder</span>=<span class=\"string\">&quot;no&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">framespacing</span>=<span class=\"string\">&quot;0&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">high_quality</span>=<span class=\"string\">1</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">danmaku</span>=<span class=\"string\">1</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">allowfullscreen</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>视频质量</th>\n<th>弹幕（0为默认关闭）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>&amp;high_quality=1</td>\n<td>&amp;danmaku=0</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"aplayer歌单引入\"><a class=\"markdownIt-Anchor\" href=\"#aplayer歌单引入\"></a> Aplayer歌单引入</h2>\n<p>必要的参数</p>\n<p>data-id =&gt;音乐页面链接上的id号</p>\n<p>data-server =&gt; 平台名称。netease：网易；tencent：腾讯；xiami：虾米；kugou：酷狗；baidu：百度</p>\n<p>data-type=&gt;类型。playlist：歌单；song：单曲；专辑：album；关键词：search；歌手：artist</p>\n<table>\n<thead>\n<tr>\n<th>data-id</th>\n<th>data-server</th>\n<th>data-type</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>3778678</td>\n<td>netease</td>\n<td>playlist</td>\n</tr>\n<tr>\n<td>热歌榜</td>\n<td>网易</td>\n<td>歌单</td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/05/02/18/13/london-7965770__340.jpg","cover_type":"img","excerpt":"","more":"<h2 id=\"hexo\"><a class=\"markdownIt-Anchor\" href=\"#hexo\"></a> Hexo</h2>\n<h3 id=\"安装前提\"><a class=\"markdownIt-Anchor\" href=\"#安装前提\"></a> 安装前提</h3>\n<p>安装 Hexo 相当简单，只需要先安装下列应用程序即可：</p>\n<ul>\n<li><a href=\"http://nodejs.org/\">Node.js</a> (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)</li>\n<li><a href=\"http://git-scm.com/\">Git</a></li>\n</ul>\n<p>如果您的电脑中已经安装上述必备程序，那么恭喜您！你可以直接前往 <a href=\"https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85-Hexo\">安装 Hexo</a> 步骤。</p>\n<p>如果您的电脑中尚未安装所需要的程序，请根据以下安装指示完成安装。</p>\n<h4 id=\"安装-git\"><a class=\"markdownIt-Anchor\" href=\"#安装-git\"></a> 安装 Git</h4>\n<ul>\n<li>Windows：下载并安装 <a href=\"https://git-scm.com/download/win\">git</a>.</li>\n<li>Mac：使用 <a href=\"http://mxcl.github.com/homebrew/\">Homebrew</a>, <a href=\"http://www.macports.org/\">MacPorts</a> 或者下载 <a href=\"http://sourceforge.net/projects/git-osx-installer/\">安装程序</a>。</li>\n<li>Linux (Ubuntu, Debian)：<code>sudo apt-get install git-core</code></li>\n<li>Linux (Fedora, Red Hat, CentOS)：<code>sudo yum install git-core</code></li>\n</ul>\n<blockquote>\n<p><strong>Mac 用户</strong></p>\n<p>如果在编译时可能会遇到问题，请先到 App Store 安装 Xcode，Xcode 完成后，启动并进入 <strong>Preferences -&gt; Download -&gt; Command Line Tools -&gt; Install</strong> 安装命令行工具。</p>\n</blockquote>\n<blockquote>\n<p><strong>Windows 用户</strong></p>\n<p>对于中国大陆地区用户，可以前往 <a href=\"https://npmmirror.com/mirrors/git-for-windows/\">淘宝 Git for Windows 镜像</a> 下载 git 安装包。</p>\n</blockquote>\n<h4 id=\"安装-nodejs\"><a class=\"markdownIt-Anchor\" href=\"#安装-nodejs\"></a> 安装 Node.js</h4>\n<p>Node.js 为大多数平台提供了官方的 <a href=\"https://nodejs.org/zh-cn/download/\">安装程序</a>。对于中国大陆地区用户，可以前往 <a href=\"https://npmmirror.com/mirrors/node/\">淘宝 Node.js 镜像</a> 下载。</p>\n<p>其它的安装方法：</p>\n<ul>\n<li>Windows：通过 <a href=\"https://github.com/jasongin/nvs/\">nvs</a>（推荐）或者 <a href=\"https://github.com/nvm-sh/nvm\">nvm</a> 安装。</li>\n<li>Mac：使用 <a href=\"https://brew.sh/\">Homebrew</a> 或 <a href=\"http://www.macports.org/\">MacPorts</a> 安装。</li>\n<li>Linux（DEB/RPM-based）：从 <a href=\"https://github.com/nodesource/distributions\">NodeSource</a> 安装。</li>\n<li>其它：使用相应的软件包管理器进行安装，可以参考由 Node.js 提供的 <a href=\"https://nodejs.org/zh-cn/download/package-manager/\">指导</a>。</li>\n</ul>\n<p>对于 Mac 和 Linux 同样建议使用 nvs 或者 nvm，以避免可能会出现的权限问题。</p>\n<blockquote>\n<p><strong>Windows 用户</strong></p>\n<p>使用 Node.js 官方安装程序时，请确保勾选 <strong>Add to PATH</strong> 选项（默认已勾选）</p>\n</blockquote>\n<blockquote>\n<p><strong>For Mac / Linux 用户</strong></p>\n<p>如果在尝试安装 Hexo 的过程中出现 <code>EACCES</code> 权限错误，请遵循 <a href=\"https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally\">由 npmjs 发布的指导</a> 修复该问题。强烈建议 <strong>不要</strong> 使用 root、sudo 等方法覆盖权限</p>\n</blockquote>\n<blockquote>\n<p><strong>Linux</strong></p>\n<p>如果您使用 Snap 来安装 Node.js，在 <a href=\"https://hexo.io/zh-cn/docs/commands#init\">初始化</a> 博客时您可能需要手动在目标文件夹中执行 <code>npm install</code>。</p>\n</blockquote>\n<h3 id=\"安装-hexo\"><a class=\"markdownIt-Anchor\" href=\"#安装-hexo\"></a> 安装 Hexo</h3>\n<p>所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n<h3 id=\"初始化-hexo-项目\"><a class=\"markdownIt-Anchor\" href=\"#初始化-hexo-项目\"></a> 初始化 Hexo 项目</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo init blog(项目名)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog-demo  //进入blog-demo文件夹</span><br><span class=\"line\">npm i\t\t // 安装依赖</span><br></pre></td></tr></table></figure>\n<p>初始化项目后，<code>blog</code>有如下结构：</p>\n<p>【node_modules】：依赖包<br />\n【scaffolds】：生成文章的一些模板<br />\n【source】：用来存放你的文章<br />\n【themes】：主题<br />\n【.npmignore】：发布时忽略的文件（可忽略）<br />\n【_config.landscape.yml】：主题的配置文件<br />\n【config.yml】：博客的配置文件<br />\n【package.json】：项目名称、描述、版本、运行和开发等信息</p>\n<h3 id=\"启动项目\"><a class=\"markdownIt-Anchor\" href=\"#启动项目\"></a> 启动项目</h3>\n<blockquote>\n<p>hexo server或者hexo s</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo s</span><br><span class=\"line\">================================</span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">INFO  Start processing</span><br><span class=\"line\">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>\n<h3 id=\"挂载到github-pages\"><a class=\"markdownIt-Anchor\" href=\"#挂载到github-pages\"></a> 挂载到GitHub Pages</h3>\n<p>安装 hexo-deployer-git</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n<p>修改 _config.yml 文件</p>\n<p>修改最后一行的配置，将repository修改为你自己的github项目地址即可，还有分支要改为<code>main</code>代表主分支（注意缩进）。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repository:</span> <span class=\"string\">git@github.com:Fomalhaut-Blog/Fomalhaut-Blog.github.io.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">main</span></span><br></pre></td></tr></table></figure>\n<p>修改好配置后，运行如下命令，将代码部署到 GitHub</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy  // Git BASH终端</span><br><span class=\"line\">hexo clean; hexo generate; hexo deploy  // VSCODE终端</span><br></pre></td></tr></table></figure>\n<ul>\n<li>hexo clean：删除之前生成的文件，若未生成过静态文件，可忽略此命令。</li>\n<li>hexo generate：生成静态文章，可以用<code>hexo g</code>缩写</li>\n<li>hexo deploy：部署文章，可以用<code>hexo d</code>缩写</li>\n</ul>\n<p>如果出现<code>Deploy done</code>，则说明部署成功了。</p>\n<p><img src=\"./img/image-20230508130652933.png\" alt=\"image-20230508130652933\" /></p>\n<h2 id=\"美化博客\"><a class=\"markdownIt-Anchor\" href=\"#美化博客\"></a> 美化博客</h2>\n<p><strong>官方文档</strong></p>\n<p><a href=\"https://butterfly.js.org/\">Butterfly - A Simple and Card UI Design theme for Hexo</a></p>\n<h3 id=\"安装butterfly主题\"><a class=\"markdownIt-Anchor\" href=\"#安装butterfly主题\"></a> 安装butterfly主题</h3>\n<p>在你的博客根目录打开<code>Git BASH</code>命令窗口执行<code>npm i hexo-theme-butterfly</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i hexo-theme-butterfly</span><br></pre></td></tr></table></figure>\n<p>安装成功后可在【blog/node_modules】文件夹下找到hexo-theme-butterfly文件夹</p>\n<p>升级方法：在博客根目录下，运行 <code>npm update hexo-theme-butterfly</code>。<br />\n升级前请将<code>hexo-theme-butterfly</code>文件夹备份，npm更新会直接覆盖成新的包。</p>\n<h3 id=\"应用主题\"><a class=\"markdownIt-Anchor\" href=\"#应用主题\"></a> 应用主题</h3>\n<ol>\n<li>\n<p>修改站点配置文件_config.yml，把主题改为butterfly</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">butterfly</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>如果你没有pug以及stylus的渲染器，请下载安装，这两个渲染器是Butterfly生成基础页面所需的依赖包：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>为了减少升级主题后带来的不便，请使用以下方法（建议，可以不做，高度魔改的一般都不会升级主题了，不然魔改的会被覆盖掉）<br />\n把主题文件夹中的 <code>_config.yml</code> 复制到 Hexo 根目录里（，同时重新命名为 <code>_config.butterfly.yml</code>。以后只需要在 <code>_config.butterfly.yml</code>进行配置即可生效。Hexo会自动合併主题中的<code>_config.yml</code>和 <code>_config.butterfly.yml</code>里的配置，如果存在同名配置，会使用<code>_config.butterfly.yml</code>的配置，其优先度较高。</p>\n</li>\n</ol>\n<h3 id=\"front-matter\"><a class=\"markdownIt-Anchor\" href=\"#front-matter\"></a> Front-matter</h3>\n<p><code>Front-matter</code> 是 markdown 文件最上方以<code>---</code>分隔的区域，用于指定个别档案的变数。</p>\n<ul>\n<li>Page Front-matter 用于页面配置</li>\n<li>Post Front-matter 用于文章页配置</li>\n</ul>\n<p><strong>Page Front-matter：</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title:</span><br><span class=\"line\">date:</span><br><span class=\"line\">updated:</span><br><span class=\"line\">type:</span><br><span class=\"line\">comments:</span><br><span class=\"line\">description:</span><br><span class=\"line\">keywords:</span><br><span class=\"line\">top<span class=\"emphasis\">_img:</span></span><br><span class=\"line\"><span class=\"emphasis\">mathjax:</span></span><br><span class=\"line\"><span class=\"emphasis\">katex:</span></span><br><span class=\"line\"><span class=\"emphasis\">aside:</span></span><br><span class=\"line\"><span class=\"emphasis\">aplayer:</span></span><br><span class=\"line\"><span class=\"emphasis\">highlight_</span>shrink:</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">写法</th>\n<th style=\"text-align:center\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">title</td>\n<td style=\"text-align:center\">【必需】页面标题</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">date</td>\n<td style=\"text-align:center\">【必需】页面创建日期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">type</td>\n<td style=\"text-align:center\">【必需】标籤、分类和友情链接三个页面需要配置</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">updated</td>\n<td style=\"text-align:center\">【可选】页面更新日期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">description</td>\n<td style=\"text-align:center\">【可选】页面描述</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">keywords</td>\n<td style=\"text-align:center\">【可选】页面关键字</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">comments</td>\n<td style=\"text-align:center\">【可选】显示页面评论模块(默认 true)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">top_img</td>\n<td style=\"text-align:center\">【可选】页面顶部图片</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mathjax</td>\n<td style=\"text-align:center\">【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kates</td>\n<td style=\"text-align:center\">【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">aside</td>\n<td style=\"text-align:center\">【可选】显示侧边栏 (默认 true)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">aplayer</td>\n<td style=\"text-align:center\">【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">highlight_shrink</td>\n<td style=\"text-align:center\">【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置)</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Post Front-matter：</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title:</span><br><span class=\"line\">date:</span><br><span class=\"line\">updated:</span><br><span class=\"line\">tags:</span><br><span class=\"line\">categories:</span><br><span class=\"line\">keywords:</span><br><span class=\"line\">description:</span><br><span class=\"line\">top<span class=\"emphasis\">_img:</span></span><br><span class=\"line\"><span class=\"emphasis\">comments:</span></span><br><span class=\"line\"><span class=\"emphasis\">cover:</span></span><br><span class=\"line\"><span class=\"emphasis\">toc:</span></span><br><span class=\"line\"><span class=\"emphasis\">toc_</span>number:</span><br><span class=\"line\">toc<span class=\"emphasis\">_style_</span>simple:</span><br><span class=\"line\">copyright:</span><br><span class=\"line\">copyright<span class=\"emphasis\">_author:</span></span><br><span class=\"line\"><span class=\"emphasis\">copyright_</span>author<span class=\"emphasis\">_href:</span></span><br><span class=\"line\"><span class=\"emphasis\">copyright_</span>url:</span><br><span class=\"line\">copyright<span class=\"emphasis\">_info:</span></span><br><span class=\"line\"><span class=\"emphasis\">mathjax:</span></span><br><span class=\"line\"><span class=\"emphasis\">katex:</span></span><br><span class=\"line\"><span class=\"emphasis\">aplayer:</span></span><br><span class=\"line\"><span class=\"emphasis\">highlight_</span>shrink:</span><br><span class=\"line\"><span class=\"section\">aside:</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>写法</th>\n<th style=\"text-align:center\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>title</td>\n<td style=\"text-align:center\">【必需】文章标题</td>\n</tr>\n<tr>\n<td>date</td>\n<td style=\"text-align:center\">【必需】文章创建日期</td>\n</tr>\n<tr>\n<td>updated</td>\n<td style=\"text-align:center\">【可选】文章更新日期</td>\n</tr>\n<tr>\n<td>tags</td>\n<td style=\"text-align:center\">【可选】文章标籤</td>\n</tr>\n<tr>\n<td>categories</td>\n<td style=\"text-align:center\">【可选】文章分类</td>\n</tr>\n<tr>\n<td>keywords</td>\n<td style=\"text-align:center\">【可选】文章关键字</td>\n</tr>\n<tr>\n<td>description</td>\n<td style=\"text-align:center\">【可选】文章描述</td>\n</tr>\n<tr>\n<td>top_img</td>\n<td style=\"text-align:center\">【可选】文章顶部图片</td>\n</tr>\n<tr>\n<td>cover</td>\n<td style=\"text-align:center\">【可选】文章缩略图(如果没有设置top_img,文章页顶部将显示缩略图，可设为false/图片地址/留空)</td>\n</tr>\n<tr>\n<td>comments</td>\n<td style=\"text-align:center\">【可选】显示文章评论模块(默认 true)</td>\n</tr>\n<tr>\n<td>toc</td>\n<td style=\"text-align:center\">【可选】显示文章TOC(默认为设置中toc的enable配置)</td>\n</tr>\n<tr>\n<td>toc_number</td>\n<td style=\"text-align:center\">【可选】显示toc_number(默认为设置中toc的number配置)</td>\n</tr>\n<tr>\n<td>toc_style_simple</td>\n<td style=\"text-align:center\">【可选】显示 toc 简洁模式</td>\n</tr>\n<tr>\n<td>copyright</td>\n<td style=\"text-align:center\">【可选】显示文章版权模块(默认为设置中post_copyright的enable配置)</td>\n</tr>\n<tr>\n<td>copyright_author</td>\n<td style=\"text-align:center\">【可选】文章版权模块的文章作者</td>\n</tr>\n<tr>\n<td>copyright_author_href</td>\n<td style=\"text-align:center\">【可选】文章版权模块的文章作者链接</td>\n</tr>\n<tr>\n<td>copyright_url</td>\n<td style=\"text-align:center\">【可选】文章版权模块的文章连结链接</td>\n</tr>\n<tr>\n<td>copyright_info</td>\n<td style=\"text-align:center\">【可选】文章版权模块的版权声明文字</td>\n</tr>\n<tr>\n<td>mathjax</td>\n<td style=\"text-align:center\">【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false)</td>\n</tr>\n<tr>\n<td>katex</td>\n<td style=\"text-align:center\">【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false)</td>\n</tr>\n<tr>\n<td>aplayer</td>\n<td style=\"text-align:center\">【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</td>\n</tr>\n<tr>\n<td>highlight_shrink</td>\n<td style=\"text-align:center\">【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置)</td>\n</tr>\n<tr>\n<td>aside</td>\n<td style=\"text-align:center\">【可选】显示侧边栏 (默认 true)</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"标签页\"><a class=\"markdownIt-Anchor\" href=\"#标签页\"></a> 标签页</h3>\n<p>前往你的Hexo博客根目录，打开<code>Git Bash</code>执行如下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page tags</span><br></pre></td></tr></table></figure>\n<p>在<code>\\source\\</code>会生成一个含有<code>index.md</code>文件的<code>tags</code>文件夹。</p>\n<p>修改<code>\\source\\tags\\index.md</code>，添加<code>type: &quot;tags&quot;</code>。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: tags</span><br><span class=\"line\">date: 2022-10-28 12:00:00</span><br><span class=\"line\"><span class=\"section\">type: &quot;tags&quot;</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"友情链接\"><a class=\"markdownIt-Anchor\" href=\"#友情链接\"></a> 友情链接</h3>\n<p>前往你的Hexo博客根目录，打开cmd命令窗口执行如下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page <span class=\"built_in\">link</span></span><br></pre></td></tr></table></figure>\n<p>在<code>[BlogRoot]\\source\\</code>会生成一个含有<code>index.md</code>文件的<code>link</code>文件夹</p>\n<p>修改<code>[BlogRoot]\\source\\link\\index.md</code>，添加<code>type: &quot;link&quot;</code></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: link</span><br><span class=\"line\">date: 2022-10-28 12:00:00</span><br><span class=\"line\"><span class=\"section\">type: &quot;link&quot;</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br></pre></td></tr></table></figure>\n<p>前往<code>[BlogRoot]\\source\\_data</code>创建一个<code>link.yml</code>文件（如果沒有 <code>_data</code> 文件夹，请自行创建），并写入如下信息（根据你的需要写）：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">class_name:</span> <span class=\"number\">1</span><span class=\"string\">.技术支持</span></span><br><span class=\"line\">  <span class=\"attr\">class_desc:</span> <span class=\"string\">本网站的搭建由以下开源作者提供技术支持</span></span><br><span class=\"line\">  <span class=\"attr\">link_list:</span> </span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Hexo</span> </span><br><span class=\"line\">      <span class=\"attr\">link:</span> <span class=\"string\">https://hexo.io/zh-cn/</span></span><br><span class=\"line\">      <span class=\"attr\">avatar:</span> <span class=\"string\">https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class=\"line\">      <span class=\"attr\">descr:</span> <span class=\"string\">快速、简单且强大的网志框架</span></span><br><span class=\"line\">      <span class=\"attr\">siteshot:</span> <span class=\"string\">https://source.fomal.cc/siteshot/hexo.io.jpg</span></span><br><span class=\"line\">      </span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">class_name:</span> <span class=\"number\">2</span><span class=\"string\">.友情链接</span></span><br><span class=\"line\">  <span class=\"attr\">class_desc:</span> <span class=\"string\">一些好朋友~~</span></span><br><span class=\"line\">  <span class=\"attr\">link_list:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Fomalhaut🥝</span></span><br><span class=\"line\">      <span class=\"attr\">link:</span> <span class=\"string\">https://fomal.cc/</span></span><br><span class=\"line\">      <span class=\"attr\">avatar:</span> <span class=\"string\">/assets/head.jpg</span></span><br><span class=\"line\">      <span class=\"attr\">descr:</span> <span class=\"string\">Future</span> <span class=\"string\">is</span> <span class=\"string\">now</span> <span class=\"string\">🍭🍭🍭</span></span><br><span class=\"line\">      <span class=\"attr\">siteshot:</span> <span class=\"string\">https://source.fomal.cc/siteshot/www.fomal.cn.jpg</span></span><br></pre></td></tr></table></figure>\n<p>class_name和class_desc支持 html 格式，如不需要，也可以留空。</p>\n<h3 id=\"404页面\"><a class=\"markdownIt-Anchor\" href=\"#404页面\"></a> 404页面</h3>\n<p>主題內置了一个简单的404页面，可在设置中开放。</p>\n<p>如需本地预览，请访问 <a href=\"http://localhost:4000/404.html\">http://localhost:4000/404.html</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># A simple 404 page</span></span><br><span class=\"line\"><span class=\"attr\">error_404:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">subtitle:</span> <span class=\"string\">&quot;页面沒有找到&quot;</span></span><br><span class=\"line\">  <span class=\"attr\">background:</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"博客网站配置\"><a class=\"markdownIt-Anchor\" href=\"#博客网站配置\"></a> 博客网站配置</h2>\n<blockquote>\n<p>git</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 清除缓存，生成静态文件，部署到github </span></span><br><span class=\"line\">hexo cl &amp;&amp; hexo g &amp;&amp; hexo d <span class=\"comment\"># git bash</span></span><br><span class=\"line\">hexo cl; hexo g; hexo d <span class=\"comment\"># vscode</span></span><br></pre></td></tr></table></figure>\n<p>Markdown语法与外挂标签写法汇总<br />\n<a href=\"https://www.fomal.cc/posts/5389e93f.html\">https://www.fomal.cc/posts/5389e93f.html</a></p>\n<div class=\"note simple\"><p>默认 提示块标签</p>\n</div>\n<div class=\"note default simple\"><p>default 提示块标签</p>\n</div>\n<div class=\"note primary simple\"><p>primary 提示块标签</p>\n</div>\n<div class=\"note success simple\"><p>success 提示块标签</p>\n</div>\n<div class=\"note info simple\"><p>info 提示块标签</p>\n</div>\n<div class=\"note warning simple\"><p>warning 提示块标签</p>\n</div>\n<div class=\"note danger simple\"><p>danger 提示块标签</p>\n</div>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">需要复制的</th>\n<th>需要删除的</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">_config.yml：站点配置文件</td>\n<td>.git：无论是在站点根目录下，还是主题目录下的.git文件，都可以删掉</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_config.butterfly.yml：主题配置文件，为了方便主题升级剥离出来的配置文件</td>\n<td>node_modules：<code>npm install</code>会根据package.json生成</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">package.json：说明使用哪些依赖包</td>\n<td>public：<code>hexo g</code>会重新编译生成</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scaffolds：文章的模板</td>\n<td>.deploy_git：在使用<code>hexo d</code>时也会重新生成</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">source：自己写的博客源码</td>\n<td>db.json文件：<code>hexo s</code>快速启动所需的数据库</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">themes：主题文件夹（魔改都在里面啦）</td>\n<td>package-lock.json：记录依赖之间的内部依赖关系，可以根据<code>package.json</code>重新生成</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">.gitignore：说明在提交时哪些文件可以忽略</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p><strong>嵌入B站视频</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">align</span>=<span class=\"string\">center</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;aspect-ratio&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://player.bilibili.com/player.html?aid=247609487&amp;bvid=BV1vv41177jq&amp;cid=324439110&amp;page=1&amp;high_quality=1&amp;danmaku=0&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">scrolling</span>=<span class=\"string\">&quot;no&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">border</span>=<span class=\"string\">&quot;0&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">frameborder</span>=<span class=\"string\">&quot;no&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">framespacing</span>=<span class=\"string\">&quot;0&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">high_quality</span>=<span class=\"string\">1</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">danmaku</span>=<span class=\"string\">1</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">allowfullscreen</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>视频质量</th>\n<th>弹幕（0为默认关闭）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>&amp;high_quality=1</td>\n<td>&amp;danmaku=0</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"aplayer歌单引入\"><a class=\"markdownIt-Anchor\" href=\"#aplayer歌单引入\"></a> Aplayer歌单引入</h2>\n<p>必要的参数</p>\n<p>data-id =&gt;音乐页面链接上的id号</p>\n<p>data-server =&gt; 平台名称。netease：网易；tencent：腾讯；xiami：虾米；kugou：酷狗；baidu：百度</p>\n<p>data-type=&gt;类型。playlist：歌单；song：单曲；专辑：album；关键词：search；歌手：artist</p>\n<table>\n<thead>\n<tr>\n<th>data-id</th>\n<th>data-server</th>\n<th>data-type</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>3778678</td>\n<td>netease</td>\n<td>playlist</td>\n</tr>\n<tr>\n<td>热歌榜</td>\n<td>网易</td>\n<td>歌单</td>\n</tr>\n</tbody>\n</table>\n"},{"title":"Minio环境搭建","description":null,"date":"2023-05-11T17:00:00.000Z","updated":"2023-05-11T17:00:00.000Z","swiper_index":1,"_content":"\n## 在Linux下进行安装\n\n### 下载 MinIO 服务器\n\n~~~bash\nwget https://dl.min.io/server/minio/release/linux-amd64/archive/minio-20230210184839.0.0.x86_64.rpm -O minio.rpm\nsudo dnf install minio.rpm\n~~~\n\n\n\n如果报错为：\n\n![image-20230221193502299](./img/image-20230221193502299.png)\n\n怎么先安装**dnf**\n\n~~~bash\nyum install dnf\n~~~\n\n\n\n### 创建systemd服务文件\n\n.deb或软件包.rpm将以下 systemd服务文件安装到 /etc/systemd/system/minio.service. 对于二进制安装，在所有 MinIO 主机上手动创建此文件：\n\n\n\n默认情况下，该`minio.service`文件作为`minio-user`用户和组运行。`groupadd`您可以使用和命令创建用户和组`useradd` 。以下示例创建用户、组并设置权限以访问旨在供 MinIO 使用的文件夹路径。这些命令通常需要 root ( `sudo`) 权限。\n\n~~~bash\ngroupadd -r minio-user\nuseradd -M -r -g minio-user minio-user\nchown minio-user:minio-user /mnt/disk1 /mnt/disk2 /mnt/disk3 /mnt/disk4\n~~~\n\n\n\n### 创建环境变量文件\n\n创建一个环境变量文件在/etc/default/minio\n\n示例提供了一个起始环境文件：\n\n~~~bash\n# MINIO_ROOT_USER and MINIO_ROOT_PASSWORD sets the root account for the MinIO server.\n# This user has unrestricted permissions to perform S3 and administrative API operations on any resource in the deployment.\n# Omit to use the default values 'minioadmin:minioadmin'.\n# MinIO recommends setting non-default values as a best practice, regardless of environment\n\nMINIO_ROOT_USER=myminioadmin\nMINIO_ROOT_PASSWORD=minio-secret-key-change-me\n\n# MINIO_VOLUMES sets the storage volume or path to use for the MinIO server.\n\nMINIO_VOLUMES=\"/mnt/data\"\n\n# MINIO_SERVER_URL sets the hostname of the local machine for use with the MinIO Server\n# MinIO assumes your network control plane can correctly resolve this hostname to the local machine\n\n# Uncomment the following line and replace the value with the correct hostname for the local machine.\n\n#MINIO_SERVER_URL=\"http://minio.example.net\"\n~~~\n\n\n\n### 启动MinIO服务\n\n本地主机上发出以下命令以启动 MinIO SNSD部署作为服务：\n\n~~~bash\nsudo systemctl start minio.service\n~~~\n\n\n\n\n\n\n\n## 在docker中安装\n\n~~~bash\ndocker pull minio/minio\n~~~\n\n\n\n~~~bash\ndocker run -p 9000:9000 -p 9001:9001 --name minio -d --restart=always -e \"MINIO_ACCESS_KEY=admin\" -e \"MINIO_SECRET_KEY=admin123\" -v /home/data:/data -v /home/config:/root/.minio minio/minio server --console-address \":9000\" --address \":9001\" /data\n~~~\n\n\n\n启动：ip:9000\n\n![image-20230221212701394](./img/image-20230221212701394.png)\n\n\n\n创建密钥\n\n![image-20230222170505389](./img/image-20230222170505389.png)\n\n\n\n## 在SpringBoot中使用\n\n配置依赖\n\n```XML\n<!-- minio -->\n<dependency>\n    <groupId>io.minio</groupId>\n    <artifactId>minio</artifactId>\n    <version>8.3.7</version>\n</dependency>\n```\n\n在application.yml中配置\n\n```YAML\nminio:\n  # 访问的url\n  endpoint: http://192.168.10.100\n  # API的端口\n  port: 9001\n  # 密钥\n  accessKey: \n  secretKey: \n  secure: false\n  bucket-name: picture # 桶名\n  image-size: 10455760    # 图片文件最大为10M\n  file-size: 1073741824   # 文件最大为1G\n```\n\n需在包config下新建类\n\n```java\nimport io.minio.MinioClient;\nimport lombok.Data;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n/**\n * @version: java version 1.8\n * @Author: WWJ\n * @description:\n * @date: 2023-02-21 22:20\n */\n@Data\n@Configuration\n@ConfigurationProperties(prefix = \"minio\")\npublic class MyMinioProperties {\n    private String endpoint;\n    private Integer port;\n    private String accessKey;\n    private String secretKey;\n    private boolean secure;\n    private String bucketName;\n    private long imageSize;\n    private long fileSize;\n\n    @Bean\n    public MinioClient minioClient() {\n        MinioClient minioClient = MinioClient.builder()\n                .credentials(accessKey, secretKey)\n                .endpoint(endpoint, port, secure)\n                .build();\n        return minioClient;\n    }\n}\n```\n\n使用文件处理的工具类\n\n```java\npackage com.rongmei.mushroomProject.utils;\n\nimport com.rongmei.mushroomProject.config.MyMinioProperties;\nimport io.minio.*;\nimport io.minio.errors.ErrorResponseException;\nimport io.minio.errors.InsufficientDataException;\nimport io.minio.errors.InvalidResponseException;\nimport io.minio.errors.XmlParserException;\nimport io.minio.http.Method;\nimport io.minio.messages.Bucket;\nimport io.minio.messages.Item;\nimport org.apache.commons.io.FilenameUtils;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.FastByteArrayOutputStream;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport javax.annotation.Resource;\nimport javax.servlet.ServletOutputStream;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\n\n/**\n * @version: java version 1.8\n * @Author: WWJ\n * @description:\n * @date: 2023-02-21 22:33\n */\n@Component\npublic class MinioUtil {\n    @Resource\n    private MyMinioProperties prop;\n\n    @Resource\n    private MinioClient minioClient;\n\n    /**\n     * 查看存储bucket是否存在\n     *\n     * @return boolean\n     */\n    public Boolean bucketExists(String bucketName) {\n        Boolean found;\n        try {\n            found = minioClient.bucketExists(BucketExistsArgs.builder().bucket(bucketName).build());\n        } catch (Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n        return found;\n    }\n\n    /**\n     * 创建存储bucket\n     *\n     * @return Boolean\n     */\n    public Boolean makeBucket(String bucketName) {\n        try {\n            minioClient.makeBucket(MakeBucketArgs.builder()\n                    .bucket(bucketName)\n                    .build());\n        } catch (Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * 删除存储bucket\n     *\n     * @return Boolean\n     */\n    public Boolean removeBucket(String bucketName) {\n        try {\n            minioClient.removeBucket(RemoveBucketArgs.builder()\n                    .bucket(bucketName)\n                    .build());\n        } catch (Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * 获取全部bucket\n     */\n    public List<Bucket> getAllBuckets() {\n        try {\n            List<Bucket> buckets = minioClient.listBuckets();\n            return buckets;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n\n    /**\n     * 文件上传\n     *\n     * @param file 文件\n     * @return Boolean\n     */\n    public String upload(MultipartFile file) {\n        if (file.isEmpty()) {\n            throw new RuntimeException();\n        }\n        String originalFilename = file.getOriginalFilename();\n        String uuid = UUID.randomUUID().toString().replace(\"-\", \"\");\n        String ext = \".\" + FilenameUtils.getExtension(originalFilename);\n        String fileName = uuid + ext;\n        try {\n            PutObjectArgs objectArgs = PutObjectArgs.builder().bucket(prop.getBucketName()).object(fileName)\n                    .stream(file.getInputStream(), file.getSize(), -1).contentType(file.getContentType()).build();\n            //文件名称相同会覆盖\n            minioClient.putObject(objectArgs);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n        return fileName;\n    }\n\n    /**\n     * 预览图片\n     *\n     * @param fileName\n     * @return\n     */\n    public String preview(String fileName) {\n        // 查看文件地址\n        GetPresignedObjectUrlArgs build = new GetPresignedObjectUrlArgs().builder().bucket(prop.getBucketName()).object(fileName).method(Method.GET).build();\n        try {\n            String url = minioClient.getPresignedObjectUrl(build);\n            return url;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    /**\n     * 文件下载\n     *\n     * @param fileName 文件名称\n     * @param res      response\n     * @return Boolean\n     */\n    public void download(String fileName, HttpServletResponse res) {\n        GetObjectArgs objectArgs = GetObjectArgs.builder().bucket(prop.getBucketName())\n                .object(fileName).build();\n        try (GetObjectResponse response = minioClient.getObject(objectArgs)) {\n            byte[] buf = new byte[1024];\n            int len;\n            try (FastByteArrayOutputStream os = new FastByteArrayOutputStream()) {\n                while ((len = response.read(buf)) != -1) {\n                    os.write(buf, 0, len);\n                }\n                os.flush();\n                byte[] bytes = os.toByteArray();\n                res.setCharacterEncoding(\"utf-8\");\n                // 设置强制下载不打开\n                // res.setContentType(\"application/force-download\");\n                res.addHeader(\"Content-Disposition\", \"attachment;fileName=\" + fileName);\n                try (ServletOutputStream stream = res.getOutputStream()) {\n                    stream.write(bytes);\n                    stream.flush();\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * 查看文件对象\n     *\n     * @return 存储bucket内文件对象信息\n     */\n    public List<Item> listObjects() {\n        Iterable<Result<Item>> results = minioClient.listObjects(\n                ListObjectsArgs.builder().bucket(prop.getBucketName()).build());\n        List<Item> items = new ArrayList<>();\n        try {\n            for (Result<Item> result : results) {\n                items.add(result.get());\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n        return items;\n    }\n\n    /**\n     * 获取路径下文件列表\n     *\n     * @param prefix     文件名称\n     * @param recursive  是否递归查找，如果是false,就模拟文件夹结构查找\n     * @return 二进制流\n     */\n    public Iterable<Result<Item>> listObjects(String prefix, boolean recursive) {\n        return minioClient.listObjects(ListObjectsArgs.builder().bucket(prop.getBucketName()).prefix(prefix).recursive(recursive).build());\n    }\n\n    /**\n     * 删除\n     *\n     * @param fileName\n     * @return\n     * @throws Exception\n     */\n    public boolean remove(String fileName) {\n        try {\n            minioClient.removeObject(RemoveObjectArgs.builder().bucket(prop.getBucketName()).object(fileName).build());\n        } catch (Exception e) {\n            return false;\n        }\n        return true;\n    }\n\n}\n```\n\n在controller层即可调用工具类\n\n上传对象\n\n![image-20230222170646249](./img/image-20230222170646249.png)\n\n\n\n~~~java\n// 获取桶内所有图片URL\n    @GetMapping(\"/find\")\n    public List<ObjectDTO> findAll(@RequestParam(defaultValue = \"\") String filename) throws IOException, InvalidKeyException, InvalidResponseException, InsufficientDataException, NoSuchAlgorithmException, ServerException, InternalException, XmlParserException, ErrorResponseException {\n        ArrayList<ObjectDTO> objectDTOS = new ArrayList<>();\n        Iterable<Result<Item>> results = minioUtil.listObjects(filename, true);\n        for (Result<Item> result: results) {\n            String fileName = result.get().objectName();\n            String address = minioUtil.preview(fileName);\n            String url = StringUtils.substringBefore(address, \"?\");\n            ObjectDTO objectDTO = new ObjectDTO(fileName, url);\n            objectDTOS.add(objectDTO);\n        }\n        return objectDTOS;\n    }\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/对象存储搭建.md","raw":"---\ntitle: Minio环境搭建\ndescription:\ndate: 2023-05-12 1:0:00\nupdated: 2023-05-12 1:0:00\ntags:\n  - 对象存储\ncategories:\n  - 技术栈\nswiper_index: 1 # 置顶权重\n---\n\n## 在Linux下进行安装\n\n### 下载 MinIO 服务器\n\n~~~bash\nwget https://dl.min.io/server/minio/release/linux-amd64/archive/minio-20230210184839.0.0.x86_64.rpm -O minio.rpm\nsudo dnf install minio.rpm\n~~~\n\n\n\n如果报错为：\n\n![image-20230221193502299](./img/image-20230221193502299.png)\n\n怎么先安装**dnf**\n\n~~~bash\nyum install dnf\n~~~\n\n\n\n### 创建systemd服务文件\n\n.deb或软件包.rpm将以下 systemd服务文件安装到 /etc/systemd/system/minio.service. 对于二进制安装，在所有 MinIO 主机上手动创建此文件：\n\n\n\n默认情况下，该`minio.service`文件作为`minio-user`用户和组运行。`groupadd`您可以使用和命令创建用户和组`useradd` 。以下示例创建用户、组并设置权限以访问旨在供 MinIO 使用的文件夹路径。这些命令通常需要 root ( `sudo`) 权限。\n\n~~~bash\ngroupadd -r minio-user\nuseradd -M -r -g minio-user minio-user\nchown minio-user:minio-user /mnt/disk1 /mnt/disk2 /mnt/disk3 /mnt/disk4\n~~~\n\n\n\n### 创建环境变量文件\n\n创建一个环境变量文件在/etc/default/minio\n\n示例提供了一个起始环境文件：\n\n~~~bash\n# MINIO_ROOT_USER and MINIO_ROOT_PASSWORD sets the root account for the MinIO server.\n# This user has unrestricted permissions to perform S3 and administrative API operations on any resource in the deployment.\n# Omit to use the default values 'minioadmin:minioadmin'.\n# MinIO recommends setting non-default values as a best practice, regardless of environment\n\nMINIO_ROOT_USER=myminioadmin\nMINIO_ROOT_PASSWORD=minio-secret-key-change-me\n\n# MINIO_VOLUMES sets the storage volume or path to use for the MinIO server.\n\nMINIO_VOLUMES=\"/mnt/data\"\n\n# MINIO_SERVER_URL sets the hostname of the local machine for use with the MinIO Server\n# MinIO assumes your network control plane can correctly resolve this hostname to the local machine\n\n# Uncomment the following line and replace the value with the correct hostname for the local machine.\n\n#MINIO_SERVER_URL=\"http://minio.example.net\"\n~~~\n\n\n\n### 启动MinIO服务\n\n本地主机上发出以下命令以启动 MinIO SNSD部署作为服务：\n\n~~~bash\nsudo systemctl start minio.service\n~~~\n\n\n\n\n\n\n\n## 在docker中安装\n\n~~~bash\ndocker pull minio/minio\n~~~\n\n\n\n~~~bash\ndocker run -p 9000:9000 -p 9001:9001 --name minio -d --restart=always -e \"MINIO_ACCESS_KEY=admin\" -e \"MINIO_SECRET_KEY=admin123\" -v /home/data:/data -v /home/config:/root/.minio minio/minio server --console-address \":9000\" --address \":9001\" /data\n~~~\n\n\n\n启动：ip:9000\n\n![image-20230221212701394](./img/image-20230221212701394.png)\n\n\n\n创建密钥\n\n![image-20230222170505389](./img/image-20230222170505389.png)\n\n\n\n## 在SpringBoot中使用\n\n配置依赖\n\n```XML\n<!-- minio -->\n<dependency>\n    <groupId>io.minio</groupId>\n    <artifactId>minio</artifactId>\n    <version>8.3.7</version>\n</dependency>\n```\n\n在application.yml中配置\n\n```YAML\nminio:\n  # 访问的url\n  endpoint: http://192.168.10.100\n  # API的端口\n  port: 9001\n  # 密钥\n  accessKey: \n  secretKey: \n  secure: false\n  bucket-name: picture # 桶名\n  image-size: 10455760    # 图片文件最大为10M\n  file-size: 1073741824   # 文件最大为1G\n```\n\n需在包config下新建类\n\n```java\nimport io.minio.MinioClient;\nimport lombok.Data;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n/**\n * @version: java version 1.8\n * @Author: WWJ\n * @description:\n * @date: 2023-02-21 22:20\n */\n@Data\n@Configuration\n@ConfigurationProperties(prefix = \"minio\")\npublic class MyMinioProperties {\n    private String endpoint;\n    private Integer port;\n    private String accessKey;\n    private String secretKey;\n    private boolean secure;\n    private String bucketName;\n    private long imageSize;\n    private long fileSize;\n\n    @Bean\n    public MinioClient minioClient() {\n        MinioClient minioClient = MinioClient.builder()\n                .credentials(accessKey, secretKey)\n                .endpoint(endpoint, port, secure)\n                .build();\n        return minioClient;\n    }\n}\n```\n\n使用文件处理的工具类\n\n```java\npackage com.rongmei.mushroomProject.utils;\n\nimport com.rongmei.mushroomProject.config.MyMinioProperties;\nimport io.minio.*;\nimport io.minio.errors.ErrorResponseException;\nimport io.minio.errors.InsufficientDataException;\nimport io.minio.errors.InvalidResponseException;\nimport io.minio.errors.XmlParserException;\nimport io.minio.http.Method;\nimport io.minio.messages.Bucket;\nimport io.minio.messages.Item;\nimport org.apache.commons.io.FilenameUtils;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.FastByteArrayOutputStream;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport javax.annotation.Resource;\nimport javax.servlet.ServletOutputStream;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\n\n/**\n * @version: java version 1.8\n * @Author: WWJ\n * @description:\n * @date: 2023-02-21 22:33\n */\n@Component\npublic class MinioUtil {\n    @Resource\n    private MyMinioProperties prop;\n\n    @Resource\n    private MinioClient minioClient;\n\n    /**\n     * 查看存储bucket是否存在\n     *\n     * @return boolean\n     */\n    public Boolean bucketExists(String bucketName) {\n        Boolean found;\n        try {\n            found = minioClient.bucketExists(BucketExistsArgs.builder().bucket(bucketName).build());\n        } catch (Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n        return found;\n    }\n\n    /**\n     * 创建存储bucket\n     *\n     * @return Boolean\n     */\n    public Boolean makeBucket(String bucketName) {\n        try {\n            minioClient.makeBucket(MakeBucketArgs.builder()\n                    .bucket(bucketName)\n                    .build());\n        } catch (Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * 删除存储bucket\n     *\n     * @return Boolean\n     */\n    public Boolean removeBucket(String bucketName) {\n        try {\n            minioClient.removeBucket(RemoveBucketArgs.builder()\n                    .bucket(bucketName)\n                    .build());\n        } catch (Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * 获取全部bucket\n     */\n    public List<Bucket> getAllBuckets() {\n        try {\n            List<Bucket> buckets = minioClient.listBuckets();\n            return buckets;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n\n    /**\n     * 文件上传\n     *\n     * @param file 文件\n     * @return Boolean\n     */\n    public String upload(MultipartFile file) {\n        if (file.isEmpty()) {\n            throw new RuntimeException();\n        }\n        String originalFilename = file.getOriginalFilename();\n        String uuid = UUID.randomUUID().toString().replace(\"-\", \"\");\n        String ext = \".\" + FilenameUtils.getExtension(originalFilename);\n        String fileName = uuid + ext;\n        try {\n            PutObjectArgs objectArgs = PutObjectArgs.builder().bucket(prop.getBucketName()).object(fileName)\n                    .stream(file.getInputStream(), file.getSize(), -1).contentType(file.getContentType()).build();\n            //文件名称相同会覆盖\n            minioClient.putObject(objectArgs);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n        return fileName;\n    }\n\n    /**\n     * 预览图片\n     *\n     * @param fileName\n     * @return\n     */\n    public String preview(String fileName) {\n        // 查看文件地址\n        GetPresignedObjectUrlArgs build = new GetPresignedObjectUrlArgs().builder().bucket(prop.getBucketName()).object(fileName).method(Method.GET).build();\n        try {\n            String url = minioClient.getPresignedObjectUrl(build);\n            return url;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    /**\n     * 文件下载\n     *\n     * @param fileName 文件名称\n     * @param res      response\n     * @return Boolean\n     */\n    public void download(String fileName, HttpServletResponse res) {\n        GetObjectArgs objectArgs = GetObjectArgs.builder().bucket(prop.getBucketName())\n                .object(fileName).build();\n        try (GetObjectResponse response = minioClient.getObject(objectArgs)) {\n            byte[] buf = new byte[1024];\n            int len;\n            try (FastByteArrayOutputStream os = new FastByteArrayOutputStream()) {\n                while ((len = response.read(buf)) != -1) {\n                    os.write(buf, 0, len);\n                }\n                os.flush();\n                byte[] bytes = os.toByteArray();\n                res.setCharacterEncoding(\"utf-8\");\n                // 设置强制下载不打开\n                // res.setContentType(\"application/force-download\");\n                res.addHeader(\"Content-Disposition\", \"attachment;fileName=\" + fileName);\n                try (ServletOutputStream stream = res.getOutputStream()) {\n                    stream.write(bytes);\n                    stream.flush();\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * 查看文件对象\n     *\n     * @return 存储bucket内文件对象信息\n     */\n    public List<Item> listObjects() {\n        Iterable<Result<Item>> results = minioClient.listObjects(\n                ListObjectsArgs.builder().bucket(prop.getBucketName()).build());\n        List<Item> items = new ArrayList<>();\n        try {\n            for (Result<Item> result : results) {\n                items.add(result.get());\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n        return items;\n    }\n\n    /**\n     * 获取路径下文件列表\n     *\n     * @param prefix     文件名称\n     * @param recursive  是否递归查找，如果是false,就模拟文件夹结构查找\n     * @return 二进制流\n     */\n    public Iterable<Result<Item>> listObjects(String prefix, boolean recursive) {\n        return minioClient.listObjects(ListObjectsArgs.builder().bucket(prop.getBucketName()).prefix(prefix).recursive(recursive).build());\n    }\n\n    /**\n     * 删除\n     *\n     * @param fileName\n     * @return\n     * @throws Exception\n     */\n    public boolean remove(String fileName) {\n        try {\n            minioClient.removeObject(RemoveObjectArgs.builder().bucket(prop.getBucketName()).object(fileName).build());\n        } catch (Exception e) {\n            return false;\n        }\n        return true;\n    }\n\n}\n```\n\n在controller层即可调用工具类\n\n上传对象\n\n![image-20230222170646249](./img/image-20230222170646249.png)\n\n\n\n~~~java\n// 获取桶内所有图片URL\n    @GetMapping(\"/find\")\n    public List<ObjectDTO> findAll(@RequestParam(defaultValue = \"\") String filename) throws IOException, InvalidKeyException, InvalidResponseException, InsufficientDataException, NoSuchAlgorithmException, ServerException, InternalException, XmlParserException, ErrorResponseException {\n        ArrayList<ObjectDTO> objectDTOS = new ArrayList<>();\n        Iterable<Result<Item>> results = minioUtil.listObjects(filename, true);\n        for (Result<Item> result: results) {\n            String fileName = result.get().objectName();\n            String address = minioUtil.preview(fileName);\n            String url = StringUtils.substringBefore(address, \"?\");\n            ObjectDTO objectDTO = new ObjectDTO(fileName, url);\n            objectDTOS.add(objectDTO);\n        }\n        return objectDTOS;\n    }\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"对象存储搭建","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clhje45zu0014qc9h3qpu7s1o","content":"<h2 id=\"在linux下进行安装\"><a class=\"markdownIt-Anchor\" href=\"#在linux下进行安装\"></a> 在Linux下进行安装</h2>\n<h3 id=\"下载-minio-服务器\"><a class=\"markdownIt-Anchor\" href=\"#下载-minio-服务器\"></a> 下载 MinIO 服务器</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://dl.min.io/server/minio/release/linux-amd64/archive/minio-20230210184839.0.0.x86_64.rpm -O minio.rpm</span><br><span class=\"line\">sudo dnf install minio.rpm</span><br></pre></td></tr></table></figure>\n<p>如果报错为：</p>\n<p><img src=\"./img/image-20230221193502299.png\" alt=\"image-20230221193502299\" /></p>\n<p>怎么先安装<strong>dnf</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install dnf</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建systemd服务文件\"><a class=\"markdownIt-Anchor\" href=\"#创建systemd服务文件\"></a> 创建systemd服务文件</h3>\n<p>.deb或软件包.rpm将以下 systemd服务文件安装到 /etc/systemd/system/minio.service. 对于二进制安装，在所有 MinIO 主机上手动创建此文件：</p>\n<p>默认情况下，该<code>minio.service</code>文件作为<code>minio-user</code>用户和组运行。<code>groupadd</code>您可以使用和命令创建用户和组<code>useradd</code> 。以下示例创建用户、组并设置权限以访问旨在供 MinIO 使用的文件夹路径。这些命令通常需要 root ( <code>sudo</code>) 权限。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">groupadd -r minio-user</span><br><span class=\"line\">useradd -M -r -g minio-user minio-user</span><br><span class=\"line\"><span class=\"built_in\">chown</span> minio-user:minio-user /mnt/disk1 /mnt/disk2 /mnt/disk3 /mnt/disk4</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建环境变量文件\"><a class=\"markdownIt-Anchor\" href=\"#创建环境变量文件\"></a> 创建环境变量文件</h3>\n<p>创建一个环境变量文件在/etc/default/minio</p>\n<p>示例提供了一个起始环境文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># MINIO_ROOT_USER and MINIO_ROOT_PASSWORD sets the root account for the MinIO server.</span></span><br><span class=\"line\"><span class=\"comment\"># This user has unrestricted permissions to perform S3 and administrative API operations on any resource in the deployment.</span></span><br><span class=\"line\"><span class=\"comment\"># Omit to use the default values &#x27;minioadmin:minioadmin&#x27;.</span></span><br><span class=\"line\"><span class=\"comment\"># MinIO recommends setting non-default values as a best practice, regardless of environment</span></span><br><span class=\"line\"></span><br><span class=\"line\">MINIO_ROOT_USER=myminioadmin</span><br><span class=\"line\">MINIO_ROOT_PASSWORD=minio-secret-key-change-me</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># MINIO_VOLUMES sets the storage volume or path to use for the MinIO server.</span></span><br><span class=\"line\"></span><br><span class=\"line\">MINIO_VOLUMES=<span class=\"string\">&quot;/mnt/data&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># MINIO_SERVER_URL sets the hostname of the local machine for use with the MinIO Server</span></span><br><span class=\"line\"><span class=\"comment\"># MinIO assumes your network control plane can correctly resolve this hostname to the local machine</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Uncomment the following line and replace the value with the correct hostname for the local machine.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#MINIO_SERVER_URL=&quot;http://minio.example.net&quot;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"启动minio服务\"><a class=\"markdownIt-Anchor\" href=\"#启动minio服务\"></a> 启动MinIO服务</h3>\n<p>本地主机上发出以下命令以启动 MinIO SNSD部署作为服务：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl start minio.service</span><br></pre></td></tr></table></figure>\n<h2 id=\"在docker中安装\"><a class=\"markdownIt-Anchor\" href=\"#在docker中安装\"></a> 在docker中安装</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull minio/minio</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -p 9000:9000 -p 9001:9001 --name minio -d --restart=always -e <span class=\"string\">&quot;MINIO_ACCESS_KEY=admin&quot;</span> -e <span class=\"string\">&quot;MINIO_SECRET_KEY=admin123&quot;</span> -v /home/data:/data -v /home/config:/root/.minio minio/minio server --console-address <span class=\"string\">&quot;:9000&quot;</span> --address <span class=\"string\">&quot;:9001&quot;</span> /data</span><br></pre></td></tr></table></figure>\n<p>启动：ip:9000</p>\n<p><img src=\"./img/image-20230221212701394.png\" alt=\"image-20230221212701394\" /></p>\n<p>创建密钥</p>\n<p><img src=\"./img/image-20230222170505389.png\" alt=\"image-20230222170505389\" /></p>\n<h2 id=\"在springboot中使用\"><a class=\"markdownIt-Anchor\" href=\"#在springboot中使用\"></a> 在SpringBoot中使用</h2>\n<p>配置依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- minio --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.minio<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>minio<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.3.7<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>在application.yml中配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">minio:</span></span><br><span class=\"line\">  <span class=\"comment\"># 访问的url</span></span><br><span class=\"line\">  <span class=\"attr\">endpoint:</span> <span class=\"string\">http://192.168.10.100</span></span><br><span class=\"line\">  <span class=\"comment\"># API的端口</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">9001</span></span><br><span class=\"line\">  <span class=\"comment\"># 密钥</span></span><br><span class=\"line\">  <span class=\"attr\">accessKey:</span> </span><br><span class=\"line\">  <span class=\"attr\">secretKey:</span> </span><br><span class=\"line\">  <span class=\"attr\">secure:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">bucket-name:</span> <span class=\"string\">picture</span> <span class=\"comment\"># 桶名</span></span><br><span class=\"line\">  <span class=\"attr\">image-size:</span> <span class=\"number\">10455760</span>    <span class=\"comment\"># 图片文件最大为10M</span></span><br><span class=\"line\">  <span class=\"attr\">file-size:</span> <span class=\"number\">1073741824</span>   <span class=\"comment\"># 文件最大为1G</span></span><br></pre></td></tr></table></figure>\n<p>需在包config下新建类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> io.minio.MinioClient;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span>: java version 1.8</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Author</span>: WWJ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description</span>:</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span>: 2023-02-21 22:20</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@ConfigurationProperties(prefix = &quot;minio&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyMinioProperties</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String endpoint;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer port;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String accessKey;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String secretKey;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> secure;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String bucketName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">long</span> imageSize;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">long</span> fileSize;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> MinioClient <span class=\"title function_\">minioClient</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">MinioClient</span> <span class=\"variable\">minioClient</span> <span class=\"operator\">=</span> MinioClient.builder()</span><br><span class=\"line\">                .credentials(accessKey, secretKey)</span><br><span class=\"line\">                .endpoint(endpoint, port, secure)</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> minioClient;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>使用文件处理的工具类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.rongmei.mushroomProject.utils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.rongmei.mushroomProject.config.MyMinioProperties;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.errors.ErrorResponseException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.errors.InsufficientDataException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.errors.InvalidResponseException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.errors.XmlParserException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.http.Method;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.messages.Bucket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.messages.Item;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.io.FilenameUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.util.FastByteArrayOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.annotation.Resource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.NoSuchAlgorithmException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.UUID;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span>: java version 1.8</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Author</span>: WWJ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description</span>:</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span>: 2023-02-21 22:33</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MinioUtil</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Resource</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyMinioProperties prop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Resource</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MinioClient minioClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 查看存储bucket是否存在</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Boolean <span class=\"title function_\">bucketExists</span><span class=\"params\">(String bucketName)</span> &#123;</span><br><span class=\"line\">        Boolean found;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            found = minioClient.bucketExists(BucketExistsArgs.builder().bucket(bucketName).build());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> found;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建存储bucket</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Boolean <span class=\"title function_\">makeBucket</span><span class=\"params\">(String bucketName)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            minioClient.makeBucket(MakeBucketArgs.builder()</span><br><span class=\"line\">                    .bucket(bucketName)</span><br><span class=\"line\">                    .build());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除存储bucket</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Boolean <span class=\"title function_\">removeBucket</span><span class=\"params\">(String bucketName)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            minioClient.removeBucket(RemoveBucketArgs.builder()</span><br><span class=\"line\">                    .bucket(bucketName)</span><br><span class=\"line\">                    .build());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取全部bucket</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Bucket&gt; <span class=\"title function_\">getAllBuckets</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            List&lt;Bucket&gt; buckets = minioClient.listBuckets();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> buckets;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 文件上传</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> file 文件</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">upload</span><span class=\"params\">(MultipartFile file)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (file.isEmpty()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">RuntimeException</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">originalFilename</span> <span class=\"operator\">=</span> file.getOriginalFilename();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">uuid</span> <span class=\"operator\">=</span> UUID.randomUUID().toString().replace(<span class=\"string\">&quot;-&quot;</span>, <span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">ext</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;.&quot;</span> + FilenameUtils.getExtension(originalFilename);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> uuid + ext;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">PutObjectArgs</span> <span class=\"variable\">objectArgs</span> <span class=\"operator\">=</span> PutObjectArgs.builder().bucket(prop.getBucketName()).object(fileName)</span><br><span class=\"line\">                    .stream(file.getInputStream(), file.getSize(), -<span class=\"number\">1</span>).contentType(file.getContentType()).build();</span><br><span class=\"line\">            <span class=\"comment\">//文件名称相同会覆盖</span></span><br><span class=\"line\">            minioClient.putObject(objectArgs);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fileName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 预览图片</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">preview</span><span class=\"params\">(String fileName)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 查看文件地址</span></span><br><span class=\"line\">        <span class=\"type\">GetPresignedObjectUrlArgs</span> <span class=\"variable\">build</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">GetPresignedObjectUrlArgs</span>().builder().bucket(prop.getBucketName()).object(fileName).method(Method.GET).build();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> minioClient.getPresignedObjectUrl(build);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> url;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 文件下载</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName 文件名称</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> res      response</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">download</span><span class=\"params\">(String fileName, HttpServletResponse res)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">GetObjectArgs</span> <span class=\"variable\">objectArgs</span> <span class=\"operator\">=</span> GetObjectArgs.builder().bucket(prop.getBucketName())</span><br><span class=\"line\">                .object(fileName).build();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> (<span class=\"type\">GetObjectResponse</span> <span class=\"variable\">response</span> <span class=\"operator\">=</span> minioClient.getObject(objectArgs)) &#123;</span><br><span class=\"line\">            <span class=\"type\">byte</span>[] buf = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">            <span class=\"type\">int</span> len;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> (<span class=\"type\">FastByteArrayOutputStream</span> <span class=\"variable\">os</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FastByteArrayOutputStream</span>()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">while</span> ((len = response.read(buf)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                    os.write(buf, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                os.flush();</span><br><span class=\"line\">                <span class=\"type\">byte</span>[] bytes = os.toByteArray();</span><br><span class=\"line\">                res.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">                <span class=\"comment\">// 设置强制下载不打开</span></span><br><span class=\"line\">                <span class=\"comment\">// res.setContentType(&quot;application/force-download&quot;);</span></span><br><span class=\"line\">                res.addHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment;fileName=&quot;</span> + fileName);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> (<span class=\"type\">ServletOutputStream</span> <span class=\"variable\">stream</span> <span class=\"operator\">=</span> res.getOutputStream()) &#123;</span><br><span class=\"line\">                    stream.write(bytes);</span><br><span class=\"line\">                    stream.flush();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 查看文件对象</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 存储bucket内文件对象信息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Item&gt; <span class=\"title function_\">listObjects</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        Iterable&lt;Result&lt;Item&gt;&gt; results = minioClient.listObjects(</span><br><span class=\"line\">                ListObjectsArgs.builder().bucket(prop.getBucketName()).build());</span><br><span class=\"line\">        List&lt;Item&gt; items = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Result&lt;Item&gt; result : results) &#123;</span><br><span class=\"line\">                items.add(result.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> items;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取路径下文件列表</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> prefix     文件名称</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> recursive  是否递归查找，如果是false,就模拟文件夹结构查找</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 二进制流</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Iterable&lt;Result&lt;Item&gt;&gt; <span class=\"title function_\">listObjects</span><span class=\"params\">(String prefix, <span class=\"type\">boolean</span> recursive)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> minioClient.listObjects(ListObjectsArgs.builder().bucket(prop.getBucketName()).prefix(prefix).recursive(recursive).build());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">remove</span><span class=\"params\">(String fileName)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            minioClient.removeObject(RemoveObjectArgs.builder().bucket(prop.getBucketName()).object(fileName).build());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在controller层即可调用工具类</p>\n<p>上传对象</p>\n<p><img src=\"./img/image-20230222170646249.png\" alt=\"image-20230222170646249\" /></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取桶内所有图片URL</span></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/find&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;ObjectDTO&gt; <span class=\"title function_\">findAll</span><span class=\"params\">(<span class=\"meta\">@RequestParam(defaultValue = &quot;&quot;)</span> String filename)</span> <span class=\"keyword\">throws</span> IOException, InvalidKeyException, InvalidResponseException, InsufficientDataException, NoSuchAlgorithmException, ServerException, InternalException, XmlParserException, ErrorResponseException &#123;</span><br><span class=\"line\">        ArrayList&lt;ObjectDTO&gt; objectDTOS = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        Iterable&lt;Result&lt;Item&gt;&gt; results = minioUtil.listObjects(filename, <span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Result&lt;Item&gt; result: results) &#123;</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> result.get().objectName();</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">address</span> <span class=\"operator\">=</span> minioUtil.preview(fileName);</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> StringUtils.substringBefore(address, <span class=\"string\">&quot;?&quot;</span>);</span><br><span class=\"line\">            <span class=\"type\">ObjectDTO</span> <span class=\"variable\">objectDTO</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectDTO</span>(fileName, url);</span><br><span class=\"line\">            objectDTOS.add(objectDTO);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> objectDTOS;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/03/30/11/58/norway-7887613_960_720.jpg","cover_type":"img","excerpt":"","more":"<h2 id=\"在linux下进行安装\"><a class=\"markdownIt-Anchor\" href=\"#在linux下进行安装\"></a> 在Linux下进行安装</h2>\n<h3 id=\"下载-minio-服务器\"><a class=\"markdownIt-Anchor\" href=\"#下载-minio-服务器\"></a> 下载 MinIO 服务器</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://dl.min.io/server/minio/release/linux-amd64/archive/minio-20230210184839.0.0.x86_64.rpm -O minio.rpm</span><br><span class=\"line\">sudo dnf install minio.rpm</span><br></pre></td></tr></table></figure>\n<p>如果报错为：</p>\n<p><img src=\"./img/image-20230221193502299.png\" alt=\"image-20230221193502299\" /></p>\n<p>怎么先安装<strong>dnf</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install dnf</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建systemd服务文件\"><a class=\"markdownIt-Anchor\" href=\"#创建systemd服务文件\"></a> 创建systemd服务文件</h3>\n<p>.deb或软件包.rpm将以下 systemd服务文件安装到 /etc/systemd/system/minio.service. 对于二进制安装，在所有 MinIO 主机上手动创建此文件：</p>\n<p>默认情况下，该<code>minio.service</code>文件作为<code>minio-user</code>用户和组运行。<code>groupadd</code>您可以使用和命令创建用户和组<code>useradd</code> 。以下示例创建用户、组并设置权限以访问旨在供 MinIO 使用的文件夹路径。这些命令通常需要 root ( <code>sudo</code>) 权限。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">groupadd -r minio-user</span><br><span class=\"line\">useradd -M -r -g minio-user minio-user</span><br><span class=\"line\"><span class=\"built_in\">chown</span> minio-user:minio-user /mnt/disk1 /mnt/disk2 /mnt/disk3 /mnt/disk4</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建环境变量文件\"><a class=\"markdownIt-Anchor\" href=\"#创建环境变量文件\"></a> 创建环境变量文件</h3>\n<p>创建一个环境变量文件在/etc/default/minio</p>\n<p>示例提供了一个起始环境文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># MINIO_ROOT_USER and MINIO_ROOT_PASSWORD sets the root account for the MinIO server.</span></span><br><span class=\"line\"><span class=\"comment\"># This user has unrestricted permissions to perform S3 and administrative API operations on any resource in the deployment.</span></span><br><span class=\"line\"><span class=\"comment\"># Omit to use the default values &#x27;minioadmin:minioadmin&#x27;.</span></span><br><span class=\"line\"><span class=\"comment\"># MinIO recommends setting non-default values as a best practice, regardless of environment</span></span><br><span class=\"line\"></span><br><span class=\"line\">MINIO_ROOT_USER=myminioadmin</span><br><span class=\"line\">MINIO_ROOT_PASSWORD=minio-secret-key-change-me</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># MINIO_VOLUMES sets the storage volume or path to use for the MinIO server.</span></span><br><span class=\"line\"></span><br><span class=\"line\">MINIO_VOLUMES=<span class=\"string\">&quot;/mnt/data&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># MINIO_SERVER_URL sets the hostname of the local machine for use with the MinIO Server</span></span><br><span class=\"line\"><span class=\"comment\"># MinIO assumes your network control plane can correctly resolve this hostname to the local machine</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Uncomment the following line and replace the value with the correct hostname for the local machine.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#MINIO_SERVER_URL=&quot;http://minio.example.net&quot;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"启动minio服务\"><a class=\"markdownIt-Anchor\" href=\"#启动minio服务\"></a> 启动MinIO服务</h3>\n<p>本地主机上发出以下命令以启动 MinIO SNSD部署作为服务：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl start minio.service</span><br></pre></td></tr></table></figure>\n<h2 id=\"在docker中安装\"><a class=\"markdownIt-Anchor\" href=\"#在docker中安装\"></a> 在docker中安装</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull minio/minio</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -p 9000:9000 -p 9001:9001 --name minio -d --restart=always -e <span class=\"string\">&quot;MINIO_ACCESS_KEY=admin&quot;</span> -e <span class=\"string\">&quot;MINIO_SECRET_KEY=admin123&quot;</span> -v /home/data:/data -v /home/config:/root/.minio minio/minio server --console-address <span class=\"string\">&quot;:9000&quot;</span> --address <span class=\"string\">&quot;:9001&quot;</span> /data</span><br></pre></td></tr></table></figure>\n<p>启动：ip:9000</p>\n<p><img src=\"./img/image-20230221212701394.png\" alt=\"image-20230221212701394\" /></p>\n<p>创建密钥</p>\n<p><img src=\"./img/image-20230222170505389.png\" alt=\"image-20230222170505389\" /></p>\n<h2 id=\"在springboot中使用\"><a class=\"markdownIt-Anchor\" href=\"#在springboot中使用\"></a> 在SpringBoot中使用</h2>\n<p>配置依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- minio --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.minio<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>minio<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.3.7<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>在application.yml中配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">minio:</span></span><br><span class=\"line\">  <span class=\"comment\"># 访问的url</span></span><br><span class=\"line\">  <span class=\"attr\">endpoint:</span> <span class=\"string\">http://192.168.10.100</span></span><br><span class=\"line\">  <span class=\"comment\"># API的端口</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">9001</span></span><br><span class=\"line\">  <span class=\"comment\"># 密钥</span></span><br><span class=\"line\">  <span class=\"attr\">accessKey:</span> </span><br><span class=\"line\">  <span class=\"attr\">secretKey:</span> </span><br><span class=\"line\">  <span class=\"attr\">secure:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">bucket-name:</span> <span class=\"string\">picture</span> <span class=\"comment\"># 桶名</span></span><br><span class=\"line\">  <span class=\"attr\">image-size:</span> <span class=\"number\">10455760</span>    <span class=\"comment\"># 图片文件最大为10M</span></span><br><span class=\"line\">  <span class=\"attr\">file-size:</span> <span class=\"number\">1073741824</span>   <span class=\"comment\"># 文件最大为1G</span></span><br></pre></td></tr></table></figure>\n<p>需在包config下新建类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> io.minio.MinioClient;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span>: java version 1.8</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Author</span>: WWJ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description</span>:</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span>: 2023-02-21 22:20</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@ConfigurationProperties(prefix = &quot;minio&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyMinioProperties</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String endpoint;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer port;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String accessKey;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String secretKey;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> secure;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String bucketName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">long</span> imageSize;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">long</span> fileSize;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> MinioClient <span class=\"title function_\">minioClient</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">MinioClient</span> <span class=\"variable\">minioClient</span> <span class=\"operator\">=</span> MinioClient.builder()</span><br><span class=\"line\">                .credentials(accessKey, secretKey)</span><br><span class=\"line\">                .endpoint(endpoint, port, secure)</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> minioClient;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>使用文件处理的工具类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.rongmei.mushroomProject.utils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.rongmei.mushroomProject.config.MyMinioProperties;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.errors.ErrorResponseException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.errors.InsufficientDataException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.errors.InvalidResponseException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.errors.XmlParserException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.http.Method;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.messages.Bucket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.minio.messages.Item;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.io.FilenameUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.util.FastByteArrayOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.annotation.Resource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.NoSuchAlgorithmException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.UUID;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span>: java version 1.8</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Author</span>: WWJ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description</span>:</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span>: 2023-02-21 22:33</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MinioUtil</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Resource</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyMinioProperties prop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Resource</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MinioClient minioClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 查看存储bucket是否存在</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Boolean <span class=\"title function_\">bucketExists</span><span class=\"params\">(String bucketName)</span> &#123;</span><br><span class=\"line\">        Boolean found;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            found = minioClient.bucketExists(BucketExistsArgs.builder().bucket(bucketName).build());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> found;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建存储bucket</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Boolean <span class=\"title function_\">makeBucket</span><span class=\"params\">(String bucketName)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            minioClient.makeBucket(MakeBucketArgs.builder()</span><br><span class=\"line\">                    .bucket(bucketName)</span><br><span class=\"line\">                    .build());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除存储bucket</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Boolean <span class=\"title function_\">removeBucket</span><span class=\"params\">(String bucketName)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            minioClient.removeBucket(RemoveBucketArgs.builder()</span><br><span class=\"line\">                    .bucket(bucketName)</span><br><span class=\"line\">                    .build());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取全部bucket</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Bucket&gt; <span class=\"title function_\">getAllBuckets</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            List&lt;Bucket&gt; buckets = minioClient.listBuckets();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> buckets;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 文件上传</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> file 文件</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">upload</span><span class=\"params\">(MultipartFile file)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (file.isEmpty()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">RuntimeException</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">originalFilename</span> <span class=\"operator\">=</span> file.getOriginalFilename();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">uuid</span> <span class=\"operator\">=</span> UUID.randomUUID().toString().replace(<span class=\"string\">&quot;-&quot;</span>, <span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">ext</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;.&quot;</span> + FilenameUtils.getExtension(originalFilename);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> uuid + ext;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">PutObjectArgs</span> <span class=\"variable\">objectArgs</span> <span class=\"operator\">=</span> PutObjectArgs.builder().bucket(prop.getBucketName()).object(fileName)</span><br><span class=\"line\">                    .stream(file.getInputStream(), file.getSize(), -<span class=\"number\">1</span>).contentType(file.getContentType()).build();</span><br><span class=\"line\">            <span class=\"comment\">//文件名称相同会覆盖</span></span><br><span class=\"line\">            minioClient.putObject(objectArgs);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fileName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 预览图片</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">preview</span><span class=\"params\">(String fileName)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 查看文件地址</span></span><br><span class=\"line\">        <span class=\"type\">GetPresignedObjectUrlArgs</span> <span class=\"variable\">build</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">GetPresignedObjectUrlArgs</span>().builder().bucket(prop.getBucketName()).object(fileName).method(Method.GET).build();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> minioClient.getPresignedObjectUrl(build);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> url;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 文件下载</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName 文件名称</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> res      response</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Boolean</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">download</span><span class=\"params\">(String fileName, HttpServletResponse res)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">GetObjectArgs</span> <span class=\"variable\">objectArgs</span> <span class=\"operator\">=</span> GetObjectArgs.builder().bucket(prop.getBucketName())</span><br><span class=\"line\">                .object(fileName).build();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> (<span class=\"type\">GetObjectResponse</span> <span class=\"variable\">response</span> <span class=\"operator\">=</span> minioClient.getObject(objectArgs)) &#123;</span><br><span class=\"line\">            <span class=\"type\">byte</span>[] buf = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">            <span class=\"type\">int</span> len;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> (<span class=\"type\">FastByteArrayOutputStream</span> <span class=\"variable\">os</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FastByteArrayOutputStream</span>()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">while</span> ((len = response.read(buf)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                    os.write(buf, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                os.flush();</span><br><span class=\"line\">                <span class=\"type\">byte</span>[] bytes = os.toByteArray();</span><br><span class=\"line\">                res.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">                <span class=\"comment\">// 设置强制下载不打开</span></span><br><span class=\"line\">                <span class=\"comment\">// res.setContentType(&quot;application/force-download&quot;);</span></span><br><span class=\"line\">                res.addHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment;fileName=&quot;</span> + fileName);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> (<span class=\"type\">ServletOutputStream</span> <span class=\"variable\">stream</span> <span class=\"operator\">=</span> res.getOutputStream()) &#123;</span><br><span class=\"line\">                    stream.write(bytes);</span><br><span class=\"line\">                    stream.flush();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 查看文件对象</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 存储bucket内文件对象信息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Item&gt; <span class=\"title function_\">listObjects</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        Iterable&lt;Result&lt;Item&gt;&gt; results = minioClient.listObjects(</span><br><span class=\"line\">                ListObjectsArgs.builder().bucket(prop.getBucketName()).build());</span><br><span class=\"line\">        List&lt;Item&gt; items = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Result&lt;Item&gt; result : results) &#123;</span><br><span class=\"line\">                items.add(result.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> items;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取路径下文件列表</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> prefix     文件名称</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> recursive  是否递归查找，如果是false,就模拟文件夹结构查找</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 二进制流</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Iterable&lt;Result&lt;Item&gt;&gt; <span class=\"title function_\">listObjects</span><span class=\"params\">(String prefix, <span class=\"type\">boolean</span> recursive)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> minioClient.listObjects(ListObjectsArgs.builder().bucket(prop.getBucketName()).prefix(prefix).recursive(recursive).build());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">remove</span><span class=\"params\">(String fileName)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            minioClient.removeObject(RemoveObjectArgs.builder().bucket(prop.getBucketName()).object(fileName).build());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在controller层即可调用工具类</p>\n<p>上传对象</p>\n<p><img src=\"./img/image-20230222170646249.png\" alt=\"image-20230222170646249\" /></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取桶内所有图片URL</span></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/find&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;ObjectDTO&gt; <span class=\"title function_\">findAll</span><span class=\"params\">(<span class=\"meta\">@RequestParam(defaultValue = &quot;&quot;)</span> String filename)</span> <span class=\"keyword\">throws</span> IOException, InvalidKeyException, InvalidResponseException, InsufficientDataException, NoSuchAlgorithmException, ServerException, InternalException, XmlParserException, ErrorResponseException &#123;</span><br><span class=\"line\">        ArrayList&lt;ObjectDTO&gt; objectDTOS = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        Iterable&lt;Result&lt;Item&gt;&gt; results = minioUtil.listObjects(filename, <span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Result&lt;Item&gt; result: results) &#123;</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> result.get().objectName();</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">address</span> <span class=\"operator\">=</span> minioUtil.preview(fileName);</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> StringUtils.substringBefore(address, <span class=\"string\">&quot;?&quot;</span>);</span><br><span class=\"line\">            <span class=\"type\">ObjectDTO</span> <span class=\"variable\">objectDTO</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectDTO</span>(fileName, url);</span><br><span class=\"line\">            objectDTOS.add(objectDTO);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> objectDTOS;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"深度学习","description":"深度学习记录","date":"2023-05-08T14:03:00.000Z","updated":"2023-05-08T14:03:00.000Z","swiper_index":1,"_content":"\n# 深度学习\n\n## 流程\n\n+ **数据处理**\n  1. 读入数据\n  2. 划分数据集\n  3. 生成批次数据\n  4. 训练样本集乱序\n  5. 校验数据有效性\n\n+ **模型设计**\n  1. 网络结构\n  2. 损失函数\n+ **训练配置**\n  1. 优化算法\n     + 随机梯度下降（SGD）：随机梯度下降算法，每次训练少量数据，抽样偏差导致参数收敛过程中震荡。\n     + 动量（Momentum）：引入物理“动量”的概念，累积速度，减少震荡，使参数更新的方向更稳定。\n     + AdaGrad： 根据不同参数距离最优解的远近，动态调整学习率。学习率逐渐下降，依据各参数变化大小调整学习率。\n     + Adam： 由于动量和自适应学习率两个优化思路是正交的，因此可以将两个思路结合起来，这就是当前广泛应用的算法。\n  2. 设置学习率\n\n\n## pycharm\n\n### conda环境\n\n> 新建环境\n\n~~~bash\nconda create -n yourEnv python=3.10\n~~~\n\n+ –name：也可以缩写为 【-n】，【yourEnv】是新创建的虚拟环境的名字，创建完，可以装anaconda的目录下找到envs/yourEnv 目录\n+ python=2.7：是python的版本号。也可以指定为【python=3.6】，若未指定，默认为是装anaconda时python的版本.\n\n> 激活环境\n\n~~~bash\nactivate yourEnv\n~~~\n\n- windows用户环境变量中添加（改成自己的路径）：\n\n  > D:\\Anaconda3\n  > D:\\Anaconda3\\Scripts\n  > D:\\Anaconda3\\Library\\bin\n\n> 查看活跃的环境\n\n~~~bash\nconda info --envs\n~~~\n\n输出中带有【*】号的的就是当前所处的环境\n\n\n\n\n\n当==创建环境==时，出现**`NoWritablePkgsDirError: No writeable pkgs directories configured.`**报错\n\n~~~bash\nconda config --add pkgs_dirs D:\\Environment\\Anaconda3\\pkgs \nconda config --add envs_dirs D:\\Environment\\Anaconda3\\envs\n~~~\n\n\n\n\n\n### conda其他命令\n\n~~~bash\nconda list: 看这个环境下安装的包和版本\nconda install numpy scikit-learn: 安装numpy sklearn包\nconda env remove -n yourEnv: 删除你的环境\nconda env list: 查看所有的环境\n~~~\n\n\n\n### 常见报错\n\nimg.imshow（xxx）不显示图片\n\n在pycharm中设置图片不在pycharm中显示（关闭 Show plots in tool window）\n\n![image-20230509030632717](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030632717.png)\n\n~~~python\nimport pylab\n\npylab.show()\n~~~\n\n\n\n当控制台报\n\n~~~bash\nOMP: Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.\nOMP: Hint This means that multiple copies of the OpenMP runtime have been linked into the program. That is dangerous, since it can degrade performance or cause incorrect results. The best thing to do is to ensure that only a single OpenMP runtime is linked into the process, e.g. by avoiding static linking of the OpenMP runtime in any library. As an unsafe, unsupported, undocumented workaround you can set the environment variable KMP_DUPLICATE_LIB_OK=TRUE to allow the program to continue to execute, but that may cause crashes or silently produce incorrect results. For more information, please see http://www.intel.com/software/products/support/.\n~~~\n\n使用\n\n~~~\nimport os\nos.environ['KMP_DUPLICATE_LIB_OK'] = 'True'\n~~~\n\n\n\n\n\n\n\n## 线性回归与逻辑回归\n\n+ 线性回归是一种用于预测和拟合函数的方法。它用于回归任务，例如用来拟合一条直线。\n\n> 应用：线性回归常用于连续变量的预测，例如房价预测、股票价格预测等。它可以用来拟合一条直线，描述自变量和因变量之间的关系。\n\n+ 逻辑回归是一种用于分类和预测函数的方法。它用于分类任务，可以进行二分类或多分类。它是在给定自变量和超参数后，得到因变量的期望，基于这个期望来处理预测分类问题。\n\n> 应用：逻辑回归常用于分类问题，例如垃圾邮件分类、疾病诊断等。它可以用来预测一个事件发生的概率，并根据这个概率进行分类。\n\n\n\n## 支持向量机SVM\n\n**线性可分支持向量机**\n\n$w=(w_1,w_2\\cdots w_n)$\n\n$x=(x_1,x_2\\cdots x_n)$\n\nb = -10\n\n$w ×x+b=0$\n\n**线性支持向量机**\n\n**非线性支持向量机**\n\n\n\n\n\n## Softmax 回归\n\n> 区别\n\n![image-20230509030620079](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030620079.png)\n\n### 均方损失\n\n![image-20230509030615471](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030615471.png)\n\n\n\n### Softmax和交叉熵损失\n\n+ 交叉熵常用来衡量两个概率的区别\n\n![image-20230509030607826](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030607826.png)\n\n总结：\n\n+ Softmax回归是一个多分类模型\n+ 使用Softmax操作子得到每个类的预测置信度\n+ 使用交叉熵来衡量预测和标号的区别作为损失函数\n\n\n\n### 从零开始实现\n\n$softmax(X)_{ij}=\\frac{exp(X_{ij})}{∑_kexp(X_{ik})}$\n\n\n\n~~~python\ndef softmax(X):\n    X_exp = torch.exp(X)\n    partition = X_exp.sum(1, keepdim=True)\n    return X_exp / partition # 应用广播机制\n~~~\n\n\n\n> 实现结果\n\n![image-20230509030549122](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030549122.png)\n\n\n\n\n\n## 损失函数\n\nL2 Loss（均方损失）\n\n>  $l(y,y')=\\frac{1}{2}(y-y')^2$\n\n\n\nL1 Loss\n\n> $l(y,y')=|y-y'|$\n\n\n\n## 图像分类数据集\n\n\n\n~~~python\nimport torch\nfrom torch.utils import data\nfrom d2l import torch as d2l\n\n\ndef get_dataloader_workers():\n    \"\"\"使用4个进程来读取数据。\"\"\"\n    return 4\n\ntrain_iter = data.DataLoader(mnist_train, batch_size, shuffle=True, num_workers=get_dataloader_workers())\n\ntimer = d2l.Timer()\nfor X, y in train_iter:\n    continue\n# 打印读取数据时间\nprint(f'{timer.stop():.2f} sec')\n~~~\n\n\n\n## 感知机\n\n**二分类问题**\n\n+ 给定输入x，权重w，和偏移b，感知机输出：\n\n  $\\omicron=\\sigma(<w,x>+b)$ \t$\\sigma(x)=\\begin{cases} 1，if \\quad x>0 \\\\ -1， otherwise  \\end{cases}$\n\n+ 二分类：-1或1\n\n  + Vs.回归输出实数\n  + Vs.Softmax回归输出概率\n\n![image-20230509030539479](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030539479.png)\n\n**收敛定理**\n\n+ 数据在半径**r**内\n+ 余量$\\rho$分类两类\n  + y($x^T$w+b) $\\geqslant$ $\\rho$\n\n\n​\t对于$||W||^2+b^2\\leqslant1$\n\n+ 感知机保证在$\\frac {r^2+1}{\\rho^2}$步后收敛\n\n\n\n**XOR问题**\n\n感知机不能拟合XOR函数，它只能产生线性分割面\n\n\n\n### 多层感知机\n\n![image-20230509030532939](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030532939.png)\n\n+ X，Y先进入蓝色进行判断：（1，3）为+，（2，4）为－\n\n+ X，Y再进入黄色进行判断：（1，2）为+，（3，4）为-\n\n+ product对前面的结果做乘积，相同为+ ，相异为-\n\n\n\n**总结**\n\n+ 多层感知器使用隐藏层和激活函数来得到非线性模型\n+ 常用激活函数是sigmoid，Tanh，ReLU\n+ 使用softmax来处理多类分类\n+ 超参数为隐藏层数，和各个隐藏层大小\n\n> 代码\n\n~~~python\nimport torch\nfrom torch import nn\nfrom d2l import torch as d2l\nimport pylab\nimport os\n\nos.environ['KMP_DUPLICATE_LIB_OK'] = 'True'\n# 批量大小\nbatch_size = 64\ntrain_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)\n# 超参数\nnum_inputs, num_outputs, num_hiddens = 784, 10, 256\nW1 = nn.Parameter(torch.randn(num_inputs, num_hiddens, requires_grad=True) * 0.01)\nb1 = nn.Parameter(torch.zeros(num_hiddens, requires_grad=True))\nW2 = nn.Parameter(torch.randn(num_hiddens, num_outputs, requires_grad=True) * 0.01)\nb2 = nn.Parameter(torch.zeros(num_outputs, requires_grad=True))\nparams = [W1, b1, W2, b2]\n\ndef relu(X):\n    a = torch.zeros_like(X)\n    return torch.max(X, a)\n\ndef net(X):\n    X = X.reshape((-1, num_inputs))\n    H = relu(X @ W1 + b1)\n    return (H @ W2 + b2)\n\nloss = nn.CrossEntropyLoss()\nnum_epochs, lr = 10, 0.1\nupdater = torch.optim.SGD(params, lr=lr)\nd2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, updater)\nd2l.predict_ch3(net, test_iter)\npylab.show()\n~~~\n\n\n\n> 结果\n\n![image-20230509030519094](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030519094.png)\n\n\n\n## 模型选择\n\n+ 训练误差：模型在训练数据上的误差\n\n+ 泛化误差：模型在新数据上的误差\n\n+ 验证数据集：评估模型好坏的数据集（不要和测试数据集混在一起）\n+ 测试数据集：只使用一次（例如竞赛排行榜的数据集，只使用一次）\n\n### **K-折交叉验证**\n\n将含有**N** 个样本的数据集，分成**K** 份，每份含有 **$\\frac{N}{K}$**个样本。选择其中一份作为验证集，另外**K − 1**份作为训练集，验证集集就有**K**种情况。\n\n+ 在没有足够多数据时使用\n+ 使用**i**块作为验证数据集，其余作为训练集\n\n> 最后K个验证集误差求平均\n\n+ 常用：K = 5 或 10（程序跑5次或10次）\n\n#### 总结\n\n+ 训练数据集：训练模型参数\n+ 验证数据集：选择模型超参数\n+ 非大数据集上通常使用K-折交叉验证\n\n\n\n### 过拟合和欠拟合\n\n![image-20230509030508724](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030508724.png)\n\n| $\\frac{数据}{模型容量}$ |    简单    |    复杂    |\n| :---------------------: | :--------: | :--------: |\n|           低            |    正常    | **欠拟合** |\n|           高            | **过拟合** |    正常    |\n\n**模型容量的影响**\n\n![image-20230509030457301](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030457301.png)\n\n**数据复杂度**\n\n+ 样本个数\n+ 每个样本的元素个数\n+ 时间、空间结构\n+ 多样性\n\n\n\n**总结**\n\n+ 模型容量需要匹配数据复杂度，否则可能导致欠拟合和过拟合\n+ 统计机器学习提供数学工具来衡量模型复杂度\n+ 实际中一般靠观察训练误差和验证误差\n\n> 结果\n\n正常\n\n![image-20230509030346933](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030346933.png)\n\n欠拟合\n\n![image-20230509030430564](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030430564.png)\n\n过拟合\n\n![image-20230509030441465](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030441465.png)\n\n## 卷积神经网络\n\n### 语言识别\n\n~~~bash\npip install SpeechRecognition\n~~~","source":"_posts/深度学习.md","raw":"---\ntitle: 深度学习\ndescription: 深度学习记录\ndate: 2023-05-8 22:03:00\nupdated: 2023-05-8 22:03:00\ntags:\n  - Torch\ncategories:\n  - 深度学习\nswiper_index: 1\n---\n\n# 深度学习\n\n## 流程\n\n+ **数据处理**\n  1. 读入数据\n  2. 划分数据集\n  3. 生成批次数据\n  4. 训练样本集乱序\n  5. 校验数据有效性\n\n+ **模型设计**\n  1. 网络结构\n  2. 损失函数\n+ **训练配置**\n  1. 优化算法\n     + 随机梯度下降（SGD）：随机梯度下降算法，每次训练少量数据，抽样偏差导致参数收敛过程中震荡。\n     + 动量（Momentum）：引入物理“动量”的概念，累积速度，减少震荡，使参数更新的方向更稳定。\n     + AdaGrad： 根据不同参数距离最优解的远近，动态调整学习率。学习率逐渐下降，依据各参数变化大小调整学习率。\n     + Adam： 由于动量和自适应学习率两个优化思路是正交的，因此可以将两个思路结合起来，这就是当前广泛应用的算法。\n  2. 设置学习率\n\n\n## pycharm\n\n### conda环境\n\n> 新建环境\n\n~~~bash\nconda create -n yourEnv python=3.10\n~~~\n\n+ –name：也可以缩写为 【-n】，【yourEnv】是新创建的虚拟环境的名字，创建完，可以装anaconda的目录下找到envs/yourEnv 目录\n+ python=2.7：是python的版本号。也可以指定为【python=3.6】，若未指定，默认为是装anaconda时python的版本.\n\n> 激活环境\n\n~~~bash\nactivate yourEnv\n~~~\n\n- windows用户环境变量中添加（改成自己的路径）：\n\n  > D:\\Anaconda3\n  > D:\\Anaconda3\\Scripts\n  > D:\\Anaconda3\\Library\\bin\n\n> 查看活跃的环境\n\n~~~bash\nconda info --envs\n~~~\n\n输出中带有【*】号的的就是当前所处的环境\n\n\n\n\n\n当==创建环境==时，出现**`NoWritablePkgsDirError: No writeable pkgs directories configured.`**报错\n\n~~~bash\nconda config --add pkgs_dirs D:\\Environment\\Anaconda3\\pkgs \nconda config --add envs_dirs D:\\Environment\\Anaconda3\\envs\n~~~\n\n\n\n\n\n### conda其他命令\n\n~~~bash\nconda list: 看这个环境下安装的包和版本\nconda install numpy scikit-learn: 安装numpy sklearn包\nconda env remove -n yourEnv: 删除你的环境\nconda env list: 查看所有的环境\n~~~\n\n\n\n### 常见报错\n\nimg.imshow（xxx）不显示图片\n\n在pycharm中设置图片不在pycharm中显示（关闭 Show plots in tool window）\n\n![image-20230509030632717](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030632717.png)\n\n~~~python\nimport pylab\n\npylab.show()\n~~~\n\n\n\n当控制台报\n\n~~~bash\nOMP: Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.\nOMP: Hint This means that multiple copies of the OpenMP runtime have been linked into the program. That is dangerous, since it can degrade performance or cause incorrect results. The best thing to do is to ensure that only a single OpenMP runtime is linked into the process, e.g. by avoiding static linking of the OpenMP runtime in any library. As an unsafe, unsupported, undocumented workaround you can set the environment variable KMP_DUPLICATE_LIB_OK=TRUE to allow the program to continue to execute, but that may cause crashes or silently produce incorrect results. For more information, please see http://www.intel.com/software/products/support/.\n~~~\n\n使用\n\n~~~\nimport os\nos.environ['KMP_DUPLICATE_LIB_OK'] = 'True'\n~~~\n\n\n\n\n\n\n\n## 线性回归与逻辑回归\n\n+ 线性回归是一种用于预测和拟合函数的方法。它用于回归任务，例如用来拟合一条直线。\n\n> 应用：线性回归常用于连续变量的预测，例如房价预测、股票价格预测等。它可以用来拟合一条直线，描述自变量和因变量之间的关系。\n\n+ 逻辑回归是一种用于分类和预测函数的方法。它用于分类任务，可以进行二分类或多分类。它是在给定自变量和超参数后，得到因变量的期望，基于这个期望来处理预测分类问题。\n\n> 应用：逻辑回归常用于分类问题，例如垃圾邮件分类、疾病诊断等。它可以用来预测一个事件发生的概率，并根据这个概率进行分类。\n\n\n\n## 支持向量机SVM\n\n**线性可分支持向量机**\n\n$w=(w_1,w_2\\cdots w_n)$\n\n$x=(x_1,x_2\\cdots x_n)$\n\nb = -10\n\n$w ×x+b=0$\n\n**线性支持向量机**\n\n**非线性支持向量机**\n\n\n\n\n\n## Softmax 回归\n\n> 区别\n\n![image-20230509030620079](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030620079.png)\n\n### 均方损失\n\n![image-20230509030615471](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030615471.png)\n\n\n\n### Softmax和交叉熵损失\n\n+ 交叉熵常用来衡量两个概率的区别\n\n![image-20230509030607826](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030607826.png)\n\n总结：\n\n+ Softmax回归是一个多分类模型\n+ 使用Softmax操作子得到每个类的预测置信度\n+ 使用交叉熵来衡量预测和标号的区别作为损失函数\n\n\n\n### 从零开始实现\n\n$softmax(X)_{ij}=\\frac{exp(X_{ij})}{∑_kexp(X_{ik})}$\n\n\n\n~~~python\ndef softmax(X):\n    X_exp = torch.exp(X)\n    partition = X_exp.sum(1, keepdim=True)\n    return X_exp / partition # 应用广播机制\n~~~\n\n\n\n> 实现结果\n\n![image-20230509030549122](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030549122.png)\n\n\n\n\n\n## 损失函数\n\nL2 Loss（均方损失）\n\n>  $l(y,y')=\\frac{1}{2}(y-y')^2$\n\n\n\nL1 Loss\n\n> $l(y,y')=|y-y'|$\n\n\n\n## 图像分类数据集\n\n\n\n~~~python\nimport torch\nfrom torch.utils import data\nfrom d2l import torch as d2l\n\n\ndef get_dataloader_workers():\n    \"\"\"使用4个进程来读取数据。\"\"\"\n    return 4\n\ntrain_iter = data.DataLoader(mnist_train, batch_size, shuffle=True, num_workers=get_dataloader_workers())\n\ntimer = d2l.Timer()\nfor X, y in train_iter:\n    continue\n# 打印读取数据时间\nprint(f'{timer.stop():.2f} sec')\n~~~\n\n\n\n## 感知机\n\n**二分类问题**\n\n+ 给定输入x，权重w，和偏移b，感知机输出：\n\n  $\\omicron=\\sigma(<w,x>+b)$ \t$\\sigma(x)=\\begin{cases} 1，if \\quad x>0 \\\\ -1， otherwise  \\end{cases}$\n\n+ 二分类：-1或1\n\n  + Vs.回归输出实数\n  + Vs.Softmax回归输出概率\n\n![image-20230509030539479](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030539479.png)\n\n**收敛定理**\n\n+ 数据在半径**r**内\n+ 余量$\\rho$分类两类\n  + y($x^T$w+b) $\\geqslant$ $\\rho$\n\n\n​\t对于$||W||^2+b^2\\leqslant1$\n\n+ 感知机保证在$\\frac {r^2+1}{\\rho^2}$步后收敛\n\n\n\n**XOR问题**\n\n感知机不能拟合XOR函数，它只能产生线性分割面\n\n\n\n### 多层感知机\n\n![image-20230509030532939](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030532939.png)\n\n+ X，Y先进入蓝色进行判断：（1，3）为+，（2，4）为－\n\n+ X，Y再进入黄色进行判断：（1，2）为+，（3，4）为-\n\n+ product对前面的结果做乘积，相同为+ ，相异为-\n\n\n\n**总结**\n\n+ 多层感知器使用隐藏层和激活函数来得到非线性模型\n+ 常用激活函数是sigmoid，Tanh，ReLU\n+ 使用softmax来处理多类分类\n+ 超参数为隐藏层数，和各个隐藏层大小\n\n> 代码\n\n~~~python\nimport torch\nfrom torch import nn\nfrom d2l import torch as d2l\nimport pylab\nimport os\n\nos.environ['KMP_DUPLICATE_LIB_OK'] = 'True'\n# 批量大小\nbatch_size = 64\ntrain_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)\n# 超参数\nnum_inputs, num_outputs, num_hiddens = 784, 10, 256\nW1 = nn.Parameter(torch.randn(num_inputs, num_hiddens, requires_grad=True) * 0.01)\nb1 = nn.Parameter(torch.zeros(num_hiddens, requires_grad=True))\nW2 = nn.Parameter(torch.randn(num_hiddens, num_outputs, requires_grad=True) * 0.01)\nb2 = nn.Parameter(torch.zeros(num_outputs, requires_grad=True))\nparams = [W1, b1, W2, b2]\n\ndef relu(X):\n    a = torch.zeros_like(X)\n    return torch.max(X, a)\n\ndef net(X):\n    X = X.reshape((-1, num_inputs))\n    H = relu(X @ W1 + b1)\n    return (H @ W2 + b2)\n\nloss = nn.CrossEntropyLoss()\nnum_epochs, lr = 10, 0.1\nupdater = torch.optim.SGD(params, lr=lr)\nd2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, updater)\nd2l.predict_ch3(net, test_iter)\npylab.show()\n~~~\n\n\n\n> 结果\n\n![image-20230509030519094](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030519094.png)\n\n\n\n## 模型选择\n\n+ 训练误差：模型在训练数据上的误差\n\n+ 泛化误差：模型在新数据上的误差\n\n+ 验证数据集：评估模型好坏的数据集（不要和测试数据集混在一起）\n+ 测试数据集：只使用一次（例如竞赛排行榜的数据集，只使用一次）\n\n### **K-折交叉验证**\n\n将含有**N** 个样本的数据集，分成**K** 份，每份含有 **$\\frac{N}{K}$**个样本。选择其中一份作为验证集，另外**K − 1**份作为训练集，验证集集就有**K**种情况。\n\n+ 在没有足够多数据时使用\n+ 使用**i**块作为验证数据集，其余作为训练集\n\n> 最后K个验证集误差求平均\n\n+ 常用：K = 5 或 10（程序跑5次或10次）\n\n#### 总结\n\n+ 训练数据集：训练模型参数\n+ 验证数据集：选择模型超参数\n+ 非大数据集上通常使用K-折交叉验证\n\n\n\n### 过拟合和欠拟合\n\n![image-20230509030508724](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030508724.png)\n\n| $\\frac{数据}{模型容量}$ |    简单    |    复杂    |\n| :---------------------: | :--------: | :--------: |\n|           低            |    正常    | **欠拟合** |\n|           高            | **过拟合** |    正常    |\n\n**模型容量的影响**\n\n![image-20230509030457301](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030457301.png)\n\n**数据复杂度**\n\n+ 样本个数\n+ 每个样本的元素个数\n+ 时间、空间结构\n+ 多样性\n\n\n\n**总结**\n\n+ 模型容量需要匹配数据复杂度，否则可能导致欠拟合和过拟合\n+ 统计机器学习提供数学工具来衡量模型复杂度\n+ 实际中一般靠观察训练误差和验证误差\n\n> 结果\n\n正常\n\n![image-20230509030346933](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030346933.png)\n\n欠拟合\n\n![image-20230509030430564](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030430564.png)\n\n过拟合\n\n![image-20230509030441465](https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030441465.png)\n\n## 卷积神经网络\n\n### 语言识别\n\n~~~bash\npip install SpeechRecognition\n~~~","slug":"深度学习","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clhje45zv0017qc9h9rxohddg","content":"<h1 id=\"深度学习\"><a class=\"markdownIt-Anchor\" href=\"#深度学习\"></a> 深度学习</h1>\n<h2 id=\"流程\"><a class=\"markdownIt-Anchor\" href=\"#流程\"></a> 流程</h2>\n<ul>\n<li>\n<p><strong>数据处理</strong></p>\n<ol>\n<li>读入数据</li>\n<li>划分数据集</li>\n<li>生成批次数据</li>\n<li>训练样本集乱序</li>\n<li>校验数据有效性</li>\n</ol>\n</li>\n<li>\n<p><strong>模型设计</strong></p>\n<ol>\n<li>网络结构</li>\n<li>损失函数</li>\n</ol>\n</li>\n<li>\n<p><strong>训练配置</strong></p>\n<ol>\n<li>优化算法\n<ul>\n<li>随机梯度下降（SGD）：随机梯度下降算法，每次训练少量数据，抽样偏差导致参数收敛过程中震荡。</li>\n<li>动量（Momentum）：引入物理“动量”的概念，累积速度，减少震荡，使参数更新的方向更稳定。</li>\n<li>AdaGrad： 根据不同参数距离最优解的远近，动态调整学习率。学习率逐渐下降，依据各参数变化大小调整学习率。</li>\n<li>Adam： 由于动量和自适应学习率两个优化思路是正交的，因此可以将两个思路结合起来，这就是当前广泛应用的算法。</li>\n</ul>\n</li>\n<li>设置学习率</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"pycharm\"><a class=\"markdownIt-Anchor\" href=\"#pycharm\"></a> pycharm</h2>\n<h3 id=\"conda环境\"><a class=\"markdownIt-Anchor\" href=\"#conda环境\"></a> conda环境</h3>\n<blockquote>\n<p>新建环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n yourEnv python=3.10</span><br></pre></td></tr></table></figure>\n<ul>\n<li>–name：也可以缩写为 【-n】，【yourEnv】是新创建的虚拟环境的名字，创建完，可以装anaconda的目录下找到envs/yourEnv 目录</li>\n<li>python=2.7：是python的版本号。也可以指定为【python=3.6】，若未指定，默认为是装anaconda时python的版本.</li>\n</ul>\n<blockquote>\n<p>激活环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">activate yourEnv</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>windows用户环境变量中添加（改成自己的路径）：</p>\n<blockquote>\n<p>D:\\Anaconda3<br />\nD:\\Anaconda3\\Scripts<br />\nD:\\Anaconda3\\Library\\bin</p>\n</blockquote>\n</li>\n</ul>\n<blockquote>\n<p>查看活跃的环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda info --envs</span><br></pre></td></tr></table></figure>\n<p>输出中带有【*】号的的就是当前所处的环境</p>\n<p>当<mark>创建环境</mark>时，出现**<code>NoWritablePkgsDirError: No writeable pkgs directories configured.</code>**报错</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda config --add pkgs_dirs D:\\Environment\\Anaconda3\\pkgs </span><br><span class=\"line\">conda config --add envs_dirs D:\\Environment\\Anaconda3\\envs</span><br></pre></td></tr></table></figure>\n<h3 id=\"conda其他命令\"><a class=\"markdownIt-Anchor\" href=\"#conda其他命令\"></a> conda其他命令</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda list: 看这个环境下安装的包和版本</span><br><span class=\"line\">conda install numpy scikit-learn: 安装numpy sklearn包</span><br><span class=\"line\">conda <span class=\"built_in\">env</span> remove -n yourEnv: 删除你的环境</span><br><span class=\"line\">conda <span class=\"built_in\">env</span> list: 查看所有的环境</span><br></pre></td></tr></table></figure>\n<h3 id=\"常见报错\"><a class=\"markdownIt-Anchor\" href=\"#常见报错\"></a> 常见报错</h3>\n<p>img.imshow（xxx）不显示图片</p>\n<p>在pycharm中设置图片不在pycharm中显示（关闭 Show plots in tool window）</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030632717.png\" alt=\"image-20230509030632717\" /></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pylab</span><br><span class=\"line\"></span><br><span class=\"line\">pylab.show()</span><br></pre></td></tr></table></figure>\n<p>当控制台报</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OMP: Error <span class=\"comment\">#15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.</span></span><br><span class=\"line\">OMP: Hint This means that multiple copies of the OpenMP runtime have been linked into the program. That is dangerous, since it can degrade performance or cause incorrect results. The best thing to <span class=\"keyword\">do</span> is to ensure that only a single OpenMP runtime is linked into the process, e.g. by avoiding static linking of the OpenMP runtime <span class=\"keyword\">in</span> any library. As an unsafe, unsupported, undocumented workaround you can <span class=\"built_in\">set</span> the environment variable KMP_DUPLICATE_LIB_OK=TRUE to allow the program to <span class=\"built_in\">continue</span> to execute, but that may cause crashes or silently produce incorrect results. For more information, please see http://www.intel.com/software/products/support/.</span><br></pre></td></tr></table></figure>\n<p>使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import os</span><br><span class=\"line\">os.environ[&#x27;KMP_DUPLICATE_LIB_OK&#x27;] = &#x27;True&#x27;</span><br></pre></td></tr></table></figure>\n<h2 id=\"线性回归与逻辑回归\"><a class=\"markdownIt-Anchor\" href=\"#线性回归与逻辑回归\"></a> 线性回归与逻辑回归</h2>\n<ul>\n<li>线性回归是一种用于预测和拟合函数的方法。它用于回归任务，例如用来拟合一条直线。</li>\n</ul>\n<blockquote>\n<p>应用：线性回归常用于连续变量的预测，例如房价预测、股票价格预测等。它可以用来拟合一条直线，描述自变量和因变量之间的关系。</p>\n</blockquote>\n<ul>\n<li>逻辑回归是一种用于分类和预测函数的方法。它用于分类任务，可以进行二分类或多分类。它是在给定自变量和超参数后，得到因变量的期望，基于这个期望来处理预测分类问题。</li>\n</ul>\n<blockquote>\n<p>应用：逻辑回归常用于分类问题，例如垃圾邮件分类、疾病诊断等。它可以用来预测一个事件发生的概率，并根据这个概率进行分类。</p>\n</blockquote>\n<h2 id=\"支持向量机svm\"><a class=\"markdownIt-Anchor\" href=\"#支持向量机svm\"></a> 支持向量机SVM</h2>\n<p><strong>线性可分支持向量机</strong></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>w</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo>⋯</mo><msub><mi>w</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w=(w_1,w_2\\cdots w_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo>⋯</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x=(x_1,x_2\\cdots x_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<p>b = -10</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>w</mi><mo>×</mo><mi>x</mi><mo>+</mo><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">w ×x+b=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></p>\n<p><strong>线性支持向量机</strong></p>\n<p><strong>非线性支持向量机</strong></p>\n<h2 id=\"softmax-回归\"><a class=\"markdownIt-Anchor\" href=\"#softmax-回归\"></a> Softmax 回归</h2>\n<blockquote>\n<p>区别</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030620079.png\" alt=\"image-20230509030620079\" /></p>\n<h3 id=\"均方损失\"><a class=\"markdownIt-Anchor\" href=\"#均方损失\"></a> 均方损失</h3>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030615471.png\" alt=\"image-20230509030615471\" /></p>\n<h3 id=\"softmax和交叉熵损失\"><a class=\"markdownIt-Anchor\" href=\"#softmax和交叉熵损失\"></a> Softmax和交叉熵损失</h3>\n<ul>\n<li>交叉熵常用来衡量两个概率的区别</li>\n</ul>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030607826.png\" alt=\"image-20230509030607826\" /></p>\n<p>总结：</p>\n<ul>\n<li>Softmax回归是一个多分类模型</li>\n<li>使用Softmax操作子得到每个类的预测置信度</li>\n<li>使用交叉熵来衡量预测和标号的区别作为损失函数</li>\n</ul>\n<h3 id=\"从零开始实现\"><a class=\"markdownIt-Anchor\" href=\"#从零开始实现\"></a> 从零开始实现</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>X</mi><msub><mo stretchy=\"false\">)</mo><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><mrow><msub><mo>∑</mo><mi>k</mi></msub><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">softmax(X)_{ij}=\\frac{exp(X_{ij})}{∑_kexp(X_{ik})}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.6023269999999998em;vertical-align:-0.5700069999999999em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.03232em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mop op-symbol small-op mtight\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1745899999999999em;\"><span style=\"top:-2.1785614285714283em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32143857142857146em;\"><span></span></span></span></span></span></span><span class=\"mspace mtight\" style=\"margin-right:0.19516666666666668em;\"></span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mord mathdefault mtight\">p</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:-0.07847em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.50732em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mord mathdefault mtight\">p</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3280857142857143em;\"><span style=\"top:-2.357em;margin-left:-0.07847em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2818857142857143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5700069999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">softmax</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    X_exp = torch.exp(X)</span><br><span class=\"line\">    partition = X_exp.<span class=\"built_in\">sum</span>(<span class=\"number\">1</span>, keepdim=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X_exp / partition <span class=\"comment\"># 应用广播机制</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>实现结果</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030549122.png\" alt=\"image-20230509030549122\" /></p>\n<h2 id=\"损失函数\"><a class=\"markdownIt-Anchor\" href=\"#损失函数\"></a> 损失函数</h2>\n<p>L2 Loss（均方损失）</p>\n<blockquote>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>l</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo separator=\"true\">,</mo><msup><mi>y</mi><mo mathvariant=\"normal\">′</mo></msup><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy=\"false\">(</mo><mi>y</mi><mo>−</mo><msup><mi>y</mi><mo mathvariant=\"normal\">′</mo></msup><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">l(y,y&#x27;)=\\frac{1}{2}(y-y&#x27;)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></p>\n</blockquote>\n<p>L1 Loss</p>\n<blockquote>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>l</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo separator=\"true\">,</mo><msup><mi>y</mi><mo mathvariant=\"normal\">′</mo></msup><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"normal\">∣</mi><mi>y</mi><mo>−</mo><msup><mi>y</mi><mo mathvariant=\"normal\">′</mo></msup><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">l(y,y&#x27;)=|y-y&#x27;|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span></span></span></span></p>\n</blockquote>\n<h2 id=\"图像分类数据集\"><a class=\"markdownIt-Anchor\" href=\"#图像分类数据集\"></a> 图像分类数据集</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">from</span> torch.utils <span class=\"keyword\">import</span> data</span><br><span class=\"line\"><span class=\"keyword\">from</span> d2l <span class=\"keyword\">import</span> torch <span class=\"keyword\">as</span> d2l</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_dataloader_workers</span>():</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;使用4个进程来读取数据。&quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">4</span></span><br><span class=\"line\"></span><br><span class=\"line\">train_iter = data.DataLoader(mnist_train, batch_size, shuffle=<span class=\"literal\">True</span>, num_workers=get_dataloader_workers())</span><br><span class=\"line\"></span><br><span class=\"line\">timer = d2l.Timer()</span><br><span class=\"line\"><span class=\"keyword\">for</span> X, y <span class=\"keyword\">in</span> train_iter:</span><br><span class=\"line\">    <span class=\"keyword\">continue</span></span><br><span class=\"line\"><span class=\"comment\"># 打印读取数据时间</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;timer.stop():<span class=\"number\">.2</span>f&#125;</span> sec&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"感知机\"><a class=\"markdownIt-Anchor\" href=\"#感知机\"></a> 感知机</h2>\n<p><strong>二分类问题</strong></p>\n<ul>\n<li>\n<p>给定输入x，权重w，和偏移b，感知机输出：</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>ο</mi><mo>=</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><mo>&lt;</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>x</mi><mo>&gt;</mo><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\omicron=\\sigma(&lt;w,x&gt;+b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">ο</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">+</span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span> \t<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.3599999999999999em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mn>1</mn><mi mathvariant=\"normal\">，</mi><mi>i</mi><mi>f</mi><mspace width=\"1em\"/><mi>x</mi><mo>&gt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>−</mo><mn>1</mn><mi mathvariant=\"normal\">，</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>w</mi><mi>i</mi><mi>s</mi><mi>e</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">\\sigma(x)=\\begin{cases} 1，if \\quad x&gt;0 \\\\ -1， otherwise  \\end{cases}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0000299999999998em;vertical-align:-1.25003em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.69em;\"><span style=\"top:-3.69em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.19em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n</li>\n<li>\n<p>二分类：-1或1</p>\n<ul>\n<li>Vs.回归输出实数</li>\n<li>Vs.Softmax回归输出概率</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030539479.png\" alt=\"image-20230509030539479\" /></p>\n<p><strong>收敛定理</strong></p>\n<ul>\n<li>数据在半径<strong>r</strong>内</li>\n<li>余量<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">ρ</span></span></span></span>分类两类\n<ul>\n<li>y(<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>x</mi><mi>T</mi></msup></mrow><annotation encoding=\"application/x-tex\">x^T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8413309999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span></span></span></span>w+b) <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>⩾</mo></mrow><annotation encoding=\"application/x-tex\">\\geqslant</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7733399999999999em;vertical-align:-0.13667em;\"></span><span class=\"mrel amsrm\">⩾</span></span></span></span> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">ρ</span></span></span></span></li>\n</ul>\n</li>\n</ul>\n<p>​\t对于<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><mi>W</mi><mi mathvariant=\"normal\">∣</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>⩽</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">||W||^2+b^2\\leqslant1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9507779999999999em;vertical-align:-0.13667em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel amsrm\">⩽</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<ul>\n<li>感知机保证在<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mrow><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mn>1</mn></mrow><msup><mi>ρ</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac {r^2+1}{\\rho^2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.499028em;vertical-align:-0.481108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01792em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>步后收敛</li>\n</ul>\n<p><strong>XOR问题</strong></p>\n<p>感知机不能拟合XOR函数，它只能产生线性分割面</p>\n<h3 id=\"多层感知机\"><a class=\"markdownIt-Anchor\" href=\"#多层感知机\"></a> 多层感知机</h3>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030532939.png\" alt=\"image-20230509030532939\" /></p>\n<ul>\n<li>\n<p>X，Y先进入蓝色进行判断：（1，3）为+，（2，4）为－</p>\n</li>\n<li>\n<p>X，Y再进入黄色进行判断：（1，2）为+，（3，4）为-</p>\n</li>\n<li>\n<p>product对前面的结果做乘积，相同为+ ，相异为-</p>\n</li>\n</ul>\n<p><strong>总结</strong></p>\n<ul>\n<li>多层感知器使用隐藏层和激活函数来得到非线性模型</li>\n<li>常用激活函数是sigmoid，Tanh，ReLU</li>\n<li>使用softmax来处理多类分类</li>\n<li>超参数为隐藏层数，和各个隐藏层大小</li>\n</ul>\n<blockquote>\n<p>代码</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"><span class=\"keyword\">from</span> d2l <span class=\"keyword\">import</span> torch <span class=\"keyword\">as</span> d2l</span><br><span class=\"line\"><span class=\"keyword\">import</span> pylab</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\">os.environ[<span class=\"string\">&#x27;KMP_DUPLICATE_LIB_OK&#x27;</span>] = <span class=\"string\">&#x27;True&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 批量大小</span></span><br><span class=\"line\">batch_size = <span class=\"number\">64</span></span><br><span class=\"line\">train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)</span><br><span class=\"line\"><span class=\"comment\"># 超参数</span></span><br><span class=\"line\">num_inputs, num_outputs, num_hiddens = <span class=\"number\">784</span>, <span class=\"number\">10</span>, <span class=\"number\">256</span></span><br><span class=\"line\">W1 = nn.Parameter(torch.randn(num_inputs, num_hiddens, requires_grad=<span class=\"literal\">True</span>) * <span class=\"number\">0.01</span>)</span><br><span class=\"line\">b1 = nn.Parameter(torch.zeros(num_hiddens, requires_grad=<span class=\"literal\">True</span>))</span><br><span class=\"line\">W2 = nn.Parameter(torch.randn(num_hiddens, num_outputs, requires_grad=<span class=\"literal\">True</span>) * <span class=\"number\">0.01</span>)</span><br><span class=\"line\">b2 = nn.Parameter(torch.zeros(num_outputs, requires_grad=<span class=\"literal\">True</span>))</span><br><span class=\"line\">params = [W1, b1, W2, b2]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">relu</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    a = torch.zeros_like(X)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> torch.<span class=\"built_in\">max</span>(X, a)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">net</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    X = X.reshape((-<span class=\"number\">1</span>, num_inputs))</span><br><span class=\"line\">    H = relu(X @ W1 + b1)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (H @ W2 + b2)</span><br><span class=\"line\"></span><br><span class=\"line\">loss = nn.CrossEntropyLoss()</span><br><span class=\"line\">num_epochs, lr = <span class=\"number\">10</span>, <span class=\"number\">0.1</span></span><br><span class=\"line\">updater = torch.optim.SGD(params, lr=lr)</span><br><span class=\"line\">d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, updater)</span><br><span class=\"line\">d2l.predict_ch3(net, test_iter)</span><br><span class=\"line\">pylab.show()</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>结果</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030519094.png\" alt=\"image-20230509030519094\" /></p>\n<h2 id=\"模型选择\"><a class=\"markdownIt-Anchor\" href=\"#模型选择\"></a> 模型选择</h2>\n<ul>\n<li>\n<p>训练误差：模型在训练数据上的误差</p>\n</li>\n<li>\n<p>泛化误差：模型在新数据上的误差</p>\n</li>\n<li>\n<p>验证数据集：评估模型好坏的数据集（不要和测试数据集混在一起）</p>\n</li>\n<li>\n<p>测试数据集：只使用一次（例如竞赛排行榜的数据集，只使用一次）</p>\n</li>\n</ul>\n<h3 id=\"k-折交叉验证\"><a class=\"markdownIt-Anchor\" href=\"#k-折交叉验证\"></a> <strong>K-折交叉验证</strong></h3>\n<p>将含有<strong>N</strong> 个样本的数据集，分成<strong>K</strong> 份，每份含有 <strong><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mi>N</mi><mi>K</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{N}{K}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.217331em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.872331em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><strong>个样本。选择其中一份作为验证集，另外</strong>K − 1</strong>份作为训练集，验证集集就有<strong>K</strong>种情况。</p>\n<ul>\n<li>在没有足够多数据时使用</li>\n<li>使用<strong>i</strong>块作为验证数据集，其余作为训练集</li>\n</ul>\n<blockquote>\n<p>最后K个验证集误差求平均</p>\n</blockquote>\n<ul>\n<li>常用：K = 5 或 10（程序跑5次或10次）</li>\n</ul>\n<h4 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\"></a> 总结</h4>\n<ul>\n<li>训练数据集：训练模型参数</li>\n<li>验证数据集：选择模型超参数</li>\n<li>非大数据集上通常使用K-折交叉验证</li>\n</ul>\n<h3 id=\"过拟合和欠拟合\"><a class=\"markdownIt-Anchor\" href=\"#过拟合和欠拟合\"></a> 过拟合和欠拟合</h3>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030508724.png\" alt=\"image-20230509030508724\" /></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">数</mi><mi mathvariant=\"normal\">据</mi></mrow><mrow><mi mathvariant=\"normal\">模</mi><mi mathvariant=\"normal\">型</mi><mi mathvariant=\"normal\">容</mi><mi mathvariant=\"normal\">量</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{数据}{模型容量}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.739em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.394em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord cjk_fallback mtight\">模</span><span class=\"mord cjk_fallback mtight\">型</span><span class=\"mord cjk_fallback mtight\">容</span><span class=\"mord cjk_fallback mtight\">量</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord cjk_fallback mtight\">数</span><span class=\"mord cjk_fallback mtight\">据</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></th>\n<th style=\"text-align:center\">简单</th>\n<th style=\"text-align:center\">复杂</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">低</td>\n<td style=\"text-align:center\">正常</td>\n<td style=\"text-align:center\"><strong>欠拟合</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">高</td>\n<td style=\"text-align:center\"><strong>过拟合</strong></td>\n<td style=\"text-align:center\">正常</td>\n</tr>\n</tbody>\n</table>\n<p><strong>模型容量的影响</strong></p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030457301.png\" alt=\"image-20230509030457301\" /></p>\n<p><strong>数据复杂度</strong></p>\n<ul>\n<li>样本个数</li>\n<li>每个样本的元素个数</li>\n<li>时间、空间结构</li>\n<li>多样性</li>\n</ul>\n<p><strong>总结</strong></p>\n<ul>\n<li>模型容量需要匹配数据复杂度，否则可能导致欠拟合和过拟合</li>\n<li>统计机器学习提供数学工具来衡量模型复杂度</li>\n<li>实际中一般靠观察训练误差和验证误差</li>\n</ul>\n<blockquote>\n<p>结果</p>\n</blockquote>\n<p>正常</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030346933.png\" alt=\"image-20230509030346933\" /></p>\n<p>欠拟合</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030430564.png\" alt=\"image-20230509030430564\" /></p>\n<p>过拟合</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030441465.png\" alt=\"image-20230509030441465\" /></p>\n<h2 id=\"卷积神经网络\"><a class=\"markdownIt-Anchor\" href=\"#卷积神经网络\"></a> 卷积神经网络</h2>\n<h3 id=\"语言识别\"><a class=\"markdownIt-Anchor\" href=\"#语言识别\"></a> 语言识别</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install SpeechRecognition</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"1.技术支持","class_desc":"本网站的搭建由以下开源作者提供技术支持","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网志框架","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.友情链接","class_desc":"其他博客","link_list":[{"name":"Fomalhaut🥝","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now 🍭🍭🍭","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"},{"name":"唐志远の博客","link":"https://tzy1997.com/","avatar":"https://bu.dusays.com/2022/01/14/cd5ffd485f867.jpg","descr":"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志。"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"https://cdn.pixabay.com/photo/2023/05/03/19/57/passau-7968535_960_720.jpg","cover_type":"img","excerpt":"","more":"<h1 id=\"深度学习\"><a class=\"markdownIt-Anchor\" href=\"#深度学习\"></a> 深度学习</h1>\n<h2 id=\"流程\"><a class=\"markdownIt-Anchor\" href=\"#流程\"></a> 流程</h2>\n<ul>\n<li>\n<p><strong>数据处理</strong></p>\n<ol>\n<li>读入数据</li>\n<li>划分数据集</li>\n<li>生成批次数据</li>\n<li>训练样本集乱序</li>\n<li>校验数据有效性</li>\n</ol>\n</li>\n<li>\n<p><strong>模型设计</strong></p>\n<ol>\n<li>网络结构</li>\n<li>损失函数</li>\n</ol>\n</li>\n<li>\n<p><strong>训练配置</strong></p>\n<ol>\n<li>优化算法\n<ul>\n<li>随机梯度下降（SGD）：随机梯度下降算法，每次训练少量数据，抽样偏差导致参数收敛过程中震荡。</li>\n<li>动量（Momentum）：引入物理“动量”的概念，累积速度，减少震荡，使参数更新的方向更稳定。</li>\n<li>AdaGrad： 根据不同参数距离最优解的远近，动态调整学习率。学习率逐渐下降，依据各参数变化大小调整学习率。</li>\n<li>Adam： 由于动量和自适应学习率两个优化思路是正交的，因此可以将两个思路结合起来，这就是当前广泛应用的算法。</li>\n</ul>\n</li>\n<li>设置学习率</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"pycharm\"><a class=\"markdownIt-Anchor\" href=\"#pycharm\"></a> pycharm</h2>\n<h3 id=\"conda环境\"><a class=\"markdownIt-Anchor\" href=\"#conda环境\"></a> conda环境</h3>\n<blockquote>\n<p>新建环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n yourEnv python=3.10</span><br></pre></td></tr></table></figure>\n<ul>\n<li>–name：也可以缩写为 【-n】，【yourEnv】是新创建的虚拟环境的名字，创建完，可以装anaconda的目录下找到envs/yourEnv 目录</li>\n<li>python=2.7：是python的版本号。也可以指定为【python=3.6】，若未指定，默认为是装anaconda时python的版本.</li>\n</ul>\n<blockquote>\n<p>激活环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">activate yourEnv</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>windows用户环境变量中添加（改成自己的路径）：</p>\n<blockquote>\n<p>D:\\Anaconda3<br />\nD:\\Anaconda3\\Scripts<br />\nD:\\Anaconda3\\Library\\bin</p>\n</blockquote>\n</li>\n</ul>\n<blockquote>\n<p>查看活跃的环境</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda info --envs</span><br></pre></td></tr></table></figure>\n<p>输出中带有【*】号的的就是当前所处的环境</p>\n<p>当<mark>创建环境</mark>时，出现**<code>NoWritablePkgsDirError: No writeable pkgs directories configured.</code>**报错</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda config --add pkgs_dirs D:\\Environment\\Anaconda3\\pkgs </span><br><span class=\"line\">conda config --add envs_dirs D:\\Environment\\Anaconda3\\envs</span><br></pre></td></tr></table></figure>\n<h3 id=\"conda其他命令\"><a class=\"markdownIt-Anchor\" href=\"#conda其他命令\"></a> conda其他命令</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda list: 看这个环境下安装的包和版本</span><br><span class=\"line\">conda install numpy scikit-learn: 安装numpy sklearn包</span><br><span class=\"line\">conda <span class=\"built_in\">env</span> remove -n yourEnv: 删除你的环境</span><br><span class=\"line\">conda <span class=\"built_in\">env</span> list: 查看所有的环境</span><br></pre></td></tr></table></figure>\n<h3 id=\"常见报错\"><a class=\"markdownIt-Anchor\" href=\"#常见报错\"></a> 常见报错</h3>\n<p>img.imshow（xxx）不显示图片</p>\n<p>在pycharm中设置图片不在pycharm中显示（关闭 Show plots in tool window）</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030632717.png\" alt=\"image-20230509030632717\" /></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pylab</span><br><span class=\"line\"></span><br><span class=\"line\">pylab.show()</span><br></pre></td></tr></table></figure>\n<p>当控制台报</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OMP: Error <span class=\"comment\">#15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.</span></span><br><span class=\"line\">OMP: Hint This means that multiple copies of the OpenMP runtime have been linked into the program. That is dangerous, since it can degrade performance or cause incorrect results. The best thing to <span class=\"keyword\">do</span> is to ensure that only a single OpenMP runtime is linked into the process, e.g. by avoiding static linking of the OpenMP runtime <span class=\"keyword\">in</span> any library. As an unsafe, unsupported, undocumented workaround you can <span class=\"built_in\">set</span> the environment variable KMP_DUPLICATE_LIB_OK=TRUE to allow the program to <span class=\"built_in\">continue</span> to execute, but that may cause crashes or silently produce incorrect results. For more information, please see http://www.intel.com/software/products/support/.</span><br></pre></td></tr></table></figure>\n<p>使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import os</span><br><span class=\"line\">os.environ[&#x27;KMP_DUPLICATE_LIB_OK&#x27;] = &#x27;True&#x27;</span><br></pre></td></tr></table></figure>\n<h2 id=\"线性回归与逻辑回归\"><a class=\"markdownIt-Anchor\" href=\"#线性回归与逻辑回归\"></a> 线性回归与逻辑回归</h2>\n<ul>\n<li>线性回归是一种用于预测和拟合函数的方法。它用于回归任务，例如用来拟合一条直线。</li>\n</ul>\n<blockquote>\n<p>应用：线性回归常用于连续变量的预测，例如房价预测、股票价格预测等。它可以用来拟合一条直线，描述自变量和因变量之间的关系。</p>\n</blockquote>\n<ul>\n<li>逻辑回归是一种用于分类和预测函数的方法。它用于分类任务，可以进行二分类或多分类。它是在给定自变量和超参数后，得到因变量的期望，基于这个期望来处理预测分类问题。</li>\n</ul>\n<blockquote>\n<p>应用：逻辑回归常用于分类问题，例如垃圾邮件分类、疾病诊断等。它可以用来预测一个事件发生的概率，并根据这个概率进行分类。</p>\n</blockquote>\n<h2 id=\"支持向量机svm\"><a class=\"markdownIt-Anchor\" href=\"#支持向量机svm\"></a> 支持向量机SVM</h2>\n<p><strong>线性可分支持向量机</strong></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>w</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo>⋯</mo><msub><mi>w</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">w=(w_1,w_2\\cdots w_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo>⋯</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x=(x_1,x_2\\cdots x_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<p>b = -10</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>w</mi><mo>×</mo><mi>x</mi><mo>+</mo><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">w ×x+b=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></p>\n<p><strong>线性支持向量机</strong></p>\n<p><strong>非线性支持向量机</strong></p>\n<h2 id=\"softmax-回归\"><a class=\"markdownIt-Anchor\" href=\"#softmax-回归\"></a> Softmax 回归</h2>\n<blockquote>\n<p>区别</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030620079.png\" alt=\"image-20230509030620079\" /></p>\n<h3 id=\"均方损失\"><a class=\"markdownIt-Anchor\" href=\"#均方损失\"></a> 均方损失</h3>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030615471.png\" alt=\"image-20230509030615471\" /></p>\n<h3 id=\"softmax和交叉熵损失\"><a class=\"markdownIt-Anchor\" href=\"#softmax和交叉熵损失\"></a> Softmax和交叉熵损失</h3>\n<ul>\n<li>交叉熵常用来衡量两个概率的区别</li>\n</ul>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030607826.png\" alt=\"image-20230509030607826\" /></p>\n<p>总结：</p>\n<ul>\n<li>Softmax回归是一个多分类模型</li>\n<li>使用Softmax操作子得到每个类的预测置信度</li>\n<li>使用交叉熵来衡量预测和标号的区别作为损失函数</li>\n</ul>\n<h3 id=\"从零开始实现\"><a class=\"markdownIt-Anchor\" href=\"#从零开始实现\"></a> 从零开始实现</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>X</mi><msub><mo stretchy=\"false\">)</mo><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><mrow><msub><mo>∑</mo><mi>k</mi></msub><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">softmax(X)_{ij}=\\frac{exp(X_{ij})}{∑_kexp(X_{ik})}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.6023269999999998em;vertical-align:-0.5700069999999999em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.03232em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mop op-symbol small-op mtight\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1745899999999999em;\"><span style=\"top:-2.1785614285714283em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32143857142857146em;\"><span></span></span></span></span></span></span><span class=\"mspace mtight\" style=\"margin-right:0.19516666666666668em;\"></span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mord mathdefault mtight\">p</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:-0.07847em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.50732em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mord mathdefault mtight\">p</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3280857142857143em;\"><span style=\"top:-2.357em;margin-left:-0.07847em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2818857142857143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5700069999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">softmax</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    X_exp = torch.exp(X)</span><br><span class=\"line\">    partition = X_exp.<span class=\"built_in\">sum</span>(<span class=\"number\">1</span>, keepdim=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X_exp / partition <span class=\"comment\"># 应用广播机制</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>实现结果</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030549122.png\" alt=\"image-20230509030549122\" /></p>\n<h2 id=\"损失函数\"><a class=\"markdownIt-Anchor\" href=\"#损失函数\"></a> 损失函数</h2>\n<p>L2 Loss（均方损失）</p>\n<blockquote>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>l</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo separator=\"true\">,</mo><msup><mi>y</mi><mo mathvariant=\"normal\">′</mo></msup><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy=\"false\">(</mo><mi>y</mi><mo>−</mo><msup><mi>y</mi><mo mathvariant=\"normal\">′</mo></msup><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">l(y,y&#x27;)=\\frac{1}{2}(y-y&#x27;)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></p>\n</blockquote>\n<p>L1 Loss</p>\n<blockquote>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>l</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo separator=\"true\">,</mo><msup><mi>y</mi><mo mathvariant=\"normal\">′</mo></msup><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"normal\">∣</mi><mi>y</mi><mo>−</mo><msup><mi>y</mi><mo mathvariant=\"normal\">′</mo></msup><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">l(y,y&#x27;)=|y-y&#x27;|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span></span></span></span></p>\n</blockquote>\n<h2 id=\"图像分类数据集\"><a class=\"markdownIt-Anchor\" href=\"#图像分类数据集\"></a> 图像分类数据集</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">from</span> torch.utils <span class=\"keyword\">import</span> data</span><br><span class=\"line\"><span class=\"keyword\">from</span> d2l <span class=\"keyword\">import</span> torch <span class=\"keyword\">as</span> d2l</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_dataloader_workers</span>():</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;使用4个进程来读取数据。&quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">4</span></span><br><span class=\"line\"></span><br><span class=\"line\">train_iter = data.DataLoader(mnist_train, batch_size, shuffle=<span class=\"literal\">True</span>, num_workers=get_dataloader_workers())</span><br><span class=\"line\"></span><br><span class=\"line\">timer = d2l.Timer()</span><br><span class=\"line\"><span class=\"keyword\">for</span> X, y <span class=\"keyword\">in</span> train_iter:</span><br><span class=\"line\">    <span class=\"keyword\">continue</span></span><br><span class=\"line\"><span class=\"comment\"># 打印读取数据时间</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;timer.stop():<span class=\"number\">.2</span>f&#125;</span> sec&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"感知机\"><a class=\"markdownIt-Anchor\" href=\"#感知机\"></a> 感知机</h2>\n<p><strong>二分类问题</strong></p>\n<ul>\n<li>\n<p>给定输入x，权重w，和偏移b，感知机输出：</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>ο</mi><mo>=</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><mo>&lt;</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>x</mi><mo>&gt;</mo><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\omicron=\\sigma(&lt;w,x&gt;+b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">ο</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">+</span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span></span></span></span> \t<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.3599999999999999em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mn>1</mn><mi mathvariant=\"normal\">，</mi><mi>i</mi><mi>f</mi><mspace width=\"1em\"/><mi>x</mi><mo>&gt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>−</mo><mn>1</mn><mi mathvariant=\"normal\">，</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>w</mi><mi>i</mi><mi>s</mi><mi>e</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">\\sigma(x)=\\begin{cases} 1，if \\quad x&gt;0 \\\\ -1， otherwise  \\end{cases}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0000299999999998em;vertical-align:-1.25003em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.69em;\"><span style=\"top:-3.69em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.19em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n</li>\n<li>\n<p>二分类：-1或1</p>\n<ul>\n<li>Vs.回归输出实数</li>\n<li>Vs.Softmax回归输出概率</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030539479.png\" alt=\"image-20230509030539479\" /></p>\n<p><strong>收敛定理</strong></p>\n<ul>\n<li>数据在半径<strong>r</strong>内</li>\n<li>余量<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">ρ</span></span></span></span>分类两类\n<ul>\n<li>y(<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>x</mi><mi>T</mi></msup></mrow><annotation encoding=\"application/x-tex\">x^T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8413309999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span></span></span></span>w+b) <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>⩾</mo></mrow><annotation encoding=\"application/x-tex\">\\geqslant</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7733399999999999em;vertical-align:-0.13667em;\"></span><span class=\"mrel amsrm\">⩾</span></span></span></span> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">ρ</span></span></span></span></li>\n</ul>\n</li>\n</ul>\n<p>​\t对于<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><mi>W</mi><mi mathvariant=\"normal\">∣</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>⩽</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">||W||^2+b^2\\leqslant1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9507779999999999em;vertical-align:-0.13667em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel amsrm\">⩽</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<ul>\n<li>感知机保证在<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mrow><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mn>1</mn></mrow><msup><mi>ρ</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac {r^2+1}{\\rho^2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.499028em;vertical-align:-0.481108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01792em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913142857142857em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>步后收敛</li>\n</ul>\n<p><strong>XOR问题</strong></p>\n<p>感知机不能拟合XOR函数，它只能产生线性分割面</p>\n<h3 id=\"多层感知机\"><a class=\"markdownIt-Anchor\" href=\"#多层感知机\"></a> 多层感知机</h3>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030532939.png\" alt=\"image-20230509030532939\" /></p>\n<ul>\n<li>\n<p>X，Y先进入蓝色进行判断：（1，3）为+，（2，4）为－</p>\n</li>\n<li>\n<p>X，Y再进入黄色进行判断：（1，2）为+，（3，4）为-</p>\n</li>\n<li>\n<p>product对前面的结果做乘积，相同为+ ，相异为-</p>\n</li>\n</ul>\n<p><strong>总结</strong></p>\n<ul>\n<li>多层感知器使用隐藏层和激活函数来得到非线性模型</li>\n<li>常用激活函数是sigmoid，Tanh，ReLU</li>\n<li>使用softmax来处理多类分类</li>\n<li>超参数为隐藏层数，和各个隐藏层大小</li>\n</ul>\n<blockquote>\n<p>代码</p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"><span class=\"keyword\">from</span> d2l <span class=\"keyword\">import</span> torch <span class=\"keyword\">as</span> d2l</span><br><span class=\"line\"><span class=\"keyword\">import</span> pylab</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\">os.environ[<span class=\"string\">&#x27;KMP_DUPLICATE_LIB_OK&#x27;</span>] = <span class=\"string\">&#x27;True&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 批量大小</span></span><br><span class=\"line\">batch_size = <span class=\"number\">64</span></span><br><span class=\"line\">train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)</span><br><span class=\"line\"><span class=\"comment\"># 超参数</span></span><br><span class=\"line\">num_inputs, num_outputs, num_hiddens = <span class=\"number\">784</span>, <span class=\"number\">10</span>, <span class=\"number\">256</span></span><br><span class=\"line\">W1 = nn.Parameter(torch.randn(num_inputs, num_hiddens, requires_grad=<span class=\"literal\">True</span>) * <span class=\"number\">0.01</span>)</span><br><span class=\"line\">b1 = nn.Parameter(torch.zeros(num_hiddens, requires_grad=<span class=\"literal\">True</span>))</span><br><span class=\"line\">W2 = nn.Parameter(torch.randn(num_hiddens, num_outputs, requires_grad=<span class=\"literal\">True</span>) * <span class=\"number\">0.01</span>)</span><br><span class=\"line\">b2 = nn.Parameter(torch.zeros(num_outputs, requires_grad=<span class=\"literal\">True</span>))</span><br><span class=\"line\">params = [W1, b1, W2, b2]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">relu</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    a = torch.zeros_like(X)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> torch.<span class=\"built_in\">max</span>(X, a)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">net</span>(<span class=\"params\">X</span>):</span><br><span class=\"line\">    X = X.reshape((-<span class=\"number\">1</span>, num_inputs))</span><br><span class=\"line\">    H = relu(X @ W1 + b1)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (H @ W2 + b2)</span><br><span class=\"line\"></span><br><span class=\"line\">loss = nn.CrossEntropyLoss()</span><br><span class=\"line\">num_epochs, lr = <span class=\"number\">10</span>, <span class=\"number\">0.1</span></span><br><span class=\"line\">updater = torch.optim.SGD(params, lr=lr)</span><br><span class=\"line\">d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, updater)</span><br><span class=\"line\">d2l.predict_ch3(net, test_iter)</span><br><span class=\"line\">pylab.show()</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>结果</p>\n</blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030519094.png\" alt=\"image-20230509030519094\" /></p>\n<h2 id=\"模型选择\"><a class=\"markdownIt-Anchor\" href=\"#模型选择\"></a> 模型选择</h2>\n<ul>\n<li>\n<p>训练误差：模型在训练数据上的误差</p>\n</li>\n<li>\n<p>泛化误差：模型在新数据上的误差</p>\n</li>\n<li>\n<p>验证数据集：评估模型好坏的数据集（不要和测试数据集混在一起）</p>\n</li>\n<li>\n<p>测试数据集：只使用一次（例如竞赛排行榜的数据集，只使用一次）</p>\n</li>\n</ul>\n<h3 id=\"k-折交叉验证\"><a class=\"markdownIt-Anchor\" href=\"#k-折交叉验证\"></a> <strong>K-折交叉验证</strong></h3>\n<p>将含有<strong>N</strong> 个样本的数据集，分成<strong>K</strong> 份，每份含有 <strong><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mi>N</mi><mi>K</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{N}{K}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.217331em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.872331em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><strong>个样本。选择其中一份作为验证集，另外</strong>K − 1</strong>份作为训练集，验证集集就有<strong>K</strong>种情况。</p>\n<ul>\n<li>在没有足够多数据时使用</li>\n<li>使用<strong>i</strong>块作为验证数据集，其余作为训练集</li>\n</ul>\n<blockquote>\n<p>最后K个验证集误差求平均</p>\n</blockquote>\n<ul>\n<li>常用：K = 5 或 10（程序跑5次或10次）</li>\n</ul>\n<h4 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\"></a> 总结</h4>\n<ul>\n<li>训练数据集：训练模型参数</li>\n<li>验证数据集：选择模型超参数</li>\n<li>非大数据集上通常使用K-折交叉验证</li>\n</ul>\n<h3 id=\"过拟合和欠拟合\"><a class=\"markdownIt-Anchor\" href=\"#过拟合和欠拟合\"></a> 过拟合和欠拟合</h3>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030508724.png\" alt=\"image-20230509030508724\" /></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">数</mi><mi mathvariant=\"normal\">据</mi></mrow><mrow><mi mathvariant=\"normal\">模</mi><mi mathvariant=\"normal\">型</mi><mi mathvariant=\"normal\">容</mi><mi mathvariant=\"normal\">量</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{数据}{模型容量}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.739em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.394em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord cjk_fallback mtight\">模</span><span class=\"mord cjk_fallback mtight\">型</span><span class=\"mord cjk_fallback mtight\">容</span><span class=\"mord cjk_fallback mtight\">量</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord cjk_fallback mtight\">数</span><span class=\"mord cjk_fallback mtight\">据</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></th>\n<th style=\"text-align:center\">简单</th>\n<th style=\"text-align:center\">复杂</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">低</td>\n<td style=\"text-align:center\">正常</td>\n<td style=\"text-align:center\"><strong>欠拟合</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">高</td>\n<td style=\"text-align:center\"><strong>过拟合</strong></td>\n<td style=\"text-align:center\">正常</td>\n</tr>\n</tbody>\n</table>\n<p><strong>模型容量的影响</strong></p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030457301.png\" alt=\"image-20230509030457301\" /></p>\n<p><strong>数据复杂度</strong></p>\n<ul>\n<li>样本个数</li>\n<li>每个样本的元素个数</li>\n<li>时间、空间结构</li>\n<li>多样性</li>\n</ul>\n<p><strong>总结</strong></p>\n<ul>\n<li>模型容量需要匹配数据复杂度，否则可能导致欠拟合和过拟合</li>\n<li>统计机器学习提供数学工具来衡量模型复杂度</li>\n<li>实际中一般靠观察训练误差和验证误差</li>\n</ul>\n<blockquote>\n<p>结果</p>\n</blockquote>\n<p>正常</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030346933.png\" alt=\"image-20230509030346933\" /></p>\n<p>欠拟合</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030430564.png\" alt=\"image-20230509030430564\" /></p>\n<p>过拟合</p>\n<p><img src=\"https://cdn.staticaly.com/gh/Wang-weijun/pic_bed@main/img/image-20230509030441465.png\" alt=\"image-20230509030441465\" /></p>\n<h2 id=\"卷积神经网络\"><a class=\"markdownIt-Anchor\" href=\"#卷积神经网络\"></a> 卷积神经网络</h2>\n<h3 id=\"语言识别\"><a class=\"markdownIt-Anchor\" href=\"#语言识别\"></a> 语言识别</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install SpeechRecognition</span><br></pre></td></tr></table></figure>"}],"PostAsset":[],"PostCategory":[{"post_id":"clhje45za0001qc9h3n1e339a","category_id":"clhje45ze0004qc9hbhkz2v8t","_id":"clhje45zm000iqc9h2fhhfxtk"},{"post_id":"clhje45zd0003qc9hhgrp5ivc","category_id":"clhje45ze0004qc9hbhkz2v8t","_id":"clhje45zp000oqc9hd0negrwf"},{"post_id":"clhje45zg0007qc9hfgavb70c","category_id":"clhje45ze0004qc9hbhkz2v8t","_id":"clhje45zq000tqc9he16eftfi"},{"post_id":"clhje45zi0009qc9hdwys49i2","category_id":"clhje45zp000nqc9hbqllf6zz","_id":"clhje45zr000zqc9hchs9gq4n"},{"post_id":"clhje45zj000bqc9h3x6xglal","category_id":"clhje45zp000nqc9hbqllf6zz","_id":"clhje45zs0012qc9hhqbvgyka"},{"post_id":"clhje45zu0014qc9h3qpu7s1o","category_id":"clhje45ze0004qc9hbhkz2v8t","_id":"clhje45zw0018qc9h55ol5r7i"},{"post_id":"clhje45zu0013qc9h5m9b9797","category_id":"clhje45zv0015qc9hclipfwa7","_id":"clhje45zw001cqc9ha4x07bbr"},{"post_id":"clhje45zv0017qc9h9rxohddg","category_id":"clhje45zw0019qc9h84v5g88f","_id":"clhje45zx001fqc9h1omeeg5g"}],"PostTag":[{"post_id":"clhje45za0001qc9h3n1e339a","tag_id":"clhje45zg0005qc9h2fuic5f6","_id":"clhje45zl000eqc9hd92rba5e"},{"post_id":"clhje45zd0003qc9hhgrp5ivc","tag_id":"clhje45zj000dqc9h1pw3awu0","_id":"clhje45zo000lqc9he23cgqer"},{"post_id":"clhje45zg0007qc9hfgavb70c","tag_id":"clhje45zm000jqc9h9kna04mw","_id":"clhje45zq000rqc9h11qkhwtb"},{"post_id":"clhje45zi0009qc9hdwys49i2","tag_id":"clhje45zp000pqc9h2n2oamd0","_id":"clhje45zr000xqc9hhcptguwq"},{"post_id":"clhje45zj000bqc9h3x6xglal","tag_id":"clhje45zp000pqc9h2n2oamd0","_id":"clhje45zs0011qc9h86w62ks1"},{"post_id":"clhje45zu0013qc9h5m9b9797","tag_id":"clhje45zv0016qc9h1rpycp71","_id":"clhje45zw001bqc9h3faw34x3"},{"post_id":"clhje45zu0014qc9h3qpu7s1o","tag_id":"clhje45zw001aqc9hfdcr1lrb","_id":"clhje45zx001eqc9h2h0g1zts"},{"post_id":"clhje45zv0017qc9h9rxohddg","tag_id":"clhje45zx001dqc9h7oua8a1k","_id":"clhje45zx001gqc9h72662m0k"}],"Tag":[{"name":"Redis","_id":"clhje45zg0005qc9h2fuic5f6"},{"name":"Docker","_id":"clhje45zj000dqc9h1pw3awu0"},{"name":"Git","_id":"clhje45zm000jqc9h9kna04mw"},{"name":"Python","_id":"clhje45zp000pqc9h2n2oamd0"},{"name":"Blog","_id":"clhje45zv0016qc9h1rpycp71"},{"name":"对象存储","_id":"clhje45zw001aqc9hfdcr1lrb"},{"name":"Torch","_id":"clhje45zx001dqc9h7oua8a1k"}]}}